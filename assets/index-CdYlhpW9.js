function Eg(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Sg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Tg(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Nf={exports:{}},Bo={},xf={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fi=Symbol.for("react.element"),Cg=Symbol.for("react.portal"),Ig=Symbol.for("react.fragment"),Ag=Symbol.for("react.strict_mode"),Rg=Symbol.for("react.profiler"),Pg=Symbol.for("react.provider"),kg=Symbol.for("react.context"),Ng=Symbol.for("react.forward_ref"),xg=Symbol.for("react.suspense"),Mg=Symbol.for("react.memo"),Dg=Symbol.for("react.lazy"),_u=Symbol.iterator;function Ug(t){return t===null||typeof t!="object"?null:(t=_u&&t[_u]||t["@@iterator"],typeof t=="function"?t:null)}var Mf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Df=Object.assign,Uf={};function cr(t,e,n){this.props=t,this.context=e,this.refs=Uf,this.updater=n||Mf}cr.prototype.isReactComponent={};cr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lf(){}Lf.prototype=cr.prototype;function aa(t,e,n){this.props=t,this.context=e,this.refs=Uf,this.updater=n||Mf}var ua=aa.prototype=new Lf;ua.constructor=aa;Df(ua,cr.prototype);ua.isPureReactComponent=!0;var wu=Array.isArray,bf=Object.prototype.hasOwnProperty,ca={current:null},Ff={key:!0,ref:!0,__self:!0,__source:!0};function Of(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)bf.call(e,r)&&!Ff.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),d=0;d<a;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:fi,type:t,key:o,ref:s,props:i,_owner:ca.current}}function Lg(t,e){return{$$typeof:fi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function da(t){return typeof t=="object"&&t!==null&&t.$$typeof===fi}function bg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eu=/\/+/g;function cs(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bg(""+t.key):e.toString(36)}function Wi(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case fi:case Cg:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+cs(s,0):r,wu(i)?(n="",t!=null&&(n=t.replace(Eu,"$&/")+"/"),Wi(i,e,n,"",function(d){return d})):i!=null&&(da(i)&&(i=Lg(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Eu,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",wu(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+cs(o,a);s+=Wi(o,e,n,c,i)}else if(c=Ug(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+cs(o,a++),s+=Wi(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ei(t,e,n){if(t==null)return t;var r=[],i=0;return Wi(t,r,"","",function(o){return e.call(n,o,i++)}),r}function Fg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Re={current:null},Ki={transition:null},Og={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Ki,ReactCurrentOwner:ca};function Vf(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:Ei,forEach:function(t,e,n){Ei(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ei(t,function(){e++}),e},toArray:function(t){return Ei(t,function(e){return e})||[]},only:function(t){if(!da(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=cr;V.Fragment=Ig;V.Profiler=Rg;V.PureComponent=aa;V.StrictMode=Ag;V.Suspense=xg;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Og;V.act=Vf;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Df({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ca.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)bf.call(e,c)&&!Ff.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var d=0;d<c;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:fi,type:t.type,key:i,ref:o,props:r,_owner:s}};V.createContext=function(t){return t={$$typeof:kg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pg,_context:t},t.Consumer=t};V.createElement=Of;V.createFactory=function(t){var e=Of.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Ng,render:t}};V.isValidElement=da;V.lazy=function(t){return{$$typeof:Dg,_payload:{_status:-1,_result:t},_init:Fg}};V.memo=function(t,e){return{$$typeof:Mg,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=Ki.transition;Ki.transition={};try{t()}finally{Ki.transition=e}};V.unstable_act=Vf;V.useCallback=function(t,e){return Re.current.useCallback(t,e)};V.useContext=function(t){return Re.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return Re.current.useDeferredValue(t)};V.useEffect=function(t,e){return Re.current.useEffect(t,e)};V.useId=function(){return Re.current.useId()};V.useImperativeHandle=function(t,e,n){return Re.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return Re.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return Re.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return Re.current.useMemo(t,e)};V.useReducer=function(t,e,n){return Re.current.useReducer(t,e,n)};V.useRef=function(t){return Re.current.useRef(t)};V.useState=function(t){return Re.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return Re.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return Re.current.useTransition()};V.version="18.3.1";xf.exports=V;var Ce=xf.exports;const Vg=Sg(Ce);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g=Ce,Bg=Symbol.for("react.element"),Gg=Symbol.for("react.fragment"),qg=Object.prototype.hasOwnProperty,Hg=$g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zg={key:!0,ref:!0,__self:!0,__source:!0};function $f(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)qg.call(e,r)&&!zg.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Bg,type:t,key:o,ref:s,props:i,_owner:Hg.current}}Bo.Fragment=Gg;Bo.jsx=$f;Bo.jsxs=$f;Nf.exports=Bo;var I=Nf.exports,Ws={},Bf={exports:{}},qe={},Gf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,F){var O=D.length;D.push(F);e:for(;0<O;){var ne=O-1>>>1,ue=D[ne];if(0<i(ue,F))D[ne]=F,D[O]=ue,O=ne;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var F=D[0],O=D.pop();if(O!==F){D[0]=O;e:for(var ne=0,ue=D.length,_i=ue>>>1;ne<_i;){var en=2*(ne+1)-1,us=D[en],tn=en+1,wi=D[tn];if(0>i(us,O))tn<ue&&0>i(wi,us)?(D[ne]=wi,D[tn]=O,ne=tn):(D[ne]=us,D[en]=O,ne=en);else if(tn<ue&&0>i(wi,O))D[ne]=wi,D[tn]=O,ne=tn;else break e}}return F}function i(D,F){var O=D.sortIndex-F.sortIndex;return O!==0?O:D.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],d=[],f=1,h=null,p=3,m=!1,_=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var F=n(d);F!==null;){if(F.callback===null)r(d);else if(F.startTime<=D)r(d),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(d)}}function S(D){if(w=!1,v(D),!_)if(n(c)!==null)_=!0,Ue(T);else{var F=n(d);F!==null&&jt(S,F.startTime-D)}}function T(D,F){_=!1,w&&(w=!1,y(P),P=-1),m=!0;var O=p;try{for(v(F),h=n(c);h!==null&&(!(h.expirationTime>F)||D&&!G());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,p=h.priorityLevel;var ue=ne(h.expirationTime<=F);F=t.unstable_now(),typeof ue=="function"?h.callback=ue:h===n(c)&&r(c),v(F)}else r(c);h=n(c)}if(h!==null)var _i=!0;else{var en=n(d);en!==null&&jt(S,en.startTime-F),_i=!1}return _i}finally{h=null,p=O,m=!1}}var C=!1,A=null,P=-1,k=5,M=-1;function G(){return!(t.unstable_now()-M<k)}function H(){if(A!==null){var D=t.unstable_now();M=D;var F=!0;try{F=A(!0,D)}finally{F?ye():(C=!1,A=null)}}else C=!1}var ye;if(typeof g=="function")ye=function(){g(H)};else if(typeof MessageChannel<"u"){var _r=new MessageChannel,vi=_r.port2;_r.port1.onmessage=H,ye=function(){vi.postMessage(null)}}else ye=function(){E(H,0)};function Ue(D){A=D,C||(C=!0,ye())}function jt(D,F){P=E(function(){D(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){_||m||(_=!0,Ue(T))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(D){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var O=p;p=F;try{return D()}finally{p=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,F){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var O=p;p=D;try{return F()}finally{p=O}},t.unstable_scheduleCallback=function(D,F,O){var ne=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?ne+O:ne):O=ne,D){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=O+ue,D={id:f++,callback:F,priorityLevel:D,startTime:O,expirationTime:ue,sortIndex:-1},O>ne?(D.sortIndex=O,e(d,D),n(c)===null&&D===n(d)&&(w?(y(P),P=-1):w=!0,jt(S,O-ne))):(D.sortIndex=ue,e(c,D),_||m||(_=!0,Ue(T))),D},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(D){var F=p;return function(){var O=p;p=F;try{return D.apply(this,arguments)}finally{p=O}}}})(qf);Gf.exports=qf;var Jg=Gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=Ce,Ge=Jg;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hf=new Set,Jr={};function Sn(t,e){nr(t,e),nr(t+"Capture",e)}function nr(t,e){for(Jr[t]=e,t=0;t<e.length;t++)Hf.add(e[t])}var Et=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ks=Object.prototype.hasOwnProperty,Kg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Su={},Tu={};function Yg(t){return Ks.call(Tu,t)?!0:Ks.call(Su,t)?!1:Kg.test(t)?Tu[t]=!0:(Su[t]=!0,!1)}function Qg(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Xg(t,e,n,r){if(e===null||typeof e>"u"||Qg(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pe(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ge[t]=new Pe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ge[e]=new Pe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ge[t]=new Pe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ge[t]=new Pe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ge[t]=new Pe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ge[t]=new Pe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ge[t]=new Pe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ge[t]=new Pe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ge[t]=new Pe(t,5,!1,t.toLowerCase(),null,!1,!1)});var fa=/[\-:]([a-z])/g;function ha(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fa,ha);ge[e]=new Pe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fa,ha);ge[e]=new Pe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fa,ha);ge[e]=new Pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ge[t]=new Pe(t,1,!1,t.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ge[t]=new Pe(t,1,!1,t.toLowerCase(),null,!0,!0)});function pa(t,e,n,r){var i=ge.hasOwnProperty(e)?ge[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Xg(e,n,i,r)&&(n=null),r||i===null?Yg(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var At=Wg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Si=Symbol.for("react.element"),Dn=Symbol.for("react.portal"),Un=Symbol.for("react.fragment"),ma=Symbol.for("react.strict_mode"),Ys=Symbol.for("react.profiler"),zf=Symbol.for("react.provider"),Jf=Symbol.for("react.context"),ga=Symbol.for("react.forward_ref"),Qs=Symbol.for("react.suspense"),Xs=Symbol.for("react.suspense_list"),ya=Symbol.for("react.memo"),xt=Symbol.for("react.lazy"),Wf=Symbol.for("react.offscreen"),Cu=Symbol.iterator;function wr(t){return t===null||typeof t!="object"?null:(t=Cu&&t[Cu]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,ds;function kr(t){if(ds===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ds=e&&e[1]||""}return`
`+ds+t}var fs=!1;function hs(t,e){if(!t||fs)return"";fs=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{fs=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kr(t):""}function Zg(t){switch(t.tag){case 5:return kr(t.type);case 16:return kr("Lazy");case 13:return kr("Suspense");case 19:return kr("SuspenseList");case 0:case 2:case 15:return t=hs(t.type,!1),t;case 11:return t=hs(t.type.render,!1),t;case 1:return t=hs(t.type,!0),t;default:return""}}function Zs(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Un:return"Fragment";case Dn:return"Portal";case Ys:return"Profiler";case ma:return"StrictMode";case Qs:return"Suspense";case Xs:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Jf:return(t.displayName||"Context")+".Consumer";case zf:return(t._context.displayName||"Context")+".Provider";case ga:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ya:return e=t.displayName||null,e!==null?e:Zs(t.type)||"Memo";case xt:e=t._payload,t=t._init;try{return Zs(t(e))}catch{}}return null}function jg(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zs(e);case 8:return e===ma?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ey(t){var e=Kf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ti(t){t._valueTracker||(t._valueTracker=ey(t))}function Yf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function js(t,e){var n=e.checked;return ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Iu(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Jt(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qf(t,e){e=e.checked,e!=null&&pa(t,"checked",e,!1)}function el(t,e){Qf(t,e);var n=Jt(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tl(t,e.type,n):e.hasOwnProperty("defaultValue")&&tl(t,e.type,Jt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Au(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tl(t,e,n){(e!=="number"||lo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nr=Array.isArray;function Jn(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Jt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ru(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Nr(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jt(n)}}function Xf(t,e){var n=Jt(e.value),r=Jt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ci,jf=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ci=Ci||document.createElement("div"),Ci.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ci.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wr(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ty=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(t){ty.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ur[e]=Ur[t]})});function eh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ur.hasOwnProperty(t)&&Ur[t]?(""+e).trim():e+"px"}function th(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=eh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ny=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(t,e){if(e){if(ny[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function ol(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sl=null;function va(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ll=null,Wn=null,Kn=null;function ku(t){if(t=mi(t)){if(typeof ll!="function")throw Error(R(280));var e=t.stateNode;e&&(e=Jo(e),ll(t.stateNode,t.type,e))}}function nh(t){Wn?Kn?Kn.push(t):Kn=[t]:Wn=t}function rh(){if(Wn){var t=Wn,e=Kn;if(Kn=Wn=null,ku(t),e)for(t=0;t<e.length;t++)ku(e[t])}}function ih(t,e){return t(e)}function oh(){}var ps=!1;function sh(t,e,n){if(ps)return t(e,n);ps=!0;try{return ih(t,e,n)}finally{ps=!1,(Wn!==null||Kn!==null)&&(oh(),rh())}}function Kr(t,e){var n=t.stateNode;if(n===null)return null;var r=Jo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var al=!1;if(Et)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){al=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{al=!1}function ry(t,e,n,r,i,o,s,a,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Lr=!1,ao=null,uo=!1,ul=null,iy={onError:function(t){Lr=!0,ao=t}};function oy(t,e,n,r,i,o,s,a,c){Lr=!1,ao=null,ry.apply(iy,arguments)}function sy(t,e,n,r,i,o,s,a,c){if(oy.apply(this,arguments),Lr){if(Lr){var d=ao;Lr=!1,ao=null}else throw Error(R(198));uo||(uo=!0,ul=d)}}function Tn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lh(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Nu(t){if(Tn(t)!==t)throw Error(R(188))}function ly(t){var e=t.alternate;if(!e){if(e=Tn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Nu(i),t;if(o===r)return Nu(i),e;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?t:e}function ah(t){return t=ly(t),t!==null?uh(t):null}function uh(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=uh(t);if(e!==null)return e;t=t.sibling}return null}var ch=Ge.unstable_scheduleCallback,xu=Ge.unstable_cancelCallback,ay=Ge.unstable_shouldYield,uy=Ge.unstable_requestPaint,re=Ge.unstable_now,cy=Ge.unstable_getCurrentPriorityLevel,_a=Ge.unstable_ImmediatePriority,dh=Ge.unstable_UserBlockingPriority,co=Ge.unstable_NormalPriority,dy=Ge.unstable_LowPriority,fh=Ge.unstable_IdlePriority,Go=null,ht=null;function fy(t){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Go,t,void 0,(t.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:my,hy=Math.log,py=Math.LN2;function my(t){return t>>>=0,t===0?32:31-(hy(t)/py|0)|0}var Ii=64,Ai=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fo(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=xr(a):(o&=s,o!==0&&(r=xr(o)))}else s=n&~i,s!==0?r=xr(s):o!==0&&(r=xr(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-st(e),i=1<<n,r|=t[n],e&=~i;return r}function gy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-st(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=gy(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function cl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function hh(){var t=Ii;return Ii<<=1,!(Ii&4194240)&&(Ii=64),t}function ms(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-st(e),t[e]=n}function vy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-st(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function wa(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-st(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var q=0;function ph(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var mh,Ea,gh,yh,vh,dl=!1,Ri=[],Ot=null,Vt=null,$t=null,Yr=new Map,Qr=new Map,Dt=[],_y="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mu(t,e){switch(t){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":$t=null;break;case"pointerover":case"pointerout":Yr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(e.pointerId)}}function Sr(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=mi(e),e!==null&&Ea(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function wy(t,e,n,r,i){switch(e){case"focusin":return Ot=Sr(Ot,t,e,n,r,i),!0;case"dragenter":return Vt=Sr(Vt,t,e,n,r,i),!0;case"mouseover":return $t=Sr($t,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Yr.set(o,Sr(Yr.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Qr.set(o,Sr(Qr.get(o)||null,t,e,n,r,i)),!0}return!1}function _h(t){var e=dn(t.target);if(e!==null){var n=Tn(e);if(n!==null){if(e=n.tag,e===13){if(e=lh(n),e!==null){t.blockedOn=e,vh(t.priority,function(){gh(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sl=r,n.target.dispatchEvent(r),sl=null}else return e=mi(n),e!==null&&Ea(e),t.blockedOn=n,!1;e.shift()}return!0}function Du(t,e,n){Yi(t)&&n.delete(e)}function Ey(){dl=!1,Ot!==null&&Yi(Ot)&&(Ot=null),Vt!==null&&Yi(Vt)&&(Vt=null),$t!==null&&Yi($t)&&($t=null),Yr.forEach(Du),Qr.forEach(Du)}function Tr(t,e){t.blockedOn===e&&(t.blockedOn=null,dl||(dl=!0,Ge.unstable_scheduleCallback(Ge.unstable_NormalPriority,Ey)))}function Xr(t){function e(i){return Tr(i,t)}if(0<Ri.length){Tr(Ri[0],t);for(var n=1;n<Ri.length;n++){var r=Ri[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ot!==null&&Tr(Ot,t),Vt!==null&&Tr(Vt,t),$t!==null&&Tr($t,t),Yr.forEach(e),Qr.forEach(e),n=0;n<Dt.length;n++)r=Dt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Dt.length&&(n=Dt[0],n.blockedOn===null);)_h(n),n.blockedOn===null&&Dt.shift()}var Yn=At.ReactCurrentBatchConfig,ho=!0;function Sy(t,e,n,r){var i=q,o=Yn.transition;Yn.transition=null;try{q=1,Sa(t,e,n,r)}finally{q=i,Yn.transition=o}}function Ty(t,e,n,r){var i=q,o=Yn.transition;Yn.transition=null;try{q=4,Sa(t,e,n,r)}finally{q=i,Yn.transition=o}}function Sa(t,e,n,r){if(ho){var i=fl(t,e,n,r);if(i===null)Is(t,e,r,po,n),Mu(t,r);else if(wy(i,t,e,n,r))r.stopPropagation();else if(Mu(t,r),e&4&&-1<_y.indexOf(t)){for(;i!==null;){var o=mi(i);if(o!==null&&mh(o),o=fl(t,e,n,r),o===null&&Is(t,e,r,po,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Is(t,e,r,null,n)}}var po=null;function fl(t,e,n,r){if(po=null,t=va(r),t=dn(t),t!==null)if(e=Tn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lh(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return po=t,null}function wh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cy()){case _a:return 1;case dh:return 4;case co:case dy:return 16;case fh:return 536870912;default:return 16}default:return 16}}var bt=null,Ta=null,Qi=null;function Eh(){if(Qi)return Qi;var t,e=Ta,n=e.length,r,i="value"in bt?bt.value:bt.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Qi=i.slice(t,1<r?1-r:void 0)}function Xi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pi(){return!0}function Uu(){return!1}function He(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Pi:Uu,this.isPropagationStopped=Uu,this}return ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pi)},persist:function(){},isPersistent:Pi}),e}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=He(dr),pi=ee({},dr,{view:0,detail:0}),Cy=He(pi),gs,ys,Cr,qo=ee({},pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ia,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cr&&(Cr&&t.type==="mousemove"?(gs=t.screenX-Cr.screenX,ys=t.screenY-Cr.screenY):ys=gs=0,Cr=t),gs)},movementY:function(t){return"movementY"in t?t.movementY:ys}}),Lu=He(qo),Iy=ee({},qo,{dataTransfer:0}),Ay=He(Iy),Ry=ee({},pi,{relatedTarget:0}),vs=He(Ry),Py=ee({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),ky=He(Py),Ny=ee({},dr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xy=He(Ny),My=ee({},dr,{data:0}),bu=He(My),Dy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uy={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ly={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function by(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ly[t])?!!e[t]:!1}function Ia(){return by}var Fy=ee({},pi,{key:function(t){if(t.key){var e=Dy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uy[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ia,charCode:function(t){return t.type==="keypress"?Xi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Oy=He(Fy),Vy=ee({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fu=He(Vy),$y=ee({},pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ia}),By=He($y),Gy=ee({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qy=He(Gy),Hy=ee({},qo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zy=He(Hy),Jy=[9,13,27,32],Aa=Et&&"CompositionEvent"in window,br=null;Et&&"documentMode"in document&&(br=document.documentMode);var Wy=Et&&"TextEvent"in window&&!br,Sh=Et&&(!Aa||br&&8<br&&11>=br),Ou=" ",Vu=!1;function Th(t,e){switch(t){case"keyup":return Jy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ch(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ln=!1;function Ky(t,e){switch(t){case"compositionend":return Ch(e);case"keypress":return e.which!==32?null:(Vu=!0,Ou);case"textInput":return t=e.data,t===Ou&&Vu?null:t;default:return null}}function Yy(t,e){if(Ln)return t==="compositionend"||!Aa&&Th(t,e)?(t=Eh(),Qi=Ta=bt=null,Ln=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Sh&&e.locale!=="ko"?null:e.data;default:return null}}var Qy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Qy[t.type]:e==="textarea"}function Ih(t,e,n,r){nh(r),e=mo(e,"onChange"),0<e.length&&(n=new Ca("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fr=null,Zr=null;function Xy(t){bh(t,0)}function Ho(t){var e=On(t);if(Yf(e))return t}function Zy(t,e){if(t==="change")return e}var Ah=!1;if(Et){var _s;if(Et){var ws="oninput"in document;if(!ws){var Bu=document.createElement("div");Bu.setAttribute("oninput","return;"),ws=typeof Bu.oninput=="function"}_s=ws}else _s=!1;Ah=_s&&(!document.documentMode||9<document.documentMode)}function Gu(){Fr&&(Fr.detachEvent("onpropertychange",Rh),Zr=Fr=null)}function Rh(t){if(t.propertyName==="value"&&Ho(Zr)){var e=[];Ih(e,Zr,t,va(t)),sh(Xy,e)}}function jy(t,e,n){t==="focusin"?(Gu(),Fr=e,Zr=n,Fr.attachEvent("onpropertychange",Rh)):t==="focusout"&&Gu()}function ev(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ho(Zr)}function tv(t,e){if(t==="click")return Ho(e)}function nv(t,e){if(t==="input"||t==="change")return Ho(e)}function rv(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var at=typeof Object.is=="function"?Object.is:rv;function jr(t,e){if(at(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ks.call(e,i)||!at(t[i],e[i]))return!1}return!0}function qu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Hu(t,e){var n=qu(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qu(n)}}function Ph(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ph(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kh(){for(var t=window,e=lo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lo(t.document)}return e}function Ra(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function iv(t){var e=kh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ph(n.ownerDocument.documentElement,n)){if(r!==null&&Ra(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Hu(n,o);var s=Hu(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ov=Et&&"documentMode"in document&&11>=document.documentMode,bn=null,hl=null,Or=null,pl=!1;function zu(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pl||bn==null||bn!==lo(r)||(r=bn,"selectionStart"in r&&Ra(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Or&&jr(Or,r)||(Or=r,r=mo(hl,"onSelect"),0<r.length&&(e=new Ca("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=bn)))}function ki(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fn={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionend:ki("Transition","TransitionEnd")},Es={},Nh={};Et&&(Nh=document.createElement("div").style,"AnimationEvent"in window||(delete Fn.animationend.animation,delete Fn.animationiteration.animation,delete Fn.animationstart.animation),"TransitionEvent"in window||delete Fn.transitionend.transition);function zo(t){if(Es[t])return Es[t];if(!Fn[t])return t;var e=Fn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Nh)return Es[t]=e[n];return t}var xh=zo("animationend"),Mh=zo("animationiteration"),Dh=zo("animationstart"),Uh=zo("transitionend"),Lh=new Map,Ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kt(t,e){Lh.set(t,e),Sn(e,[t])}for(var Ss=0;Ss<Ju.length;Ss++){var Ts=Ju[Ss],sv=Ts.toLowerCase(),lv=Ts[0].toUpperCase()+Ts.slice(1);Kt(sv,"on"+lv)}Kt(xh,"onAnimationEnd");Kt(Mh,"onAnimationIteration");Kt(Dh,"onAnimationStart");Kt("dblclick","onDoubleClick");Kt("focusin","onFocus");Kt("focusout","onBlur");Kt(Uh,"onTransitionEnd");nr("onMouseEnter",["mouseout","mouseover"]);nr("onMouseLeave",["mouseout","mouseover"]);nr("onPointerEnter",["pointerout","pointerover"]);nr("onPointerLeave",["pointerout","pointerover"]);Sn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),av=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Wu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sy(r,e,void 0,t),t.currentTarget=null}function bh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;Wu(i,a,d),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,d=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;Wu(i,a,d),o=c}}}if(uo)throw t=ul,uo=!1,ul=null,t}function W(t,e){var n=e[_l];n===void 0&&(n=e[_l]=new Set);var r=t+"__bubble";n.has(r)||(Fh(e,t,2,!1),n.add(r))}function Cs(t,e,n){var r=0;e&&(r|=4),Fh(n,t,r,e)}var Ni="_reactListening"+Math.random().toString(36).slice(2);function ei(t){if(!t[Ni]){t[Ni]=!0,Hf.forEach(function(n){n!=="selectionchange"&&(av.has(n)||Cs(n,!1,t),Cs(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ni]||(e[Ni]=!0,Cs("selectionchange",!1,e))}}function Fh(t,e,n,r){switch(wh(e)){case 1:var i=Sy;break;case 4:i=Ty;break;default:i=Sa}n=i.bind(null,e,n,t),i=void 0,!al||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Is(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=dn(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}sh(function(){var d=o,f=va(n),h=[];e:{var p=Lh.get(t);if(p!==void 0){var m=Ca,_=t;switch(t){case"keypress":if(Xi(n)===0)break e;case"keydown":case"keyup":m=Oy;break;case"focusin":_="focus",m=vs;break;case"focusout":_="blur",m=vs;break;case"beforeblur":case"afterblur":m=vs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Ay;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=By;break;case xh:case Mh:case Dh:m=ky;break;case Uh:m=qy;break;case"scroll":m=Cy;break;case"wheel":m=zy;break;case"copy":case"cut":case"paste":m=xy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Fu}var w=(e&4)!==0,E=!w&&t==="scroll",y=w?p!==null?p+"Capture":null:p;w=[];for(var g=d,v;g!==null;){v=g;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,y!==null&&(S=Kr(g,y),S!=null&&w.push(ti(g,S,v)))),E)break;g=g.return}0<w.length&&(p=new m(p,_,null,n,f),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==sl&&(_=n.relatedTarget||n.fromElement)&&(dn(_)||_[St]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(_=n.relatedTarget||n.toElement,m=d,_=_?dn(_):null,_!==null&&(E=Tn(_),_!==E||_.tag!==5&&_.tag!==6)&&(_=null)):(m=null,_=d),m!==_)){if(w=Lu,S="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(w=Fu,S="onPointerLeave",y="onPointerEnter",g="pointer"),E=m==null?p:On(m),v=_==null?p:On(_),p=new w(S,g+"leave",m,n,f),p.target=E,p.relatedTarget=v,S=null,dn(f)===d&&(w=new w(y,g+"enter",_,n,f),w.target=v,w.relatedTarget=E,S=w),E=S,m&&_)t:{for(w=m,y=_,g=0,v=w;v;v=In(v))g++;for(v=0,S=y;S;S=In(S))v++;for(;0<g-v;)w=In(w),g--;for(;0<v-g;)y=In(y),v--;for(;g--;){if(w===y||y!==null&&w===y.alternate)break t;w=In(w),y=In(y)}w=null}else w=null;m!==null&&Ku(h,p,m,w,!1),_!==null&&E!==null&&Ku(h,E,_,w,!0)}}e:{if(p=d?On(d):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=Zy;else if($u(p))if(Ah)T=nv;else{T=ev;var C=jy}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=tv);if(T&&(T=T(t,d))){Ih(h,T,n,f);break e}C&&C(t,p,d),t==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&tl(p,"number",p.value)}switch(C=d?On(d):window,t){case"focusin":($u(C)||C.contentEditable==="true")&&(bn=C,hl=d,Or=null);break;case"focusout":Or=hl=bn=null;break;case"mousedown":pl=!0;break;case"contextmenu":case"mouseup":case"dragend":pl=!1,zu(h,n,f);break;case"selectionchange":if(ov)break;case"keydown":case"keyup":zu(h,n,f)}var A;if(Aa)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ln?Th(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Sh&&n.locale!=="ko"&&(Ln||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ln&&(A=Eh()):(bt=f,Ta="value"in bt?bt.value:bt.textContent,Ln=!0)),C=mo(d,P),0<C.length&&(P=new bu(P,t,null,n,f),h.push({event:P,listeners:C}),A?P.data=A:(A=Ch(n),A!==null&&(P.data=A)))),(A=Wy?Ky(t,n):Yy(t,n))&&(d=mo(d,"onBeforeInput"),0<d.length&&(f=new bu("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=A))}bh(h,e)})}function ti(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mo(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Kr(t,n),o!=null&&r.unshift(ti(t,o,i)),o=Kr(t,e),o!=null&&r.push(ti(t,o,i))),t=t.return}return r}function In(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ku(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,d=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&d!==null&&(a=d,i?(c=Kr(n,o),c!=null&&s.unshift(ti(n,c,a))):i||(c=Kr(n,o),c!=null&&s.push(ti(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var uv=/\r\n?/g,cv=/\u0000|\uFFFD/g;function Yu(t){return(typeof t=="string"?t:""+t).replace(uv,`
`).replace(cv,"")}function xi(t,e,n){if(e=Yu(e),Yu(t)!==e&&n)throw Error(R(425))}function go(){}var ml=null,gl=null;function yl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vl=typeof setTimeout=="function"?setTimeout:void 0,dv=typeof clearTimeout=="function"?clearTimeout:void 0,Qu=typeof Promise=="function"?Promise:void 0,fv=typeof queueMicrotask=="function"?queueMicrotask:typeof Qu<"u"?function(t){return Qu.resolve(null).then(t).catch(hv)}:vl;function hv(t){setTimeout(function(){throw t})}function As(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xr(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xr(e)}function Bt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fr=Math.random().toString(36).slice(2),ft="__reactFiber$"+fr,ni="__reactProps$"+fr,St="__reactContainer$"+fr,_l="__reactEvents$"+fr,pv="__reactListeners$"+fr,mv="__reactHandles$"+fr;function dn(t){var e=t[ft];if(e)return e;for(var n=t.parentNode;n;){if(e=n[St]||n[ft]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xu(t);t!==null;){if(n=t[ft])return n;t=Xu(t)}return e}t=n,n=t.parentNode}return null}function mi(t){return t=t[ft]||t[St],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function On(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function Jo(t){return t[ni]||null}var wl=[],Vn=-1;function Yt(t){return{current:t}}function Y(t){0>Vn||(t.current=wl[Vn],wl[Vn]=null,Vn--)}function J(t,e){Vn++,wl[Vn]=t.current,t.current=e}var Wt={},Se=Yt(Wt),xe=Yt(!1),yn=Wt;function rr(t,e){var n=t.type.contextTypes;if(!n)return Wt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Me(t){return t=t.childContextTypes,t!=null}function yo(){Y(xe),Y(Se)}function Zu(t,e,n){if(Se.current!==Wt)throw Error(R(168));J(Se,e),J(xe,n)}function Oh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(R(108,jg(t)||"Unknown",i));return ee({},n,r)}function vo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Wt,yn=Se.current,J(Se,t),J(xe,xe.current),!0}function ju(t,e,n){var r=t.stateNode;if(!r)throw Error(R(169));n?(t=Oh(t,e,yn),r.__reactInternalMemoizedMergedChildContext=t,Y(xe),Y(Se),J(Se,t)):Y(xe),J(xe,n)}var yt=null,Wo=!1,Rs=!1;function Vh(t){yt===null?yt=[t]:yt.push(t)}function gv(t){Wo=!0,Vh(t)}function Qt(){if(!Rs&&yt!==null){Rs=!0;var t=0,e=q;try{var n=yt;for(q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yt=null,Wo=!1}catch(i){throw yt!==null&&(yt=yt.slice(t+1)),ch(_a,Qt),i}finally{q=e,Rs=!1}}return null}var $n=[],Bn=0,_o=null,wo=0,Je=[],We=0,vn=null,vt=1,_t="";function on(t,e){$n[Bn++]=wo,$n[Bn++]=_o,_o=t,wo=e}function $h(t,e,n){Je[We++]=vt,Je[We++]=_t,Je[We++]=vn,vn=t;var r=vt;t=_t;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,vt=1<<32-st(e)+i|n<<i|r,_t=o+t}else vt=1<<o|n<<i|r,_t=t}function Pa(t){t.return!==null&&(on(t,1),$h(t,1,0))}function ka(t){for(;t===_o;)_o=$n[--Bn],$n[Bn]=null,wo=$n[--Bn],$n[Bn]=null;for(;t===vn;)vn=Je[--We],Je[We]=null,_t=Je[--We],Je[We]=null,vt=Je[--We],Je[We]=null}var Be=null,$e=null,Q=!1,ot=null;function Bh(t,e){var n=Ke(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ec(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Be=t,$e=Bt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Be=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vn!==null?{id:vt,overflow:_t}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ke(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Be=t,$e=null,!0):!1;default:return!1}}function El(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sl(t){if(Q){var e=$e;if(e){var n=e;if(!ec(t,e)){if(El(t))throw Error(R(418));e=Bt(n.nextSibling);var r=Be;e&&ec(t,e)?Bh(r,n):(t.flags=t.flags&-4097|2,Q=!1,Be=t)}}else{if(El(t))throw Error(R(418));t.flags=t.flags&-4097|2,Q=!1,Be=t}}}function tc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Be=t}function Mi(t){if(t!==Be)return!1;if(!Q)return tc(t),Q=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yl(t.type,t.memoizedProps)),e&&(e=$e)){if(El(t))throw Gh(),Error(R(418));for(;e;)Bh(t,e),e=Bt(e.nextSibling)}if(tc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$e=Bt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=Be?Bt(t.stateNode.nextSibling):null;return!0}function Gh(){for(var t=$e;t;)t=Bt(t.nextSibling)}function ir(){$e=Be=null,Q=!1}function Na(t){ot===null?ot=[t]:ot.push(t)}var yv=At.ReactCurrentBatchConfig;function Ir(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,t))}return t}function Di(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nc(t){var e=t._init;return e(t._payload)}function qh(t){function e(y,g){if(t){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function r(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=zt(y,g),y.index=0,y.sibling=null,y}function o(y,g,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=2,g):v):(y.flags|=2,g)):(y.flags|=1048576,g)}function s(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,v,S){return g===null||g.tag!==6?(g=Us(v,y.mode,S),g.return=y,g):(g=i(g,v),g.return=y,g)}function c(y,g,v,S){var T=v.type;return T===Un?f(y,g,v.props.children,S,v.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xt&&nc(T)===g.type)?(S=i(g,v.props),S.ref=Ir(y,g,v),S.return=y,S):(S=io(v.type,v.key,v.props,null,y.mode,S),S.ref=Ir(y,g,v),S.return=y,S)}function d(y,g,v,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Ls(v,y.mode,S),g.return=y,g):(g=i(g,v.children||[]),g.return=y,g)}function f(y,g,v,S,T){return g===null||g.tag!==7?(g=gn(v,y.mode,S,T),g.return=y,g):(g=i(g,v),g.return=y,g)}function h(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Us(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Si:return v=io(g.type,g.key,g.props,null,y.mode,v),v.ref=Ir(y,null,g),v.return=y,v;case Dn:return g=Ls(g,y.mode,v),g.return=y,g;case xt:var S=g._init;return h(y,S(g._payload),v)}if(Nr(g)||wr(g))return g=gn(g,y.mode,v,null),g.return=y,g;Di(y,g)}return null}function p(y,g,v,S){var T=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return T!==null?null:a(y,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Si:return v.key===T?c(y,g,v,S):null;case Dn:return v.key===T?d(y,g,v,S):null;case xt:return T=v._init,p(y,g,T(v._payload),S)}if(Nr(v)||wr(v))return T!==null?null:f(y,g,v,S,null);Di(y,v)}return null}function m(y,g,v,S,T){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(v)||null,a(g,y,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Si:return y=y.get(S.key===null?v:S.key)||null,c(g,y,S,T);case Dn:return y=y.get(S.key===null?v:S.key)||null,d(g,y,S,T);case xt:var C=S._init;return m(y,g,v,C(S._payload),T)}if(Nr(S)||wr(S))return y=y.get(v)||null,f(g,y,S,T,null);Di(g,S)}return null}function _(y,g,v,S){for(var T=null,C=null,A=g,P=g=0,k=null;A!==null&&P<v.length;P++){A.index>P?(k=A,A=null):k=A.sibling;var M=p(y,A,v[P],S);if(M===null){A===null&&(A=k);break}t&&A&&M.alternate===null&&e(y,A),g=o(M,g,P),C===null?T=M:C.sibling=M,C=M,A=k}if(P===v.length)return n(y,A),Q&&on(y,P),T;if(A===null){for(;P<v.length;P++)A=h(y,v[P],S),A!==null&&(g=o(A,g,P),C===null?T=A:C.sibling=A,C=A);return Q&&on(y,P),T}for(A=r(y,A);P<v.length;P++)k=m(A,y,P,v[P],S),k!==null&&(t&&k.alternate!==null&&A.delete(k.key===null?P:k.key),g=o(k,g,P),C===null?T=k:C.sibling=k,C=k);return t&&A.forEach(function(G){return e(y,G)}),Q&&on(y,P),T}function w(y,g,v,S){var T=wr(v);if(typeof T!="function")throw Error(R(150));if(v=T.call(v),v==null)throw Error(R(151));for(var C=T=null,A=g,P=g=0,k=null,M=v.next();A!==null&&!M.done;P++,M=v.next()){A.index>P?(k=A,A=null):k=A.sibling;var G=p(y,A,M.value,S);if(G===null){A===null&&(A=k);break}t&&A&&G.alternate===null&&e(y,A),g=o(G,g,P),C===null?T=G:C.sibling=G,C=G,A=k}if(M.done)return n(y,A),Q&&on(y,P),T;if(A===null){for(;!M.done;P++,M=v.next())M=h(y,M.value,S),M!==null&&(g=o(M,g,P),C===null?T=M:C.sibling=M,C=M);return Q&&on(y,P),T}for(A=r(y,A);!M.done;P++,M=v.next())M=m(A,y,P,M.value,S),M!==null&&(t&&M.alternate!==null&&A.delete(M.key===null?P:M.key),g=o(M,g,P),C===null?T=M:C.sibling=M,C=M);return t&&A.forEach(function(H){return e(y,H)}),Q&&on(y,P),T}function E(y,g,v,S){if(typeof v=="object"&&v!==null&&v.type===Un&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Si:e:{for(var T=v.key,C=g;C!==null;){if(C.key===T){if(T=v.type,T===Un){if(C.tag===7){n(y,C.sibling),g=i(C,v.props.children),g.return=y,y=g;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===xt&&nc(T)===C.type){n(y,C.sibling),g=i(C,v.props),g.ref=Ir(y,C,v),g.return=y,y=g;break e}n(y,C);break}else e(y,C);C=C.sibling}v.type===Un?(g=gn(v.props.children,y.mode,S,v.key),g.return=y,y=g):(S=io(v.type,v.key,v.props,null,y.mode,S),S.ref=Ir(y,g,v),S.return=y,y=S)}return s(y);case Dn:e:{for(C=v.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),g=i(g,v.children||[]),g.return=y,y=g;break e}else{n(y,g);break}else e(y,g);g=g.sibling}g=Ls(v,y.mode,S),g.return=y,y=g}return s(y);case xt:return C=v._init,E(y,g,C(v._payload),S)}if(Nr(v))return _(y,g,v,S);if(wr(v))return w(y,g,v,S);Di(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),g=i(g,v),g.return=y,y=g):(n(y,g),g=Us(v,y.mode,S),g.return=y,y=g),s(y)):n(y,g)}return E}var or=qh(!0),Hh=qh(!1),Eo=Yt(null),So=null,Gn=null,xa=null;function Ma(){xa=Gn=So=null}function Da(t){var e=Eo.current;Y(Eo),t._currentValue=e}function Tl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qn(t,e){So=t,xa=Gn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ne=!0),t.firstContext=null)}function Xe(t){var e=t._currentValue;if(xa!==t)if(t={context:t,memoizedValue:e,next:null},Gn===null){if(So===null)throw Error(R(308));Gn=t,So.dependencies={lanes:0,firstContext:t}}else Gn=Gn.next=t;return e}var fn=null;function Ua(t){fn===null?fn=[t]:fn.push(t)}function zh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ua(e)):(n.next=i.next,i.next=n),e.interleaved=n,Tt(t,r)}function Tt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Mt=!1;function La(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Tt(t,n)}return i=r.interleaved,i===null?(e.next=e,Ua(r)):(e.next=i.next,i.next=e),r.interleaved=e,Tt(t,n)}function Zi(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wa(t,n)}}function rc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function To(t,e,n,r){var i=t.updateQueue;Mt=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,d=c.next;c.next=null,s===null?o=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==s&&(a===null?f.firstBaseUpdate=d:a.next=d,f.lastBaseUpdate=c))}if(o!==null){var h=i.baseState;s=0,f=d=c=null,a=o;do{var p=a.lane,m=a.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,w=a;switch(p=e,m=n,w.tag){case 1:if(_=w.payload,typeof _=="function"){h=_.call(m,h,p);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=w.payload,p=typeof _=="function"?_.call(m,h,p):_,p==null)break e;h=ee({},h,p);break e;case 2:Mt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,s|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(f===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);wn|=s,t.lanes=s,t.memoizedState=h}}function ic(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(R(191,i));i.call(r)}}}var gi={},pt=Yt(gi),ri=Yt(gi),ii=Yt(gi);function hn(t){if(t===gi)throw Error(R(174));return t}function ba(t,e){switch(J(ii,e),J(ri,t),J(pt,gi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rl(e,t)}Y(pt),J(pt,e)}function sr(){Y(pt),Y(ri),Y(ii)}function Wh(t){hn(ii.current);var e=hn(pt.current),n=rl(e,t.type);e!==n&&(J(ri,t),J(pt,n))}function Fa(t){ri.current===t&&(Y(pt),Y(ri))}var Z=Yt(0);function Co(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ps=[];function Oa(){for(var t=0;t<Ps.length;t++)Ps[t]._workInProgressVersionPrimary=null;Ps.length=0}var ji=At.ReactCurrentDispatcher,ks=At.ReactCurrentBatchConfig,_n=0,j=null,le=null,ce=null,Io=!1,Vr=!1,oi=0,vv=0;function ve(){throw Error(R(321))}function Va(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!at(t[n],e[n]))return!1;return!0}function $a(t,e,n,r,i,o){if(_n=o,j=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ji.current=t===null||t.memoizedState===null?Sv:Tv,t=n(r,i),Vr){o=0;do{if(Vr=!1,oi=0,25<=o)throw Error(R(301));o+=1,ce=le=null,e.updateQueue=null,ji.current=Cv,t=n(r,i)}while(Vr)}if(ji.current=Ao,e=le!==null&&le.next!==null,_n=0,ce=le=j=null,Io=!1,e)throw Error(R(300));return t}function Ba(){var t=oi!==0;return oi=0,t}function dt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ce===null?j.memoizedState=ce=t:ce=ce.next=t,ce}function Ze(){if(le===null){var t=j.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=ce===null?j.memoizedState:ce.next;if(e!==null)ce=e,le=t;else{if(t===null)throw Error(R(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},ce===null?j.memoizedState=ce=t:ce=ce.next=t}return ce}function si(t,e){return typeof e=="function"?e(t):e}function Ns(t){var e=Ze(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=le,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,d=o;do{var f=d.lane;if((_n&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(a=c=h,s=r):c=c.next=h,j.lanes|=f,wn|=f}d=d.next}while(d!==null&&d!==o);c===null?s=r:c.next=a,at(r,e.memoizedState)||(Ne=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,j.lanes|=o,wn|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xs(t){var e=Ze(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);at(o,e.memoizedState)||(Ne=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Kh(){}function Yh(t,e){var n=j,r=Ze(),i=e(),o=!at(r.memoizedState,i);if(o&&(r.memoizedState=i,Ne=!0),r=r.queue,Ga(Zh.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||ce!==null&&ce.memoizedState.tag&1){if(n.flags|=2048,li(9,Xh.bind(null,n,r,i,e),void 0,null),de===null)throw Error(R(349));_n&30||Qh(n,e,i)}return i}function Qh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=j.updateQueue,e===null?(e={lastEffect:null,stores:null},j.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xh(t,e,n,r){e.value=n,e.getSnapshot=r,jh(e)&&ep(t)}function Zh(t,e,n){return n(function(){jh(e)&&ep(t)})}function jh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!at(t,n)}catch{return!0}}function ep(t){var e=Tt(t,1);e!==null&&lt(e,t,1,-1)}function oc(t){var e=dt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:si,lastRenderedState:t},e.queue=t,t=t.dispatch=Ev.bind(null,j,t),[e.memoizedState,t]}function li(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=j.updateQueue,e===null?(e={lastEffect:null,stores:null},j.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tp(){return Ze().memoizedState}function eo(t,e,n,r){var i=dt();j.flags|=t,i.memoizedState=li(1|e,n,void 0,r===void 0?null:r)}function Ko(t,e,n,r){var i=Ze();r=r===void 0?null:r;var o=void 0;if(le!==null){var s=le.memoizedState;if(o=s.destroy,r!==null&&Va(r,s.deps)){i.memoizedState=li(e,n,o,r);return}}j.flags|=t,i.memoizedState=li(1|e,n,o,r)}function sc(t,e){return eo(8390656,8,t,e)}function Ga(t,e){return Ko(2048,8,t,e)}function np(t,e){return Ko(4,2,t,e)}function rp(t,e){return Ko(4,4,t,e)}function ip(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function op(t,e,n){return n=n!=null?n.concat([t]):null,Ko(4,4,ip.bind(null,e,t),n)}function qa(){}function sp(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Va(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lp(t,e){var n=Ze();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Va(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ap(t,e,n){return _n&21?(at(n,e)||(n=hh(),j.lanes|=n,wn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ne=!0),t.memoizedState=n)}function _v(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var r=ks.transition;ks.transition={};try{t(!1),e()}finally{q=n,ks.transition=r}}function up(){return Ze().memoizedState}function wv(t,e,n){var r=Ht(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cp(t))dp(e,n);else if(n=zh(t,e,n,r),n!==null){var i=Ae();lt(n,t,r,i),fp(n,e,r)}}function Ev(t,e,n){var r=Ht(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cp(t))dp(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,at(a,s)){var c=e.interleaved;c===null?(i.next=i,Ua(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=zh(t,e,i,r),n!==null&&(i=Ae(),lt(n,t,r,i),fp(n,e,r))}}function cp(t){var e=t.alternate;return t===j||e!==null&&e===j}function dp(t,e){Vr=Io=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wa(t,n)}}var Ao={readContext:Xe,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},Sv={readContext:Xe,useCallback:function(t,e){return dt().memoizedState=[t,e===void 0?null:e],t},useContext:Xe,useEffect:sc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,eo(4194308,4,ip.bind(null,e,t),n)},useLayoutEffect:function(t,e){return eo(4194308,4,t,e)},useInsertionEffect:function(t,e){return eo(4,2,t,e)},useMemo:function(t,e){var n=dt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wv.bind(null,j,t),[r.memoizedState,t]},useRef:function(t){var e=dt();return t={current:t},e.memoizedState=t},useState:oc,useDebugValue:qa,useDeferredValue:function(t){return dt().memoizedState=t},useTransition:function(){var t=oc(!1),e=t[0];return t=_v.bind(null,t[1]),dt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=j,i=dt();if(Q){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),de===null)throw Error(R(349));_n&30||Qh(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,sc(Zh.bind(null,r,o,t),[t]),r.flags|=2048,li(9,Xh.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=dt(),e=de.identifierPrefix;if(Q){var n=_t,r=vt;n=(r&~(1<<32-st(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oi++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vv++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Tv={readContext:Xe,useCallback:sp,useContext:Xe,useEffect:Ga,useImperativeHandle:op,useInsertionEffect:np,useLayoutEffect:rp,useMemo:lp,useReducer:Ns,useRef:tp,useState:function(){return Ns(si)},useDebugValue:qa,useDeferredValue:function(t){var e=Ze();return ap(e,le.memoizedState,t)},useTransition:function(){var t=Ns(si)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Kh,useSyncExternalStore:Yh,useId:up,unstable_isNewReconciler:!1},Cv={readContext:Xe,useCallback:sp,useContext:Xe,useEffect:Ga,useImperativeHandle:op,useInsertionEffect:np,useLayoutEffect:rp,useMemo:lp,useReducer:xs,useRef:tp,useState:function(){return xs(si)},useDebugValue:qa,useDeferredValue:function(t){var e=Ze();return le===null?e.memoizedState=t:ap(e,le.memoizedState,t)},useTransition:function(){var t=xs(si)[0],e=Ze().memoizedState;return[t,e]},useMutableSource:Kh,useSyncExternalStore:Yh,useId:up,unstable_isNewReconciler:!1};function tt(t,e){if(t&&t.defaultProps){e=ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yo={isMounted:function(t){return(t=t._reactInternals)?Tn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ae(),i=Ht(t),o=wt(r,i);o.payload=e,n!=null&&(o.callback=n),e=Gt(t,o,i),e!==null&&(lt(e,t,i,r),Zi(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ae(),i=Ht(t),o=wt(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Gt(t,o,i),e!==null&&(lt(e,t,i,r),Zi(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ae(),r=Ht(t),i=wt(n,r);i.tag=2,e!=null&&(i.callback=e),e=Gt(t,i,r),e!==null&&(lt(e,t,r,n),Zi(e,t,r))}};function lc(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!jr(n,r)||!jr(i,o):!0}function hp(t,e,n){var r=!1,i=Wt,o=e.contextType;return typeof o=="object"&&o!==null?o=Xe(o):(i=Me(e)?yn:Se.current,r=e.contextTypes,o=(r=r!=null)?rr(t,i):Wt),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function ac(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yo.enqueueReplaceState(e,e.state,null)}function Il(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},La(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Xe(o):(o=Me(e)?yn:Se.current,i.context=rr(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Cl(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Yo.enqueueReplaceState(i,i.state,null),To(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function lr(t,e){try{var n="",r=e;do n+=Zg(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Ms(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Al(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Iv=typeof WeakMap=="function"?WeakMap:Map;function pp(t,e,n){n=wt(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Po||(Po=!0,bl=r),Al(t,e)},n}function mp(t,e,n){n=wt(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Al(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Al(t,e),typeof r!="function"&&(qt===null?qt=new Set([this]):qt.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function uc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Iv;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Vv.bind(null,t,e,n),e.then(t,t))}function cc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dc(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wt(-1,1),e.tag=2,Gt(n,e,1))),n.lanes|=1),t)}var Av=At.ReactCurrentOwner,Ne=!1;function Te(t,e,n,r){e.child=t===null?Hh(e,null,n,r):or(e,t.child,n,r)}function fc(t,e,n,r,i){n=n.render;var o=e.ref;return Qn(e,i),r=$a(t,e,n,r,o,i),n=Ba(),t!==null&&!Ne?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(Q&&n&&Pa(e),e.flags|=1,Te(t,e,r,i),e.child)}function hc(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Xa(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,gp(t,e,o,r,i)):(t=io(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:jr,n(s,r)&&t.ref===e.ref)return Ct(t,e,i)}return e.flags|=1,t=zt(o,r),t.ref=e.ref,t.return=e,e.child=t}function gp(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(jr(o,r)&&t.ref===e.ref)if(Ne=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ne=!0);else return e.lanes=t.lanes,Ct(t,e,i)}return Rl(t,e,n,r,i)}function yp(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Hn,Fe),Fe|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(Hn,Fe),Fe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,J(Hn,Fe),Fe|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,J(Hn,Fe),Fe|=r;return Te(t,e,i,n),e.child}function vp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rl(t,e,n,r,i){var o=Me(n)?yn:Se.current;return o=rr(e,o),Qn(e,i),n=$a(t,e,n,r,o,i),r=Ba(),t!==null&&!Ne?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ct(t,e,i)):(Q&&r&&Pa(e),e.flags|=1,Te(t,e,n,i),e.child)}function pc(t,e,n,r,i){if(Me(n)){var o=!0;vo(e)}else o=!1;if(Qn(e,i),e.stateNode===null)to(t,e),hp(e,n,r),Il(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Xe(d):(d=Me(n)?yn:Se.current,d=rr(e,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==d)&&ac(e,s,r,d),Mt=!1;var p=e.memoizedState;s.state=p,To(e,r,s,i),c=e.memoizedState,a!==r||p!==c||xe.current||Mt?(typeof f=="function"&&(Cl(e,n,f,r),c=e.memoizedState),(a=Mt||lc(e,n,a,r,p,c,d))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=d,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Jh(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:tt(e.type,a),s.props=d,h=e.pendingProps,p=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Xe(c):(c=Me(n)?yn:Se.current,c=rr(e,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||p!==c)&&ac(e,s,r,c),Mt=!1,p=e.memoizedState,s.state=p,To(e,r,s,i);var _=e.memoizedState;a!==h||p!==_||xe.current||Mt?(typeof m=="function"&&(Cl(e,n,m,r),_=e.memoizedState),(d=Mt||lc(e,n,d,r,p,_,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),s.props=r,s.state=_,s.context=c,r=d):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pl(t,e,n,r,o,i)}function Pl(t,e,n,r,i,o){vp(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ju(e,n,!1),Ct(t,e,o);r=e.stateNode,Av.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=or(e,t.child,null,o),e.child=or(e,null,a,o)):Te(t,e,a,o),e.memoizedState=r.state,i&&ju(e,n,!0),e.child}function _p(t){var e=t.stateNode;e.pendingContext?Zu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Zu(t,e.context,!1),ba(t,e.containerInfo)}function mc(t,e,n,r,i){return ir(),Na(i),e.flags|=256,Te(t,e,n,r),e.child}var kl={dehydrated:null,treeContext:null,retryLane:0};function Nl(t){return{baseLanes:t,cachePool:null,transitions:null}}function wp(t,e,n){var r=e.pendingProps,i=Z.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),J(Z,i&1),t===null)return Sl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Zo(s,r,0,null),t=gn(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Nl(n),e.memoizedState=kl,t):Ha(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Rv(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=zt(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=zt(a,o):(o=gn(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Nl(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=kl,r}return o=t.child,t=o.sibling,r=zt(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ha(t,e){return e=Zo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ui(t,e,n,r){return r!==null&&Na(r),or(e,t.child,null,n),t=Ha(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rv(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Ms(Error(R(422))),Ui(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Zo({mode:"visible",children:r.children},i,0,null),o=gn(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&or(e,t.child,null,s),e.child.memoizedState=Nl(s),e.memoizedState=kl,o);if(!(e.mode&1))return Ui(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(R(419)),r=Ms(o,r,void 0),Ui(t,e,s,r)}if(a=(s&t.childLanes)!==0,Ne||a){if(r=de,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Tt(t,i),lt(r,t,i,-1))}return Qa(),r=Ms(Error(R(421))),Ui(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$v.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,$e=Bt(i.nextSibling),Be=e,Q=!0,ot=null,t!==null&&(Je[We++]=vt,Je[We++]=_t,Je[We++]=vn,vt=t.id,_t=t.overflow,vn=e),e=Ha(e,r.children),e.flags|=4096,e)}function gc(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Tl(t.return,e,n)}function Ds(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ep(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Te(t,e,r.children,n),r=Z.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gc(t,n,e);else if(t.tag===19)gc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(J(Z,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Co(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ds(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Co(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ds(e,!0,n,null,o);break;case"together":Ds(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function to(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ct(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),wn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,n=zt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Pv(t,e,n){switch(e.tag){case 3:_p(e),ir();break;case 5:Wh(e);break;case 1:Me(e.type)&&vo(e);break;case 4:ba(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;J(Eo,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(J(Z,Z.current&1),e.flags|=128,null):n&e.child.childLanes?wp(t,e,n):(J(Z,Z.current&1),t=Ct(t,e,n),t!==null?t.sibling:null);J(Z,Z.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ep(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(Z,Z.current),r)break;return null;case 22:case 23:return e.lanes=0,yp(t,e,n)}return Ct(t,e,n)}var Sp,xl,Tp,Cp;Sp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xl=function(){};Tp=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,hn(pt.current);var o=null;switch(n){case"input":i=js(t,i),r=js(t,r),o=[];break;case"select":i=ee({},i,{value:void 0}),r=ee({},r,{value:void 0}),o=[];break;case"textarea":i=nl(t,i),r=nl(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=go)}il(n,r);var s;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var a=i[d];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jr.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(a=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==a&&(c!=null||a!=null))if(d==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&W("scroll",t),o||a===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Cp=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ar(t,e){if(!Q)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _e(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kv(t,e,n){var r=e.pendingProps;switch(ka(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(e),null;case 1:return Me(e.type)&&yo(),_e(e),null;case 3:return r=e.stateNode,sr(),Y(xe),Y(Se),Oa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Mi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ot!==null&&(Vl(ot),ot=null))),xl(t,e),_e(e),null;case 5:Fa(e);var i=hn(ii.current);if(n=e.type,t!==null&&e.stateNode!=null)Tp(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(R(166));return _e(e),null}if(t=hn(pt.current),Mi(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ft]=e,r[ni]=o,t=(e.mode&1)!==0,n){case"dialog":W("cancel",r),W("close",r);break;case"iframe":case"object":case"embed":W("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)W(Mr[i],r);break;case"source":W("error",r);break;case"img":case"image":case"link":W("error",r),W("load",r);break;case"details":W("toggle",r);break;case"input":Iu(r,o),W("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},W("invalid",r);break;case"textarea":Ru(r,o),W("invalid",r)}il(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&xi(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&xi(r.textContent,a,t),i=["children",""+a]):Jr.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&W("scroll",r)}switch(n){case"input":Ti(r),Au(r,o,!0);break;case"textarea":Ti(r),Pu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=go)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ft]=e,t[ni]=r,Sp(t,e,!1,!1),e.stateNode=t;e:{switch(s=ol(n,r),n){case"dialog":W("cancel",t),W("close",t),i=r;break;case"iframe":case"object":case"embed":W("load",t),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)W(Mr[i],t);i=r;break;case"source":W("error",t),i=r;break;case"img":case"image":case"link":W("error",t),W("load",t),i=r;break;case"details":W("toggle",t),i=r;break;case"input":Iu(t,r),i=js(t,r),W("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ee({},r,{value:void 0}),W("invalid",t);break;case"textarea":Ru(t,r),i=nl(t,r),W("invalid",t);break;default:i=r}il(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?th(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jf(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wr(t,c):typeof c=="number"&&Wr(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jr.hasOwnProperty(o)?c!=null&&o==="onScroll"&&W("scroll",t):c!=null&&pa(t,o,c,s))}switch(n){case"input":Ti(t),Au(t,r,!1);break;case"textarea":Ti(t),Pu(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Jt(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Jn(t,!!r.multiple,o,!1):r.defaultValue!=null&&Jn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=go)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _e(e),null;case 6:if(t&&e.stateNode!=null)Cp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(R(166));if(n=hn(ii.current),hn(pt.current),Mi(e)){if(r=e.stateNode,n=e.memoizedProps,r[ft]=e,(o=r.nodeValue!==n)&&(t=Be,t!==null))switch(t.tag){case 3:xi(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xi(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ft]=e,e.stateNode=r}return _e(e),null;case 13:if(Y(Z),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Q&&$e!==null&&e.mode&1&&!(e.flags&128))Gh(),ir(),e.flags|=98560,o=!1;else if(o=Mi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(R(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(R(317));o[ft]=e}else ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_e(e),o=!1}else ot!==null&&(Vl(ot),ot=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?ae===0&&(ae=3):Qa())),e.updateQueue!==null&&(e.flags|=4),_e(e),null);case 4:return sr(),xl(t,e),t===null&&ei(e.stateNode.containerInfo),_e(e),null;case 10:return Da(e.type._context),_e(e),null;case 17:return Me(e.type)&&yo(),_e(e),null;case 19:if(Y(Z),o=e.memoizedState,o===null)return _e(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ar(o,!1);else{if(ae!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Co(t),s!==null){for(e.flags|=128,Ar(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(Z,Z.current&1|2),e.child}t=t.sibling}o.tail!==null&&re()>ar&&(e.flags|=128,r=!0,Ar(o,!1),e.lanes=4194304)}else{if(!r)if(t=Co(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ar(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Q)return _e(e),null}else 2*re()-o.renderingStartTime>ar&&n!==1073741824&&(e.flags|=128,r=!0,Ar(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=re(),e.sibling=null,n=Z.current,J(Z,r?n&1|2:n&1),e):(_e(e),null);case 22:case 23:return Ya(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Fe&1073741824&&(_e(e),e.subtreeFlags&6&&(e.flags|=8192)):_e(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Nv(t,e){switch(ka(e),e.tag){case 1:return Me(e.type)&&yo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return sr(),Y(xe),Y(Se),Oa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Fa(e),null;case 13:if(Y(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(Z),null;case 4:return sr(),null;case 10:return Da(e.type._context),null;case 22:case 23:return Ya(),null;case 24:return null;default:return null}}var Li=!1,we=!1,xv=typeof WeakSet=="function"?WeakSet:Set,x=null;function qn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){te(t,e,r)}else n.current=null}function Ml(t,e,n){try{n()}catch(r){te(t,e,r)}}var yc=!1;function Mv(t,e){if(ml=ho,t=kh(),Ra(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,d=0,f=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(c=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++d===i&&(a=s),p===o&&++f===r&&(c=s),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gl={focusedElem:t,selectionRange:n},ho=!1,x=e;x!==null;)if(e=x,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,x=t;else for(;x!==null;){e=x;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var w=_.memoizedProps,E=_.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?w:tt(e.type,w),E);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(S){te(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,x=t;break}x=e.return}return _=yc,yc=!1,_}function $r(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Ml(e,n,o)}i=i.next}while(i!==r)}}function Qo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Dl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ip(t){var e=t.alternate;e!==null&&(t.alternate=null,Ip(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ft],delete e[ni],delete e[_l],delete e[pv],delete e[mv])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ap(t){return t.tag===5||t.tag===3||t.tag===4}function vc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ap(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ul(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=go));else if(r!==4&&(t=t.child,t!==null))for(Ul(t,e,n),t=t.sibling;t!==null;)Ul(t,e,n),t=t.sibling}function Ll(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ll(t,e,n),t=t.sibling;t!==null;)Ll(t,e,n),t=t.sibling}var he=null,rt=!1;function kt(t,e,n){for(n=n.child;n!==null;)Rp(t,e,n),n=n.sibling}function Rp(t,e,n){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Go,n)}catch{}switch(n.tag){case 5:we||qn(n,e);case 6:var r=he,i=rt;he=null,kt(t,e,n),he=r,rt=i,he!==null&&(rt?(t=he,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):he.removeChild(n.stateNode));break;case 18:he!==null&&(rt?(t=he,n=n.stateNode,t.nodeType===8?As(t.parentNode,n):t.nodeType===1&&As(t,n),Xr(t)):As(he,n.stateNode));break;case 4:r=he,i=rt,he=n.stateNode.containerInfo,rt=!0,kt(t,e,n),he=r,rt=i;break;case 0:case 11:case 14:case 15:if(!we&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Ml(n,e,s),i=i.next}while(i!==r)}kt(t,e,n);break;case 1:if(!we&&(qn(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){te(n,e,a)}kt(t,e,n);break;case 21:kt(t,e,n);break;case 22:n.mode&1?(we=(r=we)||n.memoizedState!==null,kt(t,e,n),we=r):kt(t,e,n);break;default:kt(t,e,n)}}function _c(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new xv),e.forEach(function(r){var i=Bv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function je(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:he=a.stateNode,rt=!1;break e;case 3:he=a.stateNode.containerInfo,rt=!0;break e;case 4:he=a.stateNode.containerInfo,rt=!0;break e}a=a.return}if(he===null)throw Error(R(160));Rp(o,s,i),he=null,rt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){te(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pp(e,t),e=e.sibling}function Pp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(je(e,t),ct(t),r&4){try{$r(3,t,t.return),Qo(3,t)}catch(w){te(t,t.return,w)}try{$r(5,t,t.return)}catch(w){te(t,t.return,w)}}break;case 1:je(e,t),ct(t),r&512&&n!==null&&qn(n,n.return);break;case 5:if(je(e,t),ct(t),r&512&&n!==null&&qn(n,n.return),t.flags&32){var i=t.stateNode;try{Wr(i,"")}catch(w){te(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Qf(i,o),ol(a,s);var d=ol(a,o);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];f==="style"?th(i,h):f==="dangerouslySetInnerHTML"?jf(i,h):f==="children"?Wr(i,h):pa(i,f,h,d)}switch(a){case"input":el(i,o);break;case"textarea":Xf(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?Jn(i,!!o.multiple,m,!1):p!==!!o.multiple&&(o.defaultValue!=null?Jn(i,!!o.multiple,o.defaultValue,!0):Jn(i,!!o.multiple,o.multiple?[]:"",!1))}i[ni]=o}catch(w){te(t,t.return,w)}}break;case 6:if(je(e,t),ct(t),r&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(w){te(t,t.return,w)}}break;case 3:if(je(e,t),ct(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xr(e.containerInfo)}catch(w){te(t,t.return,w)}break;case 4:je(e,t),ct(t);break;case 13:je(e,t),ct(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Wa=re())),r&4&&_c(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(we=(d=we)||f,je(e,t),we=d):je(e,t),ct(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(x=t,f=t.child;f!==null;){for(h=x=f;x!==null;){switch(p=x,m=p.child,p.tag){case 0:case 11:case 14:case 15:$r(4,p,p.return);break;case 1:qn(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(w){te(r,n,w)}}break;case 5:qn(p,p.return);break;case 22:if(p.memoizedState!==null){Ec(h);continue}}m!==null?(m.return=p,x=m):Ec(h)}f=f.sibling}e:for(f=null,h=t;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,c=h.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=eh("display",s))}catch(w){te(t,t.return,w)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(w){te(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:je(e,t),ct(t),r&4&&_c(t);break;case 21:break;default:je(e,t),ct(t)}}function ct(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ap(n)){var r=n;break e}n=n.return}throw Error(R(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wr(i,""),r.flags&=-33);var o=vc(t);Ll(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=vc(t);Ul(t,a,s);break;default:throw Error(R(161))}}catch(c){te(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Dv(t,e,n){x=t,kp(t)}function kp(t,e,n){for(var r=(t.mode&1)!==0;x!==null;){var i=x,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Li;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||we;a=Li;var d=we;if(Li=s,(we=c)&&!d)for(x=i;x!==null;)s=x,c=s.child,s.tag===22&&s.memoizedState!==null?Sc(i):c!==null?(c.return=s,x=c):Sc(i);for(;o!==null;)x=o,kp(o),o=o.sibling;x=i,Li=a,we=d}wc(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,x=o):wc(t)}}function wc(t){for(;x!==null;){var e=x;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:we||Qo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!we)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ic(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ic(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&Xr(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}we||e.flags&512&&Dl(e)}catch(p){te(e,e.return,p)}}if(e===t){x=null;break}if(n=e.sibling,n!==null){n.return=e.return,x=n;break}x=e.return}}function Ec(t){for(;x!==null;){var e=x;if(e===t){x=null;break}var n=e.sibling;if(n!==null){n.return=e.return,x=n;break}x=e.return}}function Sc(t){for(;x!==null;){var e=x;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qo(4,e)}catch(c){te(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){te(e,i,c)}}var o=e.return;try{Dl(e)}catch(c){te(e,o,c)}break;case 5:var s=e.return;try{Dl(e)}catch(c){te(e,s,c)}}}catch(c){te(e,e.return,c)}if(e===t){x=null;break}var a=e.sibling;if(a!==null){a.return=e.return,x=a;break}x=e.return}}var Uv=Math.ceil,Ro=At.ReactCurrentDispatcher,za=At.ReactCurrentOwner,Ye=At.ReactCurrentBatchConfig,$=0,de=null,oe=null,me=0,Fe=0,Hn=Yt(0),ae=0,ai=null,wn=0,Xo=0,Ja=0,Br=null,ke=null,Wa=0,ar=1/0,mt=null,Po=!1,bl=null,qt=null,bi=!1,Ft=null,ko=0,Gr=0,Fl=null,no=-1,ro=0;function Ae(){return $&6?re():no!==-1?no:no=re()}function Ht(t){return t.mode&1?$&2&&me!==0?me&-me:yv.transition!==null?(ro===0&&(ro=hh()),ro):(t=q,t!==0||(t=window.event,t=t===void 0?16:wh(t.type)),t):1}function lt(t,e,n,r){if(50<Gr)throw Gr=0,Fl=null,Error(R(185));hi(t,n,r),(!($&2)||t!==de)&&(t===de&&(!($&2)&&(Xo|=n),ae===4&&Ut(t,me)),De(t,r),n===1&&$===0&&!(e.mode&1)&&(ar=re()+500,Wo&&Qt()))}function De(t,e){var n=t.callbackNode;yy(t,e);var r=fo(t,t===de?me:0);if(r===0)n!==null&&xu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xu(n),e===1)t.tag===0?gv(Tc.bind(null,t)):Vh(Tc.bind(null,t)),fv(function(){!($&6)&&Qt()}),n=null;else{switch(ph(r)){case 1:n=_a;break;case 4:n=dh;break;case 16:n=co;break;case 536870912:n=fh;break;default:n=co}n=Fp(n,Np.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Np(t,e){if(no=-1,ro=0,$&6)throw Error(R(327));var n=t.callbackNode;if(Xn()&&t.callbackNode!==n)return null;var r=fo(t,t===de?me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=No(t,r);else{e=r;var i=$;$|=2;var o=Mp();(de!==t||me!==e)&&(mt=null,ar=re()+500,mn(t,e));do try{Fv();break}catch(a){xp(t,a)}while(!0);Ma(),Ro.current=o,$=i,oe!==null?e=0:(de=null,me=0,e=ae)}if(e!==0){if(e===2&&(i=cl(t),i!==0&&(r=i,e=Ol(t,i))),e===1)throw n=ai,mn(t,0),Ut(t,r),De(t,re()),n;if(e===6)Ut(t,r);else{if(i=t.current.alternate,!(r&30)&&!Lv(i)&&(e=No(t,r),e===2&&(o=cl(t),o!==0&&(r=o,e=Ol(t,o))),e===1))throw n=ai,mn(t,0),Ut(t,r),De(t,re()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(R(345));case 2:sn(t,ke,mt);break;case 3:if(Ut(t,r),(r&130023424)===r&&(e=Wa+500-re(),10<e)){if(fo(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ae(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vl(sn.bind(null,t,ke,mt),e);break}sn(t,ke,mt);break;case 4:if(Ut(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-st(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Uv(r/1960))-r,10<r){t.timeoutHandle=vl(sn.bind(null,t,ke,mt),r);break}sn(t,ke,mt);break;case 5:sn(t,ke,mt);break;default:throw Error(R(329))}}}return De(t,re()),t.callbackNode===n?Np.bind(null,t):null}function Ol(t,e){var n=Br;return t.current.memoizedState.isDehydrated&&(mn(t,e).flags|=256),t=No(t,e),t!==2&&(e=ke,ke=n,e!==null&&Vl(e)),t}function Vl(t){ke===null?ke=t:ke.push.apply(ke,t)}function Lv(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!at(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ut(t,e){for(e&=~Ja,e&=~Xo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-st(e),r=1<<n;t[n]=-1,e&=~r}}function Tc(t){if($&6)throw Error(R(327));Xn();var e=fo(t,0);if(!(e&1))return De(t,re()),null;var n=No(t,e);if(t.tag!==0&&n===2){var r=cl(t);r!==0&&(e=r,n=Ol(t,r))}if(n===1)throw n=ai,mn(t,0),Ut(t,e),De(t,re()),n;if(n===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sn(t,ke,mt),De(t,re()),null}function Ka(t,e){var n=$;$|=1;try{return t(e)}finally{$=n,$===0&&(ar=re()+500,Wo&&Qt())}}function En(t){Ft!==null&&Ft.tag===0&&!($&6)&&Xn();var e=$;$|=1;var n=Ye.transition,r=q;try{if(Ye.transition=null,q=1,t)return t()}finally{q=r,Ye.transition=n,$=e,!($&6)&&Qt()}}function Ya(){Fe=Hn.current,Y(Hn)}function mn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dv(n)),oe!==null)for(n=oe.return;n!==null;){var r=n;switch(ka(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yo();break;case 3:sr(),Y(xe),Y(Se),Oa();break;case 5:Fa(r);break;case 4:sr();break;case 13:Y(Z);break;case 19:Y(Z);break;case 10:Da(r.type._context);break;case 22:case 23:Ya()}n=n.return}if(de=t,oe=t=zt(t.current,null),me=Fe=e,ae=0,ai=null,Ja=Xo=wn=0,ke=Br=null,fn!==null){for(e=0;e<fn.length;e++)if(n=fn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}fn=null}return t}function xp(t,e){do{var n=oe;try{if(Ma(),ji.current=Ao,Io){for(var r=j.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Io=!1}if(_n=0,ce=le=j=null,Vr=!1,oi=0,za.current=null,n===null||n.return===null){ae=1,ai=e,oe=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=me,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=cc(s);if(m!==null){m.flags&=-257,dc(m,s,a,o,e),m.mode&1&&uc(o,d,e),e=m,c=d;var _=e.updateQueue;if(_===null){var w=new Set;w.add(c),e.updateQueue=w}else _.add(c);break e}else{if(!(e&1)){uc(o,d,e),Qa();break e}c=Error(R(426))}}else if(Q&&a.mode&1){var E=cc(s);if(E!==null){!(E.flags&65536)&&(E.flags|=256),dc(E,s,a,o,e),Na(lr(c,a));break e}}o=c=lr(c,a),ae!==4&&(ae=2),Br===null?Br=[o]:Br.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=pp(o,c,e);rc(o,y);break e;case 1:a=c;var g=o.type,v=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(qt===null||!qt.has(v)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=mp(o,a,e);rc(o,S);break e}}o=o.return}while(o!==null)}Up(n)}catch(T){e=T,oe===n&&n!==null&&(oe=n=n.return);continue}break}while(!0)}function Mp(){var t=Ro.current;return Ro.current=Ao,t===null?Ao:t}function Qa(){(ae===0||ae===3||ae===2)&&(ae=4),de===null||!(wn&268435455)&&!(Xo&268435455)||Ut(de,me)}function No(t,e){var n=$;$|=2;var r=Mp();(de!==t||me!==e)&&(mt=null,mn(t,e));do try{bv();break}catch(i){xp(t,i)}while(!0);if(Ma(),$=n,Ro.current=r,oe!==null)throw Error(R(261));return de=null,me=0,ae}function bv(){for(;oe!==null;)Dp(oe)}function Fv(){for(;oe!==null&&!ay();)Dp(oe)}function Dp(t){var e=bp(t.alternate,t,Fe);t.memoizedProps=t.pendingProps,e===null?Up(t):oe=e,za.current=null}function Up(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nv(n,e),n!==null){n.flags&=32767,oe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ae=6,oe=null;return}}else if(n=kv(n,e,Fe),n!==null){oe=n;return}if(e=e.sibling,e!==null){oe=e;return}oe=e=t}while(e!==null);ae===0&&(ae=5)}function sn(t,e,n){var r=q,i=Ye.transition;try{Ye.transition=null,q=1,Ov(t,e,n,r)}finally{Ye.transition=i,q=r}return null}function Ov(t,e,n,r){do Xn();while(Ft!==null);if($&6)throw Error(R(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(vy(t,o),t===de&&(oe=de=null,me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bi||(bi=!0,Fp(co,function(){return Xn(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ye.transition,Ye.transition=null;var s=q;q=1;var a=$;$|=4,za.current=null,Mv(t,n),Pp(n,t),iv(gl),ho=!!ml,gl=ml=null,t.current=n,Dv(n),uy(),$=a,q=s,Ye.transition=o}else t.current=n;if(bi&&(bi=!1,Ft=t,ko=i),o=t.pendingLanes,o===0&&(qt=null),fy(n.stateNode),De(t,re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Po)throw Po=!1,t=bl,bl=null,t;return ko&1&&t.tag!==0&&Xn(),o=t.pendingLanes,o&1?t===Fl?Gr++:(Gr=0,Fl=t):Gr=0,Qt(),null}function Xn(){if(Ft!==null){var t=ph(ko),e=Ye.transition,n=q;try{if(Ye.transition=null,q=16>t?16:t,Ft===null)var r=!1;else{if(t=Ft,Ft=null,ko=0,$&6)throw Error(R(331));var i=$;for($|=4,x=t.current;x!==null;){var o=x,s=o.child;if(x.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var d=a[c];for(x=d;x!==null;){var f=x;switch(f.tag){case 0:case 11:case 15:$r(8,f,o)}var h=f.child;if(h!==null)h.return=f,x=h;else for(;x!==null;){f=x;var p=f.sibling,m=f.return;if(Ip(f),f===d){x=null;break}if(p!==null){p.return=m,x=p;break}x=m}}}var _=o.alternate;if(_!==null){var w=_.child;if(w!==null){_.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}x=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,x=s;else e:for(;x!==null;){if(o=x,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$r(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,x=y;break e}x=o.return}}var g=t.current;for(x=g;x!==null;){s=x;var v=s.child;if(s.subtreeFlags&2064&&v!==null)v.return=s,x=v;else e:for(s=g;x!==null;){if(a=x,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qo(9,a)}}catch(T){te(a,a.return,T)}if(a===s){x=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,x=S;break e}x=a.return}}if($=i,Qt(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Go,t)}catch{}r=!0}return r}finally{q=n,Ye.transition=e}}return!1}function Cc(t,e,n){e=lr(n,e),e=pp(t,e,1),t=Gt(t,e,1),e=Ae(),t!==null&&(hi(t,1,e),De(t,e))}function te(t,e,n){if(t.tag===3)Cc(t,t,n);else for(;e!==null;){if(e.tag===3){Cc(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qt===null||!qt.has(r))){t=lr(n,t),t=mp(e,t,1),e=Gt(e,t,1),t=Ae(),e!==null&&(hi(e,1,t),De(e,t));break}}e=e.return}}function Vv(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ae(),t.pingedLanes|=t.suspendedLanes&n,de===t&&(me&n)===n&&(ae===4||ae===3&&(me&130023424)===me&&500>re()-Wa?mn(t,0):Ja|=n),De(t,e)}function Lp(t,e){e===0&&(t.mode&1?(e=Ai,Ai<<=1,!(Ai&130023424)&&(Ai=4194304)):e=1);var n=Ae();t=Tt(t,e),t!==null&&(hi(t,e,n),De(t,n))}function $v(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Lp(t,n)}function Bv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(R(314))}r!==null&&r.delete(e),Lp(t,n)}var bp;bp=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xe.current)Ne=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ne=!1,Pv(t,e,n);Ne=!!(t.flags&131072)}else Ne=!1,Q&&e.flags&1048576&&$h(e,wo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;to(t,e),t=e.pendingProps;var i=rr(e,Se.current);Qn(e,n),i=$a(null,e,r,t,i,n);var o=Ba();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Me(r)?(o=!0,vo(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,La(e),i.updater=Yo,e.stateNode=i,i._reactInternals=e,Il(e,r,t,n),e=Pl(null,e,r,!0,o,n)):(e.tag=0,Q&&o&&Pa(e),Te(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(to(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qv(r),t=tt(r,t),i){case 0:e=Rl(null,e,r,t,n);break e;case 1:e=pc(null,e,r,t,n);break e;case 11:e=fc(null,e,r,t,n);break e;case 14:e=hc(null,e,r,tt(r.type,t),n);break e}throw Error(R(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),Rl(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),pc(t,e,r,i,n);case 3:e:{if(_p(e),t===null)throw Error(R(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Jh(t,e),To(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=lr(Error(R(423)),e),e=mc(t,e,r,n,i);break e}else if(r!==i){i=lr(Error(R(424)),e),e=mc(t,e,r,n,i);break e}else for($e=Bt(e.stateNode.containerInfo.firstChild),Be=e,Q=!0,ot=null,n=Hh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),r===i){e=Ct(t,e,n);break e}Te(t,e,r,n)}e=e.child}return e;case 5:return Wh(e),t===null&&Sl(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,yl(r,i)?s=null:o!==null&&yl(r,o)&&(e.flags|=32),vp(t,e),Te(t,e,s,n),e.child;case 6:return t===null&&Sl(e),null;case 13:return wp(t,e,n);case 4:return ba(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=or(e,null,r,n):Te(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),fc(t,e,r,i,n);case 7:return Te(t,e,e.pendingProps,n),e.child;case 8:return Te(t,e,e.pendingProps.children,n),e.child;case 12:return Te(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,J(Eo,r._currentValue),r._currentValue=s,o!==null)if(at(o.value,s)){if(o.children===i.children&&!xe.current){e=Ct(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=wt(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Tl(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(R(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Tl(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Te(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Qn(e,n),i=Xe(i),r=r(i),e.flags|=1,Te(t,e,r,n),e.child;case 14:return r=e.type,i=tt(r,e.pendingProps),i=tt(r.type,i),hc(t,e,r,i,n);case 15:return gp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tt(r,i),to(t,e),e.tag=1,Me(r)?(t=!0,vo(e)):t=!1,Qn(e,n),hp(e,r,i),Il(e,r,i,n),Pl(null,e,r,!0,t,n);case 19:return Ep(t,e,n);case 22:return yp(t,e,n)}throw Error(R(156,e.tag))};function Fp(t,e){return ch(t,e)}function Gv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ke(t,e,n,r){return new Gv(t,e,n,r)}function Xa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qv(t){if(typeof t=="function")return Xa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ga)return 11;if(t===ya)return 14}return 2}function zt(t,e){var n=t.alternate;return n===null?(n=Ke(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function io(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Xa(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Un:return gn(n.children,i,o,e);case ma:s=8,i|=8;break;case Ys:return t=Ke(12,n,e,i|2),t.elementType=Ys,t.lanes=o,t;case Qs:return t=Ke(13,n,e,i),t.elementType=Qs,t.lanes=o,t;case Xs:return t=Ke(19,n,e,i),t.elementType=Xs,t.lanes=o,t;case Wf:return Zo(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zf:s=10;break e;case Jf:s=9;break e;case ga:s=11;break e;case ya:s=14;break e;case xt:s=16,r=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=Ke(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function gn(t,e,n,r){return t=Ke(7,t,r,e),t.lanes=n,t}function Zo(t,e,n,r){return t=Ke(22,t,r,e),t.elementType=Wf,t.lanes=n,t.stateNode={isHidden:!1},t}function Us(t,e,n){return t=Ke(6,t,null,e),t.lanes=n,t}function Ls(t,e,n){return e=Ke(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ms(0),this.expirationTimes=ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ms(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Za(t,e,n,r,i,o,s,a,c){return t=new Hv(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ke(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},La(o),t}function zv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Op(t){if(!t)return Wt;t=t._reactInternals;e:{if(Tn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Me(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var n=t.type;if(Me(n))return Oh(t,n,e)}return e}function Vp(t,e,n,r,i,o,s,a,c){return t=Za(n,r,!0,t,i,o,s,a,c),t.context=Op(null),n=t.current,r=Ae(),i=Ht(n),o=wt(r,i),o.callback=e??null,Gt(n,o,i),t.current.lanes=i,hi(t,i,r),De(t,r),t}function jo(t,e,n,r){var i=e.current,o=Ae(),s=Ht(i);return n=Op(n),e.context===null?e.context=n:e.pendingContext=n,e=wt(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Gt(i,e,s),t!==null&&(lt(t,i,s,o),Zi(t,i,s)),s}function xo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ic(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ja(t,e){Ic(t,e),(t=t.alternate)&&Ic(t,e)}function Jv(){return null}var $p=typeof reportError=="function"?reportError:function(t){console.error(t)};function eu(t){this._internalRoot=t}es.prototype.render=eu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));jo(t,e,null,null)};es.prototype.unmount=eu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;En(function(){jo(null,t,null,null)}),e[St]=null}};function es(t){this._internalRoot=t}es.prototype.unstable_scheduleHydration=function(t){if(t){var e=yh();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Dt.length&&e!==0&&e<Dt[n].priority;n++);Dt.splice(n,0,t),n===0&&_h(t)}};function tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ts(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ac(){}function Wv(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=xo(s);o.call(d)}}var s=Vp(e,r,t,0,null,!1,!1,"",Ac);return t._reactRootContainer=s,t[St]=s.current,ei(t.nodeType===8?t.parentNode:t),En(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var d=xo(c);a.call(d)}}var c=Za(t,0,!1,null,null,!1,!1,"",Ac);return t._reactRootContainer=c,t[St]=c.current,ei(t.nodeType===8?t.parentNode:t),En(function(){jo(e,c,n,r)}),c}function ns(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=xo(s);a.call(c)}}jo(e,s,t,i)}else s=Wv(n,e,t,i,r);return xo(s)}mh=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xr(e.pendingLanes);n!==0&&(wa(e,n|1),De(e,re()),!($&6)&&(ar=re()+500,Qt()))}break;case 13:En(function(){var r=Tt(t,1);if(r!==null){var i=Ae();lt(r,t,1,i)}}),ja(t,1)}};Ea=function(t){if(t.tag===13){var e=Tt(t,134217728);if(e!==null){var n=Ae();lt(e,t,134217728,n)}ja(t,134217728)}};gh=function(t){if(t.tag===13){var e=Ht(t),n=Tt(t,e);if(n!==null){var r=Ae();lt(n,t,e,r)}ja(t,e)}};yh=function(){return q};vh=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};ll=function(t,e,n){switch(e){case"input":if(el(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Jo(r);if(!i)throw Error(R(90));Yf(r),el(r,i)}}}break;case"textarea":Xf(t,n);break;case"select":e=n.value,e!=null&&Jn(t,!!n.multiple,e,!1)}};ih=Ka;oh=En;var Kv={usingClientEntryPoint:!1,Events:[mi,On,Jo,nh,rh,Ka]},Rr={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Yv={bundleType:Rr.bundleType,version:Rr.version,rendererPackageName:Rr.rendererPackageName,rendererConfig:Rr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:At.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ah(t),t===null?null:t.stateNode},findFiberByHostInstance:Rr.findFiberByHostInstance||Jv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{Go=Fi.inject(Yv),ht=Fi}catch{}}qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kv;qe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tu(e))throw Error(R(200));return zv(t,e,null,n)};qe.createRoot=function(t,e){if(!tu(t))throw Error(R(299));var n=!1,r="",i=$p;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Za(t,1,!1,null,null,n,!1,r,i),t[St]=e.current,ei(t.nodeType===8?t.parentNode:t),new eu(e)};qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=ah(e),t=t===null?null:t.stateNode,t};qe.flushSync=function(t){return En(t)};qe.hydrate=function(t,e,n){if(!ts(e))throw Error(R(200));return ns(null,t,e,!0,n)};qe.hydrateRoot=function(t,e,n){if(!tu(t))throw Error(R(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=$p;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Vp(e,null,t,1,n??null,i,!1,o,s),t[St]=e.current,ei(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new es(e)};qe.render=function(t,e,n){if(!ts(e))throw Error(R(200));return ns(null,t,e,!1,n)};qe.unmountComponentAtNode=function(t){if(!ts(t))throw Error(R(40));return t._reactRootContainer?(En(function(){ns(null,null,t,!1,function(){t._reactRootContainer=null,t[St]=null})}),!0):!1};qe.unstable_batchedUpdates=Ka;qe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ts(n))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return ns(t,e,n,!1,r)};qe.version="18.3.1-next-f1338f8080-20240426";function Bp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bp)}catch(t){console.error(t)}}Bp(),Bf.exports=qe;var Qv=Bf.exports,Rc=Qv;Ws.createRoot=Rc.createRoot,Ws.hydrateRoot=Rc.hydrateRoot;/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ze=(t,e)=>{const n=Ce.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:a="",children:c,...d},f)=>Ce.createElement("svg",{ref:f,...Xv,width:i,height:i,stroke:r,strokeWidth:s?Number(o)*24/Number(i):o,className:["lucide",`lucide-${Zv(t)}`,a].join(" "),...d},[...e.map(([h,p])=>Ce.createElement(h,p)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ze("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=ze("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=ze("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=ze("FileAudio",[["path",{d:"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"1013sb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z",key:"gqt63y"}],["path",{d:"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z",key:"cf7lqx"}],["path",{d:"M2 19v-3a6 6 0 0 1 12 0v3",key:"1acxgf"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=ze("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=ze("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=ze("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=ze("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=ze("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=ze("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),d_=({onOpenSettings:t})=>I.jsxs("header",{className:"bg-[#24292f] text-white py-4 px-6 flex items-center justify-between shadow-sm",children:[I.jsxs("div",{className:"flex items-center gap-3",children:[I.jsx(r_,{className:"w-8 h-8"}),I.jsxs("div",{children:[I.jsx("h1",{className:"text-lg font-bold leading-tight",children:"GrammarHub"}),I.jsx("p",{className:"text-xs text-gray-400",children:"Audio Analysis for Teachers"})]})]}),I.jsxs("button",{onClick:t,className:"p-2 hover:bg-gray-700 rounded-md transition-colors text-gray-300 hover:text-white flex items-center gap-2 text-sm",children:[I.jsx(a_,{className:"w-4 h-4"}),I.jsx("span",{children:"Config"})]})]}),f_=({isOpen:t,onClose:e,config:n,onSave:r,message:i})=>{const[o,s]=Ce.useState(n);if(Ce.useEffect(()=>{t&&s(n)},[t,n]),!t)return null;const a=d=>{s({...o,[d.target.name]:d.target.value})},c=()=>{r(o),e()};return I.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:I.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[I.jsxs("div",{className:"flex justify-between items-center p-4 border-b bg-gray-50 flex-shrink-0",children:[I.jsxs("div",{children:[I.jsx("h3",{className:"font-semibold text-gray-800",children:"Application Configuration"}),I.jsx("p",{className:"text-xs text-gray-500",children:"Settings are saved in your browser"})]}),I.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:I.jsx(c_,{className:"w-5 h-5"})})]}),I.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[i&&I.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 text-sm p-3 rounded-md flex items-start gap-2",children:[I.jsx(e_,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),I.jsx("p",{children:i})]}),I.jsxs("div",{className:"border-b border-gray-100 pb-4 mb-4",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[I.jsx(i_,{className:"w-4 h-4 text-purple-600"}),I.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"AI Model Settings"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gemini API Key"}),I.jsx("input",{type:"password",name:"geminiApiKey",value:o.geminiApiKey,onChange:a,placeholder:"AIzaSy...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none text-sm transition-shadow"}),I.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get a free key at ",I.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-purple-600 hover:underline",children:"Google AI Studio"}),"."]})]})]}),I.jsxs("div",{children:[I.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[I.jsx(u_,{className:"w-4 h-4 text-green-600"}),I.jsx("h4",{className:"text-sm font-bold text-gray-700",children:"Storage Settings (Supabase)"})]}),I.jsxs("div",{className:"space-y-4",children:[I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project URL"}),I.jsx("input",{type:"text",name:"url",value:o.url,onChange:a,placeholder:"https://your-project.supabase.co",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm transition-shadow"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Anon Public Key"}),I.jsx("input",{type:"password",name:"anonKey",value:o.anonKey,onChange:a,placeholder:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm transition-shadow"})]}),I.jsxs("div",{children:[I.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Bucket Name"}),I.jsx("input",{type:"text",name:"bucketName",value:o.bucketName,onChange:a,placeholder:"audio-uploads",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none text-sm transition-shadow"}),I.jsxs("div",{className:"mt-2 text-[10px] text-gray-400 leading-tight",children:["Ensure you have an RLS Policy on this bucket allowing ",I.jsx("strong",{children:"INSERT"})," for ",I.jsx("strong",{children:"anon"})," users."]})]})]})]})]}),I.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-3 flex-shrink-0",children:[I.jsx("button",{onClick:e,className:"px-4 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"Cancel"}),I.jsxs("button",{onClick:c,className:"bg-[#2da44e] text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-[#2c974b] transition-colors flex items-center gap-2",children:[I.jsx(l_,{className:"w-4 h-4"}),"Save Configuration"]})]})]})})},h_=({result:t,onReset:e})=>I.jsxs("div",{className:"max-w-4xl mx-auto w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[I.jsxs("div",{className:"border-b border-gray-200 pb-6 mb-6 flex justify-between items-start",children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Analysis Report"}),I.jsx("p",{className:"text-gray-600",children:t.summary})]}),I.jsx("button",{onClick:e,className:"text-sm text-blue-600 hover:underline",children:"Analyze another file"})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[I.jsx("div",{className:"lg:col-span-2 space-y-6",children:I.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white shadow-sm",children:[I.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center gap-2",children:[I.jsx(s_,{className:"w-4 h-4 text-gray-500"}),I.jsx("h3",{className:"font-semibold text-sm text-gray-700",children:"Transcription"})]}),I.jsx("div",{className:"p-4 bg-white max-h-[400px] overflow-y-auto text-gray-800 leading-relaxed whitespace-pre-wrap font-mono text-sm",children:t.transcription})]})}),I.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[I.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[I.jsx(t_,{className:"w-5 h-5 text-gray-700"}),I.jsx("h3",{className:"font-bold text-gray-900",children:"Grammar Points"})]}),t.grammarPoints.map((n,r)=>I.jsxs("div",{className:"border border-gray-200 rounded-lg bg-white shadow-sm p-4 hover:border-blue-300 transition-colors",children:[I.jsxs("div",{className:"flex justify-between items-start mb-2",children:[I.jsx("h4",{className:"font-bold text-blue-600 text-sm",children:n.title}),I.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium
                  ${n.difficulty==="Beginner"?"bg-green-100 text-green-700":n.difficulty==="Intermediate"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-700"}`,children:n.difficulty})]}),I.jsx("p",{className:"text-xs text-gray-600 mb-3",children:n.explanation}),I.jsx("div",{className:"bg-gray-50 p-2 rounded border border-gray-100",children:I.jsxs("p",{className:"text-xs text-gray-500 italic",children:['"',n.example,'"']})})]},r))]})]})]});var Le=(t=>(t.IDLE="IDLE",t.UPLOADING="UPLOADING",t.ANALYZING="ANALYZING",t.SUCCESS="SUCCESS",t.ERROR="ERROR",t))(Le||{});const kc=["audio/mpeg","audio/wav","audio/mp3","audio/x-m4a","audio/ogg","audio/webm"],bs=20,p_=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{if(typeof r.result=="string"){const i=r.result.split(",")[1];e(i)}else n(new Error("Failed to convert file to base64"))},r.onerror=i=>n(i)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let m_,g_;function y_(){return{geminiUrl:m_,vertexUrl:g_}}function v_(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=y_();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rt{}function N(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function u(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];u(f,e.slice(o+1),n[d])}else for(const d of c)u(d,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>l(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function __(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){a=c;break}if(a!==-1&&o.length>a)for(let c=a;c<o.length;c++){const d=o[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}$l(t,i,o,0,s)}}function $l(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const c of a[s])$l(c,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(d=>!d.startsWith("_")&&!i.has(d)),c={};for(const d of a)c[d]=s[d];for(const[d,f]of Object.entries(c)){const h=[];for(const p of n.slice(r))p==="*"?h.push(d):h.push(p);u(s,h,f)}for(const d of a)delete s[d]}}else{const s=t;o in s&&$l(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nu(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function w_(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const r=l(t,["resourceName"]);return r!=null&&u(e,["_url","resourceName"],r),e}function E_(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],T_(s)),e}function S_(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],C_(s)),e}function T_(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>I_(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function C_(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>A_(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function I_(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],M_(n)),e}function A_(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],D_(n)),e}function R_(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function P_(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function k_(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],N_(s)),e}function N_(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&u(e,["documentName"],i),e}function Gp(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],x_(s)),e}function x_(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&u(e,["documentName"],i),e}function M_(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],nu(r));const i=l(t,["encoding"]);return i!=null&&u(e,["mimeType"],i),e}function D_(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],nu(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Nc;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Nc||(Nc={}));var xc;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(xc||(xc={}));var Mc;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Mc||(Mc={}));var pe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pe||(pe={}));var Dc;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Dc||(Dc={}));var Uc;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Uc||(Uc={}));var Lc;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Lc||(Lc={}));var bc;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(bc||(bc={}));var Fc;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Fc||(Fc={}));var Oc;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(Oc||(Oc={}));var Vc;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Vc||(Vc={}));var $c;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})($c||($c={}));var Bc;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Bc||(Bc={}));var Gc;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Gc||(Gc={}));var qc;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qc||(qc={}));var Hc;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Hc||(Hc={}));var zc;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(zc||(zc={}));var Jc;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Jc||(Jc={}));var Wc;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Wc||(Wc={}));var Mo;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Mo||(Mo={}));var Kc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Kc||(Kc={}));var Yc;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Yc||(Yc={}));var Qc;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Qc||(Qc={}));var Bl;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Bl||(Bl={}));var Xc;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Xc||(Xc={}));var Zc;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Zc||(Zc={}));var jc;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(jc||(jc={}));var ed;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ed||(ed={}));var td;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(td||(td={}));var nd;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(nd||(nd={}));var rd;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(rd||(rd={}));var id;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(id||(id={}));var od;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(od||(od={}));var sd;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(sd||(sd={}));var ld;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ld||(ld={}));var ad;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(ad||(ad={}));var ud;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(ud||(ud={}));var cd;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cd||(cd={}));var dd;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(dd||(dd={}));var fd;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(fd||(fd={}));var hd;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(hd||(hd={}));var pd;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(pd||(pd={}));var md;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(md||(md={}));var gd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(gd||(gd={}));var yd;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yd||(yd={}));var vd;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(vd||(vd={}));var _d;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(_d||(_d={}));var wd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(wd||(wd={}));var Ed;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Ed||(Ed={}));var Sd;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sd||(Sd={}));var Td;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Td||(Td={}));var Cd;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Cd||(Cd={}));var Id;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Id||(Id={}));var Ad;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ad||(Ad={}));var zn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(zn||(zn={}));class Gl{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Pr{get text(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const h=[];for(const p of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[m,_]of Object.entries(p))m!=="text"&&m!=="thought"&&m!=="thoughtSignature"&&(_!==null||_!==void 0)&&h.push(m);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;f=!0,d+=p.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const h of(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[p,m]of Object.entries(h))p!=="inlineData"&&(m!==null||m!==void 0)&&f.push(p);h.inlineData&&typeof h.inlineData.data=="string"&&(d+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,o,s,a,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,o,s,a,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,o,s,a,c,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class Rd{}class Pd{}class U_{}class L_{}class b_{}class F_{}class kd{}class Nd{}class xd{}class O_{}class Do{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Do;let i;const o=e;return n?i=S_(o):i=E_(o),Object.assign(r,i),r}}class Md{}class Dd{}class Ud{}class V_{}class $_{}class B_{}class ru{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ru,o=k_(e);return Object.assign(r,o),r}}class G_{}class q_{}class H_{}class Ld{}class z_{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,c]of Object.entries(s))a!=="inlineData"&&c!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class J_{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class iu{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new iu,o=Gp(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function qp(t,e){const n=B(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Hp(t){return Array.isArray(t)?t.map(e=>Uo(e)):[Uo(t)]}function Uo(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function zp(t){const e=Uo(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Jp(t){const e=Uo(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bd(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Wp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>bd(e)):[bd(t)]}function ql(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Fd(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Od(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ee(t){if(t==null)throw new Error("ContentUnion is required");return ql(t)?t:{role:"user",parts:Wp(t)}}function ou(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ee(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ee(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ee(n)):[Ee(e)]}function Qe(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Fd(t)||Od(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ee(t)]}const e=[],n=[],r=ql(t[0]);for(const i of t){const o=ql(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Fd(i)||Od(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Wp(n)}),e}function W_(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(pe).includes(n[0].toUpperCase())?n[0].toUpperCase():pe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(pe).includes(r.toUpperCase())?r.toUpperCase():pe.TYPE_UNSPECIFIED})}}function Zn(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&W_(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(pe).includes(a.toUpperCase())?a.toUpperCase():pe.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Zn(a);else if(r.includes(s)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(Zn(d))}e[s]=c}else if(i.includes(s)){const c={};for(const[d,f]of Object.entries(a))c[d]=Zn(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=a}return e}function su(t){return Zn(t)}function lu(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function au(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function hr(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zn(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zn(e.response));return t}function pr(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function K_(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Pt(t,e){if(typeof e!="string")throw new Error("name must be a string");return K_(t,e,"cachedContents")}function Kp(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Xt(t){return nu(t)}function Y_(t){return t!=null&&typeof t=="object"&&"name"in t}function Q_(t){return t!=null&&typeof t=="object"&&"video"in t}function X_(t){return t!=null&&typeof t=="object"&&"uri"in t}function Yp(t){var e;let n;if(Y_(t)&&(n=t.name),!(X_(t)&&(n=t.uri,n===void 0))&&!(Q_(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Qp(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Xp(t){for(const e of["models","tunedModels","publisherModels"])if(Z_(t,e))return t[e];return[]}function Z_(t,e){return t!==null&&typeof t=="object"&&e in t}function j_(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function e0(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=j_(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function Zp(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function t0(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function jp(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function mr(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function em(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n0(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const r=l(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>b0(s))),u(e,["inlinedResponses"],o)}const i=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["inlinedEmbedContentResponses"],o)}return e}function r0(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsDestination","outputUriPrefix"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigqueryDestination","outputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function i0(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsDestination","outputUriPrefix"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigqueryDestination","outputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function oo(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata","displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["metadata","state"]);i!=null&&u(e,["state"],em(i));const o=l(t,["metadata","createTime"]);o!=null&&u(e,["createTime"],o);const s=l(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],n0(jp(d))),e}function Hl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["state"]);i!=null&&u(e,["state"],em(i));const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&u(e,["model"],f);const h=l(t,["inputConfig"]);h!=null&&u(e,["src"],o0(h));const p=l(t,["outputConfig"]);p!=null&&u(e,["dest"],r0(jp(p)));const m=l(t,["completionStats"]);return m!=null&&u(e,["completionStats"],m),e}function o0(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const r=l(t,["gcsSource","uris"]);r!=null&&u(e,["gcsUri"],r);const i=l(t,["bigquerySource","inputUri"]);return i!=null&&u(e,["bigqueryUri"],i),e}function s0(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=l(e,["fileName"]);r!=null&&u(n,["fileName"],r);const i=l(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>L0(t,s))),u(n,["requests","requests"],o)}return n}function l0(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const r=l(t,["gcsUri"]);r!=null&&u(e,["gcsSource","uris"],r);const i=l(t,["bigqueryUri"]);if(i!=null&&u(e,["bigquerySource","inputUri"],i),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function a0(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function u0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],mr(t,r)),n}function c0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],mr(t,r)),n}function d0(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],f0(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["safetyRatings"],p)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function f0(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["citations"],r)}return e}function tm(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>q0(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function h0(t,e){const n={},r=l(t,["displayName"]);if(e!==void 0&&r!=null&&u(e,["batch","displayName"],r),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function p0(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["dest"]);return e!==void 0&&i!=null&&u(e,["outputConfig"],i0(t0(i))),n}function Vd(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["src"]);i!=null&&u(n,["batch","inputConfig"],s0(t,Zp(t,i)));const o=l(e,["config"]);return o!=null&&h0(o,n),n}function m0(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],B(t,r));const i=l(e,["src"]);i!=null&&u(n,["inputConfig"],l0(Zp(t,i)));const o=l(e,["config"]);return o!=null&&p0(o,n),n}function g0(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["batch","displayName"],r),n}function y0(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["src"]);i!=null&&u(n,["batch","inputConfig"],C0(t,i));const o=l(e,["config"]);return o!=null&&g0(o,n),n}function v0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],mr(t,r)),n}function _0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],mr(t,r)),n}function w0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],o),e}function E0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);return o!=null&&u(e,["error"],o),e}function S0(t,e){const n={},r=l(e,["contents"]);if(r!=null){let o=ou(t,r);Array.isArray(o)&&(o=o.map(s=>s)),u(n,["requests[]","request","content"],o)}const i=l(e,["config"]);return i!=null&&(u(n,["_self"],T0(i,n)),__(n,{"requests[].*":"requests[].request.*"})),n}function T0(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&u(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function C0(t,e){const n={},r=l(e,["fileName"]);r!=null&&u(n,["file_name"],r);const i=l(e,["inlinedRequests"]);return i!=null&&u(n,["requests"],S0(t,i)),n}function I0(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function A0(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);if(i!=null&&u(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function R0(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function P0(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],tm(Ee(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const E=l(e,["responseMimeType"]);E!=null&&u(r,["responseMimeType"],E);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],su(y));const g=l(e,["responseJsonSchema"]);if(g!=null&&u(r,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(e,["safetySettings"]);if(n!==void 0&&v!=null){let H=v;Array.isArray(H)&&(H=H.map(ye=>H0(ye))),u(n,["safetySettings"],H)}const S=l(e,["tools"]);if(n!==void 0&&S!=null){let H=pr(S);Array.isArray(H)&&(H=H.map(ye=>J0(hr(ye)))),u(n,["tools"],H)}const T=l(e,["toolConfig"]);if(n!==void 0&&T!=null&&u(n,["toolConfig"],z0(T)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(e,["cachedContent"]);n!==void 0&&C!=null&&u(n,["cachedContent"],Pt(t,C));const A=l(e,["responseModalities"]);A!=null&&u(r,["responseModalities"],A);const P=l(e,["mediaResolution"]);P!=null&&u(r,["mediaResolution"],P);const k=l(e,["speechConfig"]);if(k!=null&&u(r,["speechConfig"],lu(k)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(e,["thinkingConfig"]);M!=null&&u(r,["thinkingConfig"],M);const G=l(e,["imageConfig"]);return G!=null&&u(r,["imageConfig"],U0(G)),r}function k0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>d0(d))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function N0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],mr(t,r)),n}function x0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],mr(t,r)),n}function M0(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function D0(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function U0(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function L0(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["request","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let a=Qe(i);Array.isArray(a)&&(a=a.map(c=>tm(c))),u(n,["request","contents"],a)}const o=l(e,["metadata"]);o!=null&&u(n,["metadata"],o);const s=l(e,["config"]);return s!=null&&u(n,["request","generationConfig"],P0(t,s,l(n,["request"],{}))),n}function b0(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],k0(n));const r=l(t,["error"]);return r!=null&&u(e,["error"],r),e}function F0(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);if(e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function O0(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);const o=l(t,["filter"]);return e!==void 0&&o!=null&&u(e,["_query","filter"],o),n}function V0(t){const e={},n=l(t,["config"]);return n!=null&&F0(n,e),e}function $0(t){const e={},n=l(t,["config"]);return n!=null&&O0(n,e),e}function B0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>oo(s))),u(e,["batchJobs"],o)}return e}function G0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Hl(s))),u(e,["batchJobs"],o)}return e}function q0(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&u(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],I0(o));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],A0(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],a0(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function H0(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function z0(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],R0(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function J0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&u(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&u(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],M0(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],D0(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var It;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(It||(It={}));class Cn{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W0 extends Rt{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Cn(It.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Vd(this.apiClient,e),r=n._url,i=N("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,c=a.requests,d=[];for(const f of c){const h=Object.assign({},f);if(h.systemInstruction){const p=h.systemInstruction;delete h.systemInstruction;const m=h.request;m.systemInstruction=p,h.request=m}d.push(h)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=m0(this.apiClient,e);return a=N("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Hl(f))}else{const d=Vd(this.apiClient,e);return a=N("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>oo(f))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=y0(this.apiClient,e);return o=N("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>oo(c))}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=x0(this.apiClient,e);return a=N("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Hl(f))}else{const d=N0(this.apiClient,e);return a=N("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>oo(f))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const c=c0(this.apiClient,e);s=N("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=u0(this.apiClient,e);s=N("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=$0(e);return a=N("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=G0(f),p=new Ld;return Object.assign(p,h),p})}else{const d=V0(e);return a=N("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=B0(f),p=new Ld;return Object.assign(p,h),p})}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=_0(this.apiClient,e);return a=N("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>E0(f))}else{const d=v0(this.apiClient,e);return a=N("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>w0(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K0(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function $d(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>yw(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function Y0(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=Qe(s);Array.isArray(f)&&(f=f.map(h=>$d(h))),u(e,["contents"],f)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],$d(Ee(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>_w(h))),u(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],vw(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Q0(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);e!==void 0&&i!=null&&u(e,["expireTime"],i);const o=l(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let h=Qe(s);Array.isArray(h)&&(h=h.map(p=>p)),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],Ee(a));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(p=>ww(p))),u(e,["tools"],h)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function X0(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],qp(t,r));const i=l(e,["config"]);return i!=null&&Y0(i,n),n}function Z0(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["model"],qp(t,r));const i=l(e,["config"]);return i!=null&&Q0(i,n),n}function j0(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function ew(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function tw(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function nw(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function rw(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function iw(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);if(i!=null&&u(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ow(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sw(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function lw(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function aw(t,e){const n={},r=l(e,["name"]);return r!=null&&u(n,["_url","name"],Pt(t,r)),n}function uw(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function cw(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function dw(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function fw(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function hw(t){const e={},n=l(t,["config"]);return n!=null&&dw(n,e),e}function pw(t){const e={},n=l(t,["config"]);return n!=null&&fw(n,e),e}function mw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["cachedContents"],o)}return e}function gw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["cachedContents"],o)}return e}function yw(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&u(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],rw(o));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],iw(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],K0(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function vw(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],ow(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function _w(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&u(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&u(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],uw(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],cw(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function ww(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>sw(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);if(o!=null&&u(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function Ew(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function Sw(t,e){const n={},r=l(t,["ttl"]);e!==void 0&&r!=null&&u(e,["ttl"],r);const i=l(t,["expireTime"]);return e!==void 0&&i!=null&&u(e,["expireTime"],i),n}function Tw(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Pt(t,r));const i=l(e,["config"]);return i!=null&&Ew(i,n),n}function Cw(t,e){const n={},r=l(e,["name"]);r!=null&&u(n,["_url","name"],Pt(t,r));const i=l(e,["config"]);return i!=null&&Sw(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iw extends Rt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cn(It.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Z0(this.apiClient,e);return a=N("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=X0(this.apiClient,e);return a=N("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=aw(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=lw(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=ew(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=nw(f),p=new Dd;return Object.assign(p,h),p})}else{const d=j0(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=tw(f),p=new Dd;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Cw(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=Tw(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=pw(e);return a=N("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=gw(f),p=new Ud;return Object.assign(p,h),p})}else{const d=hw(e);return a=N("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=mw(f),p=new Ud;return Object.assign(p,h),p})}}}function Bd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function K(t){return this instanceof K?(this.v=t,this):new K(t)}function jn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(i[m]=function(w){return new Promise(function(E,y){o.push([m,w,E,y])>1||c(m,w)})},_&&(i[m]=_(i[m])))}function c(m,_){try{d(r[m](_))}catch(w){p(o[0][3],w)}}function d(m){m.value instanceof K?Promise.resolve(m.value.v).then(f,h):p(o[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function p(m,_){m(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function qr(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bd=="function"?Bd(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Aw(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:nm(n)}function nm(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rw(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Gd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!nm(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class Pw{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new kw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class kw{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),Rw(o)}async sendMessage(e){var n;await this.sendPromise;const r=Ee(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const c=await i,d=(s=(o=c.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let p=[];f!=null&&(p=(a=f.slice(h))!==null&&a!==void 0?a:[]);const m=d?[d]:[];this.recordHistory(r,m,p)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ee(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Gd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return jn(this,arguments,function*(){var s,a,c,d;const f=[];try{for(var h=!0,p=qr(e),m;m=yield K(p.next()),s=m.done,!s;h=!0){d=m.value,h=!1;const _=d;if(Aw(_)){const w=(i=(r=_.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;w!==void 0&&f.push(w)}yield yield K(_)}}catch(_){a={error:_}}finally{try{!h&&!s&&(c=p.return)&&(yield K(c.call(p)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Gd(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rs extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,rs.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nw(t){const e={},n=l(t,["file"]);return n!=null&&u(e,["file"],n),e}function xw(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function Mw(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],Yp(n)),e}function Dw(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function Uw(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],Yp(n)),e}function Lw(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function bw(t){const e={},n=l(t,["config"]);return n!=null&&Lw(n,e),e}function Fw(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ow extends Rt{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Cn(It.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=bw(e);return o=N("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=Fw(c),f=new G_;return Object.assign(f,d),f})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Nw(e);return o=N("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=xw(c),f=new q_;return Object.assign(f,d),f})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Uw(e);return o=N("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Mw(e);return o=N("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=Dw(c),f=new H_;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function so(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Vw(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>tE(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function $w(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function Bw(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);if(i!=null&&u(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gw(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function qw(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const i=l(t,["audioTimestamp"]);i!=null&&u(e,["audioTimestamp"],i);const o=l(t,["candidateCount"]);o!=null&&u(e,["candidateCount"],o);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const p=l(t,["responseLogprobs"]);p!=null&&u(e,["responseLogprobs"],p);const m=l(t,["responseMimeType"]);m!=null&&u(e,["responseMimeType"],m);const _=l(t,["responseModalities"]);_!=null&&u(e,["responseModalities"],_);const w=l(t,["responseSchema"]);w!=null&&u(e,["responseSchema"],w);const E=l(t,["routingConfig"]);E!=null&&u(e,["routingConfig"],E);const y=l(t,["seed"]);y!=null&&u(e,["seed"],y);const g=l(t,["speechConfig"]);g!=null&&u(e,["speechConfig"],rm(g));const v=l(t,["stopSequences"]);v!=null&&u(e,["stopSequences"],v);const S=l(t,["temperature"]);S!=null&&u(e,["temperature"],S);const T=l(t,["thinkingConfig"]);T!=null&&u(e,["thinkingConfig"],T);const C=l(t,["topK"]);C!=null&&u(e,["topK"],C);const A=l(t,["topP"]);if(A!=null&&u(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Hw(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function zw(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function Jw(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],au(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],Vw(Ee(_)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let C=pr(w);Array.isArray(C)&&(C=C.map(A=>rE(hr(A)))),u(e,["setup","tools"],C)}const E=l(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],nE(E));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","inputAudioTranscription"],y);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&u(e,["setup","outputAudioTranscription"],g);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],v);const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);const T=l(t,["proactivity"]);return e!==void 0&&T!=null&&u(e,["setup","proactivity"],T),n}function Ww(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],qw(r));const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],rm(au(h)));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],Ee(_));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let C=pr(w);Array.isArray(C)&&(C=C.map(A=>iE(hr(A)))),u(e,["setup","tools"],C)}const E=l(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],E);const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","inputAudioTranscription"],y);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&u(e,["setup","outputAudioTranscription"],g);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],v);const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);const T=l(t,["proactivity"]);return e!==void 0&&T!=null&&u(e,["setup","proactivity"],T),n}function Kw(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],B(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],Jw(i,n)),n}function Yw(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],B(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],Ww(i,n)),n}function Qw(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function Xw(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["weightedPrompts"],r)}return e}function Zw(t){const e={},n=l(t,["media"]);if(n!=null){let d=Hp(n);Array.isArray(d)&&(d=d.map(f=>so(f))),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],so(Jp(r)));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],so(zp(o)));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function jw(t){const e={},n=l(t,["media"]);if(n!=null){let d=Hp(n);Array.isArray(d)&&(d=d.map(f=>f)),u(e,["mediaChunks"],d)}const r=l(t,["audio"]);r!=null&&u(e,["audio"],Jp(r));const i=l(t,["audioStreamEnd"]);i!=null&&u(e,["audioStreamEnd"],i);const o=l(t,["video"]);o!=null&&u(e,["video"],zp(o));const s=l(t,["text"]);s!=null&&u(e,["text"],s);const a=l(t,["activityStart"]);a!=null&&u(e,["activityStart"],a);const c=l(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function eE(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);const r=l(t,["serverContent"]);r!=null&&u(e,["serverContent"],r);const i=l(t,["toolCall"]);i!=null&&u(e,["toolCall"],i);const o=l(t,["toolCallCancellation"]);o!=null&&u(e,["toolCallCancellation"],o);const s=l(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],oE(s));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],a);const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],c),e}function tE(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&u(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],$w(o));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],Bw(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],so(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function nE(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function rm(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function rE(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&u(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&u(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],Hw(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],zw(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function iE(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>Gw(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);if(o!=null&&u(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function oE(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const r=l(t,["cachedContentTokenCount"]);r!=null&&u(e,["cachedContentTokenCount"],r);const i=l(t,["candidatesTokenCount"]);i!=null&&u(e,["responseTokenCount"],i);const o=l(t,["toolUsePromptTokenCount"]);o!=null&&u(e,["toolUsePromptTokenCount"],o);const s=l(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["promptTokensDetails"],m)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["cacheTokensDetails"],m)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["responseTokensDetails"],m)}const h=l(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),u(e,["toolUsePromptTokensDetails"],m)}const p=l(t,["trafficType"]);return p!=null&&u(e,["trafficType"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sE(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function lE(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],n);const r=l(t,["citationMetadata"]);r!=null&&u(e,["citationMetadata"],aE(r));const i=l(t,["tokenCount"]);i!=null&&u(e,["tokenCount"],i);const o=l(t,["finishReason"]);o!=null&&u(e,["finishReason"],o);const s=l(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);const a=l(t,["groundingMetadata"]);a!=null&&u(e,["groundingMetadata"],a);const c=l(t,["index"]);c!=null&&u(e,["index"],c);const d=l(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);const f=l(t,["safetyRatings"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),u(e,["safetyRatings"],p)}const h=l(t,["urlContextMetadata"]);return h!=null&&u(e,["urlContextMetadata"],h),e}function aE(t){const e={},n=l(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["citations"],r)}return e}function uE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let o=Qe(i);Array.isArray(o)&&(o=o.map(s=>s)),u(n,["contents"],o)}return n}function cE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),u(e,["tokensInfo"],i)}return e}function dE(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const r=l(t,["statistics"]);return r!=null&&u(e,["statistics"],fE(r)),e}function fE(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const r=l(t,["token_count"]);return r!=null&&u(e,["tokenCount"],r),e}function is(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>ES(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function hE(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const r=l(t,["enableControlImageComputation"]);return r!=null&&u(e,["computeControl"],r),e}function pE(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function mE(t,e){const n={},r=l(t,["systemInstruction"]);e!==void 0&&r!=null&&u(e,["systemInstruction"],Ee(r));const i=l(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>am(a))),u(e,["tools"],s)}const o=l(t,["generationConfig"]);return e!==void 0&&o!=null&&u(e,["generationConfig"],sS(o)),n}function gE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let s=Qe(i);Array.isArray(s)&&(s=s.map(a=>is(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&pE(o),n}function yE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let s=Qe(i);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&mE(o,n),n}function vE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);r!=null&&u(e,["totalTokens"],r);const i=l(t,["cachedContentTokenCount"]);return i!=null&&u(e,["cachedContentTokenCount"],i),e}function _E(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["totalTokens"]);return r!=null&&u(e,["totalTokens"],r),e}function wE(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],B(t,r)),n}function EE(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],B(t,r)),n}function SE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function TE(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function CE(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const E=l(t,["addWatermark"]);e!==void 0&&E!=null&&u(e,["parameters","addWatermark"],E);const y=l(t,["labels"]);e!==void 0&&y!=null&&u(e,["labels"],y);const g=l(t,["editMode"]);e!==void 0&&g!=null&&u(e,["parameters","editMode"],g);const v=l(t,["baseSteps"]);return e!==void 0&&v!=null&&u(e,["parameters","editConfig","baseSteps"],v),n}function IE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>RS(c))),u(n,["instances[0]","referenceImages"],a)}const s=l(e,["config"]);return s!=null&&CE(s,n),n}function AE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>os(o))),u(e,["generatedImages"],i)}return e}function RE(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["requests[]","taskType"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["requests[]","title"],i);const o=l(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&u(e,["requests[]","outputDimensionality"],o),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function PE(t,e){const n={},r=l(t,["taskType"]);e!==void 0&&r!=null&&u(e,["instances[]","task_type"],r);const i=l(t,["title"]);e!==void 0&&i!=null&&u(e,["instances[]","title"],i);const o=l(t,["outputDimensionality"]);e!==void 0&&o!=null&&u(e,["parameters","outputDimensionality"],o);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function kE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let a=ou(t,i);Array.isArray(a)&&(a=a.map(c=>c)),u(n,["requests[]","content"],a)}const o=l(e,["config"]);o!=null&&RE(o,n);const s=l(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],B(t,s)),n}function NE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let s=ou(t,i);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["instances[]","content"],s)}const o=l(e,["config"]);return o!=null&&PE(o,n),n}function xE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],i),e}function ME(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>dE(s))),u(e,["embeddings"],o)}const i=l(t,["metadata"]);return i!=null&&u(e,["metadata"],i),e}function DE(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const r=l(t,["deployedModelId"]);return r!=null&&u(e,["deployedModelId"],r),e}function UE(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function LE(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);if(i!=null&&u(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function bE(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const r=l(t,["allowedFunctionNames"]);if(r!=null&&u(e,["allowedFunctionNames"],r),l(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function FE(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const r=l(t,["name"]);r!=null&&u(e,["name"],r);const i=l(t,["parameters"]);i!=null&&u(e,["parameters"],i);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const s=l(t,["response"]);s!=null&&u(e,["response"],s);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function OE(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],is(Ee(i)));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const E=l(e,["responseMimeType"]);E!=null&&u(r,["responseMimeType"],E);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],su(y));const g=l(e,["responseJsonSchema"]);if(g!=null&&u(r,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const v=l(e,["safetySettings"]);if(n!==void 0&&v!=null){let H=v;Array.isArray(H)&&(H=H.map(ye=>PS(ye))),u(n,["safetySettings"],H)}const S=l(e,["tools"]);if(n!==void 0&&S!=null){let H=pr(S);Array.isArray(H)&&(H=H.map(ye=>LS(hr(ye)))),u(n,["tools"],H)}const T=l(e,["toolConfig"]);if(n!==void 0&&T!=null&&u(n,["toolConfig"],US(T)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=l(e,["cachedContent"]);n!==void 0&&C!=null&&u(n,["cachedContent"],Pt(t,C));const A=l(e,["responseModalities"]);A!=null&&u(r,["responseModalities"],A);const P=l(e,["mediaResolution"]);P!=null&&u(r,["mediaResolution"],P);const k=l(e,["speechConfig"]);if(k!=null&&u(r,["speechConfig"],lu(k)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=l(e,["thinkingConfig"]);M!=null&&u(r,["thinkingConfig"],M);const G=l(e,["imageConfig"]);return G!=null&&u(r,["imageConfig"],dS(G)),r}function VE(t,e,n){const r={},i=l(e,["systemInstruction"]);n!==void 0&&i!=null&&u(n,["systemInstruction"],Ee(i));const o=l(e,["temperature"]);o!=null&&u(r,["temperature"],o);const s=l(e,["topP"]);s!=null&&u(r,["topP"],s);const a=l(e,["topK"]);a!=null&&u(r,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(r,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(r,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&u(r,["stopSequences"],f);const h=l(e,["responseLogprobs"]);h!=null&&u(r,["responseLogprobs"],h);const p=l(e,["logprobs"]);p!=null&&u(r,["logprobs"],p);const m=l(e,["presencePenalty"]);m!=null&&u(r,["presencePenalty"],m);const _=l(e,["frequencyPenalty"]);_!=null&&u(r,["frequencyPenalty"],_);const w=l(e,["seed"]);w!=null&&u(r,["seed"],w);const E=l(e,["responseMimeType"]);E!=null&&u(r,["responseMimeType"],E);const y=l(e,["responseSchema"]);y!=null&&u(r,["responseSchema"],su(y));const g=l(e,["responseJsonSchema"]);g!=null&&u(r,["responseJsonSchema"],g);const v=l(e,["routingConfig"]);v!=null&&u(r,["routingConfig"],v);const S=l(e,["modelSelectionConfig"]);S!=null&&u(r,["modelConfig"],S);const T=l(e,["safetySettings"]);if(n!==void 0&&T!=null){let Ue=T;Array.isArray(Ue)&&(Ue=Ue.map(jt=>jt)),u(n,["safetySettings"],Ue)}const C=l(e,["tools"]);if(n!==void 0&&C!=null){let Ue=pr(C);Array.isArray(Ue)&&(Ue=Ue.map(jt=>am(hr(jt)))),u(n,["tools"],Ue)}const A=l(e,["toolConfig"]);n!==void 0&&A!=null&&u(n,["toolConfig"],A);const P=l(e,["labels"]);n!==void 0&&P!=null&&u(n,["labels"],P);const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&u(n,["cachedContent"],Pt(t,k));const M=l(e,["responseModalities"]);M!=null&&u(r,["responseModalities"],M);const G=l(e,["mediaResolution"]);G!=null&&u(r,["mediaResolution"],G);const H=l(e,["speechConfig"]);H!=null&&u(r,["speechConfig"],lm(lu(H)));const ye=l(e,["audioTimestamp"]);ye!=null&&u(r,["audioTimestamp"],ye);const _r=l(e,["thinkingConfig"]);_r!=null&&u(r,["thinkingConfig"],_r);const vi=l(e,["imageConfig"]);return vi!=null&&u(r,["imageConfig"],fS(vi)),r}function qd(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let s=Qe(i);Array.isArray(s)&&(s=s.map(a=>is(a))),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],OE(t,o,n)),n}function Hd(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["contents"]);if(i!=null){let s=Qe(i);Array.isArray(s)&&(s=s.map(a=>a)),u(n,["contents"],s)}const o=l(e,["config"]);return o!=null&&u(n,["generationConfig"],VE(t,o,n)),n}function zd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(d=>lE(d))),u(e,["candidates"],c)}const i=l(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const s=l(t,["responseId"]);s!=null&&u(e,["responseId"],s);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function Jd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["candidates"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(f=>f)),u(e,["candidates"],d)}const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const o=l(t,["modelVersion"]);o!=null&&u(e,["modelVersion"],o);const s=l(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function $E(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);const o=l(t,["guidanceScale"]);if(e!==void 0&&o!=null&&u(e,["parameters","guidanceScale"],o),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&u(e,["parameters","language"],f);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const p=l(t,["outputCompressionQuality"]);if(e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const m=l(t,["imageSize"]);if(e!==void 0&&m!=null&&u(e,["parameters","sampleImageSize"],m),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function BE(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["negativePrompt"]);e!==void 0&&i!=null&&u(e,["parameters","negativePrompt"],i);const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&u(e,["parameters","includeSafetyAttributes"],h);const p=l(t,["includeRaiReason"]);e!==void 0&&p!=null&&u(e,["parameters","includeRaiReason"],p);const m=l(t,["language"]);e!==void 0&&m!=null&&u(e,["parameters","language"],m);const _=l(t,["outputMimeType"]);e!==void 0&&_!=null&&u(e,["parameters","outputOptions","mimeType"],_);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const E=l(t,["addWatermark"]);e!==void 0&&E!=null&&u(e,["parameters","addWatermark"],E);const y=l(t,["labels"]);e!==void 0&&y!=null&&u(e,["labels"],y);const g=l(t,["imageSize"]);e!==void 0&&g!=null&&u(e,["parameters","sampleImageSize"],g);const v=l(t,["enhancePrompt"]);return e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v),n}function GE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&$E(o,n),n}function qE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["config"]);return o!=null&&BE(o,n),n}function HE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>nS(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],om(i)),e}function zE(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>os(s))),u(e,["generatedImages"],o)}const i=l(t,["positivePromptSafetyAttributes"]);return i!=null&&u(e,["positivePromptSafetyAttributes"],sm(i)),e}function JE(t,e){const n={},r=l(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=l(t,["durationSeconds"]);if(e!==void 0&&i!=null&&u(e,["parameters","durationSeconds"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const s=l(t,["resolution"]);e!==void 0&&s!=null&&u(e,["parameters","resolution"],s);const a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&u(e,["instances[0]","lastFrame"],ss(f));const h=l(t,["referenceImages"]);if(e!==void 0&&h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>KS(m))),u(e,["instances[0]","referenceImages"],p)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function WE(t,e){const n={},r=l(t,["numberOfVideos"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const o=l(t,["fps"]);e!==void 0&&o!=null&&u(e,["parameters","fps"],o);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);const h=l(t,["pubsubTopic"]);e!==void 0&&h!=null&&u(e,["parameters","pubsubTopic"],h);const p=l(t,["negativePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","negativePrompt"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&u(e,["parameters","enhancePrompt"],m);const _=l(t,["generateAudio"]);e!==void 0&&_!=null&&u(e,["parameters","generateAudio"],_);const w=l(t,["lastFrame"]);e!==void 0&&w!=null&&u(e,["instances[0]","lastFrame"],ut(w));const E=l(t,["referenceImages"]);if(e!==void 0&&E!=null){let v=E;Array.isArray(v)&&(v=v.map(S=>YS(S))),u(e,["instances[0]","referenceImages"],v)}const y=l(t,["mask"]);e!==void 0&&y!=null&&u(e,["instances[0]","mask"],WS(y));const g=l(t,["compressionQuality"]);return e!==void 0&&g!=null&&u(e,["parameters","compressionQuality"],g),n}function KE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],ZE(s)),e}function YE(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],jE(s)),e}function QE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],ss(o));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],um(s));const a=l(e,["source"]);a!=null&&eS(a,n);const c=l(e,["config"]);return c!=null&&JE(c,n),n}function XE(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["prompt"]);i!=null&&u(n,["instances[0]","prompt"],i);const o=l(e,["image"]);o!=null&&u(n,["instances[0]","image"],ut(o));const s=l(e,["video"]);s!=null&&u(n,["instances[0]","video"],cm(s));const a=l(e,["source"]);a!=null&&tS(a,n);const c=l(e,["config"]);return c!=null&&WE(c,n),n}function ZE(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>iS(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function jE(t){const e={},n=l(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>oS(s))),u(e,["generatedVideos"],o)}const r=l(t,["raiMediaFilteredCount"]);r!=null&&u(e,["raiMediaFilteredCount"],r);const i=l(t,["raiMediaFilteredReasons"]);return i!=null&&u(e,["raiMediaFilteredReasons"],i),e}function eS(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],ss(i));const o=l(t,["video"]);return e!==void 0&&o!=null&&u(e,["instances[0]","video"],um(o)),n}function tS(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],ut(i));const o=l(t,["video"]);return e!==void 0&&o!=null&&u(e,["instances[0]","video"],cm(o)),n}function nS(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],hS(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);return i!=null&&u(e,["safetyAttributes"],om(i)),e}function os(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],im(n));const r=l(t,["raiFilteredReason"]);r!=null&&u(e,["raiFilteredReason"],r);const i=l(t,["_self"]);i!=null&&u(e,["safetyAttributes"],sm(i));const o=l(t,["prompt"]);return o!=null&&u(e,["enhancedPrompt"],o),e}function rS(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],im(n));const r=l(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),u(e,["labels"],i)}return e}function iS(t){const e={},n=l(t,["video"]);return n!=null&&u(e,["video"],zS(n)),e}function oS(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],JS(n)),e}function sS(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);const r=l(t,["responseJsonSchema"]);r!=null&&u(e,["responseJsonSchema"],r);const i=l(t,["audioTimestamp"]);i!=null&&u(e,["audioTimestamp"],i);const o=l(t,["candidateCount"]);o!=null&&u(e,["candidateCount"],o);const s=l(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);const a=l(t,["frequencyPenalty"]);a!=null&&u(e,["frequencyPenalty"],a);const c=l(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);const d=l(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);const f=l(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);const h=l(t,["presencePenalty"]);h!=null&&u(e,["presencePenalty"],h);const p=l(t,["responseLogprobs"]);p!=null&&u(e,["responseLogprobs"],p);const m=l(t,["responseMimeType"]);m!=null&&u(e,["responseMimeType"],m);const _=l(t,["responseModalities"]);_!=null&&u(e,["responseModalities"],_);const w=l(t,["responseSchema"]);w!=null&&u(e,["responseSchema"],w);const E=l(t,["routingConfig"]);E!=null&&u(e,["routingConfig"],E);const y=l(t,["seed"]);y!=null&&u(e,["seed"],y);const g=l(t,["speechConfig"]);g!=null&&u(e,["speechConfig"],lm(g));const v=l(t,["stopSequences"]);v!=null&&u(e,["stopSequences"],v);const S=l(t,["temperature"]);S!=null&&u(e,["temperature"],S);const T=l(t,["thinkingConfig"]);T!=null&&u(e,["thinkingConfig"],T);const C=l(t,["topK"]);C!=null&&u(e,["topK"],C);const A=l(t,["topP"]);if(A!=null&&u(e,["topP"],A),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function lS(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],B(t,r)),n}function aS(t,e){const n={},r=l(e,["model"]);return r!=null&&u(n,["_url","name"],B(t,r)),n}function uS(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function cS(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function dS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);if(r!=null&&u(e,["imageSize"],r),l(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(l(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fS(t){const e={},n=l(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);const r=l(t,["imageSize"]);r!=null&&u(e,["imageSize"],r);const i=l(t,["outputMimeType"]);i!=null&&u(e,["imageOutputOptions","mimeType"],i);const o=l(t,["outputCompressionQuality"]);return o!=null&&u(e,["imageOutputOptions","compressionQuality"],o),e}function hS(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Xt(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function im(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["imageBytes"],Xt(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function ss(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Xt(n));const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function ut(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["imageBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Xt(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function pS(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],Qp(t,a)),r}function mS(t,e,n){const r={},i=l(e,["pageSize"]);n!==void 0&&i!=null&&u(n,["_query","pageSize"],i);const o=l(e,["pageToken"]);n!==void 0&&o!=null&&u(n,["_query","pageToken"],o);const s=l(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],Qp(t,a)),r}function gS(t,e){const n={},r=l(e,["config"]);return r!=null&&pS(t,r,n),n}function yS(t,e){const n={},r=l(e,["config"]);return r!=null&&mS(t,r,n),n}function vS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=Xp(i);Array.isArray(o)&&(o=o.map(s=>zl(s))),u(e,["models"],o)}return e}function _S(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["_self"]);if(i!=null){let o=Xp(i);Array.isArray(o)&&(o=o.map(s=>Jl(s))),u(e,["models"],o)}return e}function wS(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const r=l(t,["segmentationClasses"]);r!=null&&u(e,["maskClasses"],r);const i=l(t,["maskDilation"]);return i!=null&&u(e,["dilation"],i),e}function zl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["version"]);o!=null&&u(e,["version"],o);const s=l(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],bS(s));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);d!=null&&u(e,["supportedActions"],d);const f=l(t,["temperature"]);f!=null&&u(e,["temperature"],f);const h=l(t,["maxTemperature"]);h!=null&&u(e,["maxTemperature"],h);const p=l(t,["topP"]);p!=null&&u(e,["topP"],p);const m=l(t,["topK"]);m!=null&&u(e,["topK"],m);const _=l(t,["thinking"]);return _!=null&&u(e,["thinking"],_),e}function Jl(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["displayName"]);r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const o=l(t,["versionId"]);o!=null&&u(e,["version"],o);const s=l(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(p=>DE(p))),u(e,["endpoints"],h)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],FS(c));const d=l(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(p=>p)),u(e,["checkpoints"],h)}return e}function ES(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&u(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],UE(o));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],LE(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],sE(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function SS(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],ut(n)),e}function TS(t,e){const n={},r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const i=l(t,["baseSteps"]);e!==void 0&&i!=null&&u(e,["parameters","baseSteps"],i);const o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);const s=l(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);const h=l(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","compressionQuality"],h);const p=l(t,["enhancePrompt"]);e!==void 0&&p!=null&&u(e,["parameters","enhancePrompt"],p);const m=l(t,["labels"]);return e!==void 0&&m!=null&&u(e,["labels"],m),n}function CS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["source"]);i!=null&&AS(i,n);const o=l(e,["config"]);return o!=null&&TS(o,n),n}function IS(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>os(i))),u(e,["generatedImages"],r)}return e}function AS(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["personImage"]);e!==void 0&&i!=null&&u(e,["instances[0]","personImage","image"],ut(i));const o=l(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>SS(a))),u(e,["instances[0]","productImages"],s)}return n}function RS(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],ut(n));const r=l(t,["referenceId"]);r!=null&&u(e,["referenceId"],r);const i=l(t,["referenceType"]);i!=null&&u(e,["referenceType"],i);const o=l(t,["maskImageConfig"]);o!=null&&u(e,["maskImageConfig"],wS(o));const s=l(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],hE(s));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],a);const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],c),e}function om(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function sm(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const r=l(t,["safetyAttributes","scores"]);r!=null&&u(e,["scores"],r);const i=l(t,["contentType"]);return i!=null&&u(e,["contentType"],i),e}function PS(t){const e={},n=l(t,["category"]);if(n!=null&&u(e,["category"],n),l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=l(t,["threshold"]);return r!=null&&u(e,["threshold"],r),e}function kS(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],ut(n)),e}function NS(t,e){const n={},r=l(t,["mode"]);e!==void 0&&r!=null&&u(e,["parameters","mode"],r);const i=l(t,["maxPredictions"]);e!==void 0&&i!=null&&u(e,["parameters","maxPredictions"],i);const o=l(t,["confidenceThreshold"]);e!==void 0&&o!=null&&u(e,["parameters","confidenceThreshold"],o);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);const a=l(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a);const c=l(t,["labels"]);return e!==void 0&&c!=null&&u(e,["labels"],c),n}function xS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["source"]);i!=null&&DS(i,n);const o=l(e,["config"]);return o!=null&&NS(o,n),n}function MS(t){const e={},n=l(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>rS(i))),u(e,["generatedMasks"],r)}return e}function DS(t,e){const n={},r=l(t,["prompt"]);e!==void 0&&r!=null&&u(e,["instances[0]","prompt"],r);const i=l(t,["image"]);e!==void 0&&i!=null&&u(e,["instances[0]","image"],ut(i));const o=l(t,["scribbleImage"]);return e!==void 0&&o!=null&&u(e,["instances[0]","scribble"],kS(o)),n}function lm(t){const e={},n=l(t,["languageCode"]);n!=null&&u(e,["languageCode"],n);const r=l(t,["voiceConfig"]);if(r!=null&&u(e,["voiceConfig"],r),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function US(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],bE(n));const r=l(t,["retrievalConfig"]);return r!=null&&u(e,["retrievalConfig"],r),e}function LS(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&u(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&u(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],uS(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],cS(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function am(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>FE(p))),u(e,["functionDeclarations"],h)}const r=l(t,["retrieval"]);r!=null&&u(e,["retrieval"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&u(e,["googleSearchRetrieval"],i);const o=l(t,["computerUse"]);if(o!=null&&u(e,["computerUse"],o),l(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=l(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);const a=l(t,["enterpriseWebSearch"]);a!=null&&u(e,["enterpriseWebSearch"],a);const c=l(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);const d=l(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);const f=l(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function bS(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function FS(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const i=l(t,["updateTime"]);return i!=null&&u(e,["updateTime"],i),e}function OS(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function VS(t,e){const n={},r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&u(e,["description"],i);const o=l(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&u(e,["defaultCheckpointId"],o),n}function $S(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","name"],B(t,r));const i=l(e,["config"]);return i!=null&&OS(i,n),n}function BS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["config"]);return i!=null&&VS(i,n),n}function GS(t,e){const n={},r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const i=l(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&u(e,["parameters","safetySetting"],i);const o=l(t,["personGeneration"]);e!==void 0&&o!=null&&u(e,["parameters","personGeneration"],o);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&u(e,["parameters","includeRaiReason"],s);const a=l(t,["outputMimeType"]);e!==void 0&&a!=null&&u(e,["parameters","outputOptions","mimeType"],a);const c=l(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","compressionQuality"],c);const d=l(t,["enhanceInputImage"]);e!==void 0&&d!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],d);const f=l(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=l(t,["labels"]);e!==void 0&&h!=null&&u(e,["labels"],h);const p=l(t,["numberOfImages"]);e!==void 0&&p!=null&&u(e,["parameters","sampleCount"],p);const m=l(t,["mode"]);return e!==void 0&&m!=null&&u(e,["parameters","mode"],m),n}function qS(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["_url","model"],B(t,r));const i=l(e,["image"]);i!=null&&u(n,["instances[0]","image"],ut(i));const o=l(e,["upscaleFactor"]);o!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=l(e,["config"]);return s!=null&&GS(s,n),n}function HS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>os(o))),u(e,["generatedImages"],i)}return e}function zS(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["encodedVideo"]);r!=null&&u(e,["videoBytes"],Xt(r));const i=l(t,["encoding"]);return i!=null&&u(e,["mimeType"],i),e}function JS(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const r=l(t,["bytesBase64Encoded"]);r!=null&&u(e,["videoBytes"],Xt(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function WS(t){const e={},n=l(t,["image"]);n!=null&&u(e,["_self"],ut(n));const r=l(t,["maskMode"]);return r!=null&&u(e,["maskMode"],r),e}function KS(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],ss(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function YS(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],ut(n));const r=l(t,["referenceType"]);return r!=null&&u(e,["referenceType"],r),e}function um(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["uri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["encodedVideo"],Xt(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["encoding"],i),e}function cm(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const r=l(t,["videoBytes"]);r!=null&&u(e,["bytesBase64Encoded"],Xt(r));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QS="Content-Type",XS="X-Server-Timeout",ZS="User-Agent",Wl="x-goog-api-client",jS="1.30.0",eT=`google-genai-sdk/${jS}`,tT="v1beta1",nT="v1beta",Wd=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class rT{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:tT,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:nT,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&iT(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Kd(i),new Gl(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await Kd(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return jn(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:a,value:c}=yield K(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const h=JSON.parse(d);if("error"in h){const p=JSON.parse(JSON.stringify(h.error)),m=p.status,_=p.code,w=`got status: ${m}. ${JSON.stringify(h)}`;if(_>=400&&_<600)throw new rs({message:w,status:_})}}catch(h){if(h.name==="ApiError")throw h}s+=d;let f=s.match(Wd);for(;f;){const h=f[1];try{const p=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield K(new Gl(p)),s=s.slice(f[0].length),f=s.match(Wd)}catch(p){throw new Error(`exception parsing stream chunk ${h}. ${p}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=eT+" "+this.clientOptions.userAgentExtra;return e[ZS]=n,e[Wl]=n,e[QS]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(XS,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const c={file:i},d=this.getFileName(e),f=N("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,d,c,n==null?void 0:n.httpOptions);return o.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),c=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};r!=null&&r.customMetadata&&(h.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(h.chunkingConfig=r.chunkingConfig);const p=await this.fetchUploadUrl(d,a,c,f,h,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,p,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:c});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=d==null?void 0:d.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Kd(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new rs({message:i,status:n}):new Error(i)}}function iT(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?a[c]=r(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oT="mcp_used/unknown";let sT=!1;function dm(t){for(const e of t)if(lT(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sT}function fm(t){var e;const n=(e=t[Wl])!==null&&e!==void 0?e:"";t[Wl]=(n+` ${oT}`).trimStart()}function lT(t){return t!==null&&typeof t=="object"&&t instanceof uu}function aT(t,e=100){return jn(this,arguments,function*(){let r,i=0;for(;i<e;){const o=yield K(t.listTools({cursor:r}));for(const s of o.tools)yield yield K(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}class uu{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new uu(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const f of this.mcpClients)try{for(var a=!0,c=(n=void 0,qr(aT(f))),d;d=await c.next(),e=d.done,!e;a=!0){i=d.value,a=!1;const h=i;s.push(h);const p=h.name;if(o[p])throw new Error(`Duplicate function name ${p} found in MCP tools. Please ensure function names are unique.`);o[p]=f}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),e0(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uT(t,e,n){const r=new J_;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class cT{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=hT(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const f=new Promise(v=>{d=v}),h=e.callbacks,p=function(){d({})},m=this.apiClient,_={onopen:p,onmessage:v=>{uT(m,h.onmessage,v)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(v){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(v){}},w=this.webSocketFactory.create(c,fT(s),_);w.connect(),await f;const g={setup:{model:B(this.apiClient,e.model)}};return w.send(JSON.stringify(g)),new dT(w,this.apiClient)}}class dT{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Xw(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Qw(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(zn.PLAY)}pause(){this.sendPlaybackControl(zn.PAUSE)}stop(){this.sendPlaybackControl(zn.STOP)}resetContext(){this.sendPlaybackControl(zn.RESET_CONTEXT)}close(){this.conn.close()}}function fT(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function hT(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pT="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mT(t,e,n){const r=new z_;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=eE(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class gT{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new cT(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&dm(e.config.tools)&&fm(h);const p=wT(h);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p,f);else{const k=this.apiClient.getApiKey();let M="BidiGenerateContent",G="key";k!=null&&k.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",G="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${M}?${G}=${k}`}let m=()=>{};const _=new Promise(k=>{m=k}),w=e.callbacks,E=function(){var k;(k=w==null?void 0:w.onopen)===null||k===void 0||k.call(w),m({})},y=this.apiClient,g={onopen:E,onmessage:k=>{mT(y,w.onmessage,k)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(k){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(k){}},v=this.webSocketFactory.create(f,_T(p),g);v.connect(),await _;let S=B(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&S.startsWith("publishers/")){const k=this.apiClient.getProject(),M=this.apiClient.getLocation();S=`projects/${k}/locations/${M}/`+S}let T={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Mo.AUDIO]}:e.config.responseModalities=[Mo.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const C=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],A=[];for(const k of C)if(this.isCallableTool(k)){const M=k;A.push(await M.tool())}else A.push(k);A.length>0&&(e.config.tools=A);const P={model:S,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?T=Yw(this.apiClient,P):T=Kw(this.apiClient,P),delete T.config,v.send(JSON.stringify(T)),new vT(v,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yT={turnComplete:!0};class vT{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Qe(n.turns),e.isVertexAI()||(r=r.map(i=>is(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(pT)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},yT),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:jw(e)}:n={realtimeInput:Zw(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function _T(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function wT(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yd=10;function Qd(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(er(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function er(t){return"callTool"in t&&typeof t.callTool=="function"}function ET(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>er(i)))!==null&&r!==void 0?r:!1}function Xd(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(er(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function Zd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ST extends Rt{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!ET(n)||Qd(n.config))return await this.generateContentInternal(c);const d=Xd(n);if(d.length>0){const w=d.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let f,h;const p=Qe(c.contents),m=(o=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:Yd;let _=0;for(;_<m&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const w=f.candidates[0].content,E=[];for(const y of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(er(y)){const v=await y.callTool(f.functionCalls);E.push(...v)}_++,h={role:"user",parts:E},c.contents=Qe(c.contents),c.contents.push(w),c.contents.push(h),Zd(c.config)&&(p.push(w),p.push(h))}return Zd(c.config)&&(f.automaticFunctionCallingHistory=p),f},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),Qd(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=Xd(n);if(c.length>0){const h=c.map(p=>`tools[${p}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=c==null?void 0:c.safetyAttributes:s.push(c);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Cn(It.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((c=(a=n.source)===null||a===void 0?void 0:a.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async c=>er(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&dm(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),fm(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(er(s)){const a=s,c=await a.tool();for(const d of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(o.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);o.set(d.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:Yd;let s=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,f,h){var p,m;return jn(this,arguments,function*(){for(var _,w,E,y;a<o;){s&&(a++,s=!1);const T=yield K(d.processParamsMaybeAddMcpUsage(h)),C=yield K(d.generateContentStreamInternal(T)),A=[],P=[];try{for(var g=!0,v=(w=void 0,qr(C)),S;S=yield K(v.next()),_=S.done,!_;g=!0){y=S.value,g=!1;const k=y;if(yield yield K(k),k.candidates&&(!((p=k.candidates[0])===null||p===void 0)&&p.content)){P.push(k.candidates[0].content);for(const M of(m=k.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(a<o&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(M.functionCall.name)){const G=yield K(f.get(M.functionCall.name).callTool([M.functionCall]));A.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(k){w={error:k}}finally{try{!g&&!_&&(E=v.return)&&(yield K(E.call(v)))}finally{if(w)throw w.error}}if(A.length>0){s=!0;const k=new Pr;k.candidates=[{content:{role:"user",parts:A}}],yield yield K(k);const M=[];M.push(...P),M.push({role:"user",parts:A});const G=Qe(h.contents).concat(M);h.contents=G}else break}})}(this,c,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Hd(this.apiClient,e);return a=N("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=Jd(f),p=new Pr;return Object.assign(p,h),p})}else{const d=qd(this.apiClient,e);return a=N("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=zd(f),p=new Pr;return Object.assign(p,h),p})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=Hd(this.apiClient,e);return a=N("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return jn(this,arguments,function*(){var p,m,_,w;try{for(var E=!0,y=qr(h),g;g=yield K(y.next()),p=g.done,!p;E=!0){w=g.value,E=!1;const v=w,S=Jd(yield K(v.json()));S.sdkHttpResponse={headers:v.headers};const T=new Pr;Object.assign(T,S),yield yield K(T)}}catch(v){m={error:v}}finally{try{!E&&!p&&(_=y.return)&&(yield K(_.call(y)))}finally{if(m)throw m.error}}})})}else{const d=qd(this.apiClient,e);return a=N("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return jn(this,arguments,function*(){var p,m,_,w;try{for(var E=!0,y=qr(h),g;g=yield K(y.next()),p=g.done,!p;E=!0){w=g.value,E=!1;const v=w,S=zd(yield K(v.json()));S.sdkHttpResponse={headers:v.headers};const T=new Pr;Object.assign(T,S),yield yield K(T)}}catch(v){m={error:v}}finally{try{!E&&!p&&(_=y.return)&&(yield K(_.call(y)))}finally{if(m)throw m.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=NE(this.apiClient,e);return a=N("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=ME(f),p=new Rd;return Object.assign(p,h),p})}else{const d=kE(this.apiClient,e);return a=N("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=xE(f),p=new Rd;return Object.assign(p,h),p})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=qE(this.apiClient,e);return a=N("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=zE(f),p=new Pd;return Object.assign(p,h),p})}else{const d=GE(this.apiClient,e);return a=N("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=HE(f),p=new Pd;return Object.assign(p,h),p})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=IE(this.apiClient,e);return o=N("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=AE(c),f=new U_;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=qS(this.apiClient,e);return o=N("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=HS(c),f=new L_;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=CS(this.apiClient,e);return o=N("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=IS(c),f=new b_;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=xS(this.apiClient,e);return o=N("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=MS(c),f=new F_;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=aS(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Jl(f))}else{const d=lS(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>zl(f))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=yS(this.apiClient,e);return a=N("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=_S(f),p=new kd;return Object.assign(p,h),p})}else{const d=gS(this.apiClient,e);return a=N("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=vS(f),p=new kd;return Object.assign(p,h),p})}}async update(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=BS(this.apiClient,e);return a=N("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>Jl(f))}else{const d=$S(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>zl(f))}}async delete(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=EE(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=TE(f),p=new Nd;return Object.assign(p,h),p})}else{const d=wE(this.apiClient,e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=SE(f),p=new Nd;return Object.assign(p,h),p})}}async countTokens(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=yE(this.apiClient,e);return a=N("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=_E(f),p=new xd;return Object.assign(p,h),p})}else{const d=gE(this.apiClient,e);return a=N("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=vE(f),p=new xd;return Object.assign(p,h),p})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=uE(this.apiClient,e);return o=N("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const d=cE(c),f=new O_;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=XE(this.apiClient,e);return a=N("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=YE(f),p=new Do;return Object.assign(p,h),p})}else{const d=QE(this.apiClient,e);return a=N("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const h=KE(f),p=new Do;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TT extends Rt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=P_(e);return a=N("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const d=R_(e);return a=N("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=w_(e);return o=N("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CT(t){const e={},n=l(t,["data"]);if(n!=null&&u(e,["data"],n),l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function IT(t){const e={},n=l(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>UT(o))),u(e,["parts"],i)}const r=l(t,["role"]);return r!=null&&u(e,["role"],r),e}function AT(t,e,n){const r={},i=l(e,["expireTime"]);n!==void 0&&i!=null&&u(n,["expireTime"],i);const o=l(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&u(n,["newSessionExpireTime"],o);const s=l(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],DT(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),r}function RT(t,e){const n={},r=l(e,["config"]);return r!=null&&u(n,["config"],AT(t,r,n)),n}function PT(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const r=l(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function kT(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const r=l(t,["args"]);r!=null&&u(e,["args"],r);const i=l(t,["name"]);if(i!=null&&u(e,["name"],i),l(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(l(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function xT(t){const e={};if(l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(l(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=l(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function MT(t,e){const n={},r=l(t,["generationConfig"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig"],r);const i=l(t,["responseModalities"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","responseModalities"],i);const o=l(t,["temperature"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","temperature"],o);const s=l(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);const h=l(t,["speechConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","speechConfig"],au(h));const p=l(t,["thinkingConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","thinkingConfig"],p);const m=l(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],m);const _=l(t,["systemInstruction"]);e!==void 0&&_!=null&&u(e,["setup","systemInstruction"],IT(Ee(_)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let C=pr(w);Array.isArray(C)&&(C=C.map(A=>bT(hr(A)))),u(e,["setup","tools"],C)}const E=l(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],LT(E));const y=l(t,["inputAudioTranscription"]);e!==void 0&&y!=null&&u(e,["setup","inputAudioTranscription"],y);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&u(e,["setup","outputAudioTranscription"],g);const v=l(t,["realtimeInputConfig"]);e!==void 0&&v!=null&&u(e,["setup","realtimeInputConfig"],v);const S=l(t,["contextWindowCompression"]);e!==void 0&&S!=null&&u(e,["setup","contextWindowCompression"],S);const T=l(t,["proactivity"]);return e!==void 0&&T!=null&&u(e,["setup","proactivity"],T),n}function DT(t,e){const n={},r=l(e,["model"]);r!=null&&u(n,["setup","model"],B(t,r));const i=l(e,["config"]);return i!=null&&u(n,["config"],MT(i,n)),n}function UT(t){const e={},n=l(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);const r=l(t,["codeExecutionResult"]);r!=null&&u(e,["codeExecutionResult"],r);const i=l(t,["executableCode"]);i!=null&&u(e,["executableCode"],i);const o=l(t,["fileData"]);o!=null&&u(e,["fileData"],PT(o));const s=l(t,["functionCall"]);s!=null&&u(e,["functionCall"],kT(s));const a=l(t,["functionResponse"]);a!=null&&u(e,["functionResponse"],a);const c=l(t,["inlineData"]);c!=null&&u(e,["inlineData"],CT(c));const d=l(t,["text"]);d!=null&&u(e,["text"],d);const f=l(t,["thought"]);f!=null&&u(e,["thought"],f);const h=l(t,["thoughtSignature"]);h!=null&&u(e,["thoughtSignature"],h);const p=l(t,["videoMetadata"]);return p!=null&&u(e,["videoMetadata"],p),e}function LT(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(h=>h)),u(e,["functionDeclarations"],f)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);const i=l(t,["computerUse"]);i!=null&&u(e,["computerUse"],i);const o=l(t,["fileSearch"]);o!=null&&u(e,["fileSearch"],o);const s=l(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],NT(a));const c=l(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],xT(c));const d=l(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FT(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function OT(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=FT(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];o&&c.push(o),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class VT extends Rt{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=RT(this.apiClient,e);o=N("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const c=OT(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $T(t,e){const n={},r=l(t,["displayName"]);return e!==void 0&&r!=null&&u(e,["displayName"],r),n}function BT(t){const e={},n=l(t,["config"]);return n!=null&&$T(n,e),e}function GT(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function qT(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&GT(r,e),e}function HT(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function zT(t,e){const n={},r=l(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["customMetadata"],o)}const i=l(t,["chunkingConfig"]);return e!==void 0&&i!=null&&u(e,["chunkingConfig"],i),n}function JT(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const r=l(t,["metadata"]);r!=null&&u(e,["metadata"],r);const i=l(t,["done"]);i!=null&&u(e,["done"],i);const o=l(t,["error"]);o!=null&&u(e,["error"],o);const s=l(t,["response"]);return s!=null&&u(e,["response"],KT(s)),e}function WT(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["fileName"]);r!=null&&u(e,["fileName"],r);const i=l(t,["config"]);return i!=null&&zT(i,e),e}function KT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["parent"]);r!=null&&u(e,["parent"],r);const i=l(t,["documentName"]);return i!=null&&u(e,["documentName"],i),e}function YT(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function QT(t){const e={},n=l(t,["config"]);return n!=null&&YT(n,e),e}function XT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["fileSearchStores"],o)}return e}function ZT(t,e){const n={},r=l(t,["mimeType"]);e!==void 0&&r!=null&&u(e,["mimeType"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const o=l(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(c=>c)),u(e,["customMetadata"],a)}const s=l(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),n}function jT(t){const e={},n=l(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);const r=l(t,["config"]);return r!=null&&ZT(r,e),e}function eC(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tC(t,e){const n={},r=l(t,["force"]);return e!==void 0&&r!=null&&u(e,["_query","force"],r),n}function nC(t){const e={},n=l(t,["name"]);n!=null&&u(e,["_url","name"],n);const r=l(t,["config"]);return r!=null&&tC(r,e),e}function rC(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function iC(t,e){const n={},r=l(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);const i=l(t,["pageToken"]);return e!==void 0&&i!=null&&u(e,["_query","pageToken"],i),n}function oC(t){const e={},n=l(t,["parent"]);n!=null&&u(e,["_url","parent"],n);const r=l(t,["config"]);return r!=null&&iC(r,e),e}function sC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const r=l(t,["nextPageToken"]);r!=null&&u(e,["nextPageToken"],r);const i=l(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),u(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lC extends Rt{constructor(e){super(),this.apiClient=e,this.list=async n=>new Cn(It.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=rC(e);return o=N("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=nC(e);i=N("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=oC(e);return o=N("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=sC(c),f=new V_;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aC extends Rt{constructor(e,n=new lC(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Cn(It.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=BT(e);return o=N("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=HT(e);return o=N("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=qT(e);i=N("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=QT(e);return o=N("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=XT(c),f=new $_;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=jT(e);return o=N("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=eC(c),f=new B_;return Object.assign(f,d),f})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=WT(e);return o=N("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const d=JT(c),f=new ru;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uC(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function cC(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function dC(t,e,n){const r={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=l(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&u(e,["displayName"],i),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=l(t,["epochCount"]);e!==void 0&&o!=null&&u(e,["tuningTask","hyperparameters","epochCount"],o);const s=l(t,["learningRateMultiplier"]);if(s!=null&&u(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=l(t,["batchSize"]);e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","batchSize"],a);const c=l(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(l(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function fC(t,e,n){const r={};let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const m=l(t,["validationDataset"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec"],jd(m))}else if(i==="PREFERENCE_TUNING"){const m=l(t,["validationDataset"]);e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec"],jd(m))}const o=l(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&u(e,["tunedModelDisplayName"],o);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);let a=l(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const m=l(t,["epochCount"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],m)}else if(a==="PREFERENCE_TUNING"){const m=l(t,["epochCount"]);e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],m)}let c=l(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const m=l(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],m)}else if(c==="PREFERENCE_TUNING"){const m=l(t,["learningRateMultiplier"]);e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],m)}let d=l(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const m=l(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],m)}else if(d==="PREFERENCE_TUNING"){const m=l(t,["exportLastCheckpointOnly"]);e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],m)}let f=l(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const m=l(t,["adapterSize"]);e!==void 0&&m!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],m)}else if(f==="PREFERENCE_TUNING"){const m=l(t,["adapterSize"]);e!==void 0&&m!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],m)}if(l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=l(t,["labels"]);e!==void 0&&h!=null&&u(e,["labels"],h);const p=l(t,["beta"]);return e!==void 0&&p!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],p),r}function hC(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const i=l(t,["preTunedModel"]);i!=null&&u(n,["preTunedModel"],i);const o=l(t,["trainingDataset"]);o!=null&&CC(o);const s=l(t,["config"]);return s!=null&&dC(s,n),n}function pC(t,e){const n={},r=l(t,["baseModel"]);r!=null&&u(n,["baseModel"],r);const i=l(t,["preTunedModel"]);i!=null&&u(n,["preTunedModel"],i);const o=l(t,["trainingDataset"]);o!=null&&IC(o,n,e);const s=l(t,["config"]);return s!=null&&fC(s,n,e),n}function mC(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function gC(t,e){const n={},r=l(t,["name"]);return r!=null&&u(n,["_url","name"],r),n}function yC(t,e,n){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function vC(t,e,n){const r={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const o=l(t,["pageToken"]);e!==void 0&&o!=null&&u(e,["_query","pageToken"],o);const s=l(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),r}function _C(t,e){const n={},r=l(t,["config"]);return r!=null&&yC(r,n),n}function wC(t,e){const n={},r=l(t,["config"]);return r!=null&&vC(r,n),n}function EC(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&u(n,["nextPageToken"],i);const o=l(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>hm(a))),u(n,["tuningJobs"],s)}return n}function SC(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const i=l(t,["nextPageToken"]);i!=null&&u(n,["nextPageToken"],i);const o=l(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Kl(a))),u(n,["tuningJobs"],s)}return n}function TC(t,e){const n={},r=l(t,["name"]);r!=null&&u(n,["model"],r);const i=l(t,["name"]);return i!=null&&u(n,["endpoint"],i),n}function CC(t,e){const n={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=l(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),u(n,["examples","examples"],i)}return n}function IC(t,e,n){const r={};let i=l(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=l(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=l(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=l(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function hm(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&u(n,["name"],i);const o=l(t,["state"]);o!=null&&u(n,["state"],Kp(o));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["tuningTask","startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["description"]);f!=null&&u(n,["description"],f);const h=l(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);const p=l(t,["_self"]);return p!=null&&u(n,["tunedModel"],TC(p)),n}function Kl(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&u(n,["name"],i);const o=l(t,["state"]);o!=null&&u(n,["state"],Kp(o));const s=l(t,["createTime"]);s!=null&&u(n,["createTime"],s);const a=l(t,["startTime"]);a!=null&&u(n,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(n,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);const f=l(t,["error"]);f!=null&&u(n,["error"],f);const h=l(t,["description"]);h!=null&&u(n,["description"],h);const p=l(t,["baseModel"]);p!=null&&u(n,["baseModel"],p);const m=l(t,["tunedModel"]);m!=null&&u(n,["tunedModel"],m);const _=l(t,["preTunedModel"]);_!=null&&u(n,["preTunedModel"],_);const w=l(t,["supervisedTuningSpec"]);w!=null&&u(n,["supervisedTuningSpec"],w);const E=l(t,["preferenceOptimizationSpec"]);E!=null&&u(n,["preferenceOptimizationSpec"],E);const y=l(t,["tuningDataStats"]);y!=null&&u(n,["tuningDataStats"],y);const g=l(t,["encryptionSpec"]);g!=null&&u(n,["encryptionSpec"],g);const v=l(t,["partnerModelTuningSpec"]);v!=null&&u(n,["partnerModelTuningSpec"],v);const S=l(t,["customBaseModel"]);S!=null&&u(n,["customBaseModel"],S);const T=l(t,["experiment"]);T!=null&&u(n,["experiment"],T);const C=l(t,["labels"]);C!=null&&u(n,["labels"],C);const A=l(t,["outputUri"]);A!=null&&u(n,["outputUri"],A);const P=l(t,["pipelineJob"]);P!=null&&u(n,["pipelineJob"],P);const k=l(t,["serviceAccount"]);k!=null&&u(n,["serviceAccount"],k);const M=l(t,["tunedModelDisplayName"]);M!=null&&u(n,["tunedModelDisplayName"],M);const G=l(t,["veoTuningSpec"]);return G!=null&&u(n,["veoTuningSpec"],G),n}function AC(t,e){const n={},r=l(t,["sdkHttpResponse"]);r!=null&&u(n,["sdkHttpResponse"],r);const i=l(t,["name"]);i!=null&&u(n,["name"],i);const o=l(t,["metadata"]);o!=null&&u(n,["metadata"],o);const s=l(t,["done"]);s!=null&&u(n,["done"],s);const a=l(t,["error"]);return a!=null&&u(n,["error"],a),n}function jd(t,e){const n={},r=l(t,["gcsUri"]);r!=null&&u(n,["validationDatasetUri"],r);const i=l(t,["vertexDatasetResource"]);return i!=null&&u(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RC extends Rt{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Cn(It.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Bl.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=gC(e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>Kl(f))}else{const d=mC(e);return a=N("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>hm(f))}}async listInternal(e){var n,r,i,o;let s,a="",c={};if(this.apiClient.isVertexAI()){const d=wC(e);return a=N("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=SC(f),p=new Md;return Object.assign(p,h),p})}else{const d=_C(e);return a=N("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:f.headers},p})),s.then(f=>{const h=EC(f),p=new Md;return Object.assign(p,h),p})}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const c=cC(e);s=N("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=uC(e);s=N("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=pC(e,e);return o=N("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>Kl(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hC(e);return o=N("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>AC(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PC{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kC=1024*1024*8,NC=3,xC=1e3,MC=2,Lo="x-goog-upload-status";async function DC(t,e,n){var r;const i=await pm(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Lo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function UC(t,e,n){var r;const i=await pm(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Lo])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=Gp(o),a=new iu;return Object.assign(a,s),a}async function pm(t,e,n){var r,i;let o=0,s=0,a=new Gl(new Response),c="upload";for(o=t.size;s<o;){const d=Math.min(kC,o-s),f=t.slice(s,s+d);s+d>=o&&(c+=", finalize");let h=0,p=xC;for(;h<NC&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[Lo]));)h++,await bC(p),p=p*MC;if(s+=d,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[Lo])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function LC(t){return{size:t.size,type:t.type}}function bC(t){return new Promise(e=>setTimeout(e,t))}class FC{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DC(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UC(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await LC(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class OC{create(e,n,r){return new VC(e,n,r)}}class VC{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ef="x-goog-api-key";class $C{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(ef)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ef,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BC="gl-node/";class GC{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=v_(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new $C(this.apiKey);this.apiClient=new rT({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:BC+"web",uploader:new FC,downloader:new PC}),this.models=new ST(this.apiClient),this.live=new gT(this.apiClient,i,new OC),this.batches=new W0(this.apiClient),this.chats=new Pw(this.models,this.apiClient),this.caches=new Iw(this.apiClient),this.files=new Ow(this.apiClient),this.operations=new TT(this.apiClient),this.authTokens=new VT(this.apiClient),this.tunings=new RC(this.apiClient),this.fileSearchStores=new aC(this.apiClient)}}const qC={type:pe.OBJECT,properties:{transcription:{type:pe.STRING,description:"The full verbatim transcription of the audio."},summary:{type:pe.STRING,description:"A brief summary of the conversation context."},grammarPoints:{type:pe.ARRAY,items:{type:pe.OBJECT,properties:{title:{type:pe.STRING,description:"Name of the grammar rule or concept."},explanation:{type:pe.STRING,description:"Clear explanation for a student."},example:{type:pe.STRING,description:"The snippet from the audio illustrating this point."},difficulty:{type:pe.STRING,enum:["Beginner","Intermediate","Advanced"]}},required:["title","explanation","example","difficulty"]}}},required:["transcription","summary","grammarPoints"]},HC=async(t,e,n)=>{if(!n)throw new Error("Gemini API Key is missing. Please configure it in settings.");const r=new GC({apiKey:n});try{const i=await r.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:`You are an expert linguistics teacher. 
            1. Listen to the audio carefully and provide a verbatim transcription.
            2. Identify 3 to 5 distinct, learnable grammar points or useful expressions appearing in this dialogue.
            3. Format the output strictly as JSON.`}]},config:{responseMimeType:"application/json",responseSchema:qC}});if(i.text)return JSON.parse(i.text);throw new Error("No response text received from Gemini.")}catch(i){throw console.error("Gemini Analysis Error:",i),i}};var Yl=function(t,e){return Yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Yl(t,e)};function mm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yl(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var bo=function(){return bo=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},bo.apply(this,arguments)};function gr(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function gm(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(i<3?s(o):i>3?s(e,n,o):s(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function ym(t,e){return function(n,r){e(n,r,t)}}function vm(t,e,n,r,i,o){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",d=!e&&t?r.static?t:t.prototype:null,f=e||(d?Object.getOwnPropertyDescriptor(d,r.name):{}),h,p=!1,m=n.length-1;m>=0;m--){var _={};for(var w in r)_[w]=w==="access"?{}:r[w];for(var w in r.access)_.access[w]=r.access[w];_.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(y||null))};var E=(0,n[m])(a==="accessor"?{get:f.get,set:f.set}:f[c],_);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(h=s(E.get))&&(f.get=h),(h=s(E.set))&&(f.set=h),(h=s(E.init))&&i.unshift(h)}else(h=s(E))&&(a==="field"?i.unshift(h):f[c]=h)}d&&Object.defineProperty(d,r.name,f),p=!0}function _m(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function wm(t){return typeof t=="symbol"?t:"".concat(t)}function Em(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function Sm(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function U(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(f){try{d(r.next(f))}catch(h){s(h)}}function c(f){try{d(r.throw(f))}catch(h){s(h)}}function d(f){f.done?o(f.value):i(f.value).then(a,c)}d((r=r.apply(t,e||[])).next())})}function Tm(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(d){return function(f){return c([d,f])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(n=0)),n;)try{if(r=1,i&&(o=d[0]&2?i.return:d[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,d[1])).done)return o;switch(i=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){n.label=d[1];break}if(d[0]===6&&n.label<o[1]){n.label=o[1],o=d;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(d);break}o[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(f){d=[6,f],i=0}finally{r=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var ls=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function Cm(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&ls(e,t,n)}function Fo(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cu(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Im(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(cu(arguments[e]));return t}function Am(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Rm(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function ur(t){return this instanceof ur?(this.v=t,this):new ur(t)}function Pm(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(_){return Promise.resolve(_).then(m,h)}}function a(m,_){r[m]&&(i[m]=function(w){return new Promise(function(E,y){o.push([m,w,E,y])>1||c(m,w)})},_&&(i[m]=_(i[m])))}function c(m,_){try{d(r[m](_))}catch(w){p(o[0][3],w)}}function d(m){m.value instanceof ur?Promise.resolve(m.value.v).then(f,h):p(o[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function p(m,_){m(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function km(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(s){return(n=!n)?{value:ur(t[i](s)),done:!1}:o?o(s):s}:o}}function Nm(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Fo=="function"?Fo(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(d){o({value:d,done:a})},s)}}function xm(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var zC=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ql=function(t){return Ql=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Ql(t)};function Mm(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Ql(t),r=0;r<n.length;r++)n[r]!=="default"&&ls(e,t,n[r]);return zC(e,t),e}function Dm(t){return t&&t.__esModule?t:{default:t}}function Um(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Lm(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function bm(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Fm(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var JC=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Om(t){function e(o){t.error=t.hasError?new JC(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(s){return e(s),i()})}else r|=1}catch(s){e(s)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Vm(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,s){return r?e?".jsx":".js":i&&(!o||!s)?n:i+o+"."+s.toLowerCase()+"js"}):t}const WC={__extends:mm,__assign:bo,__rest:gr,__decorate:gm,__param:ym,__esDecorate:vm,__runInitializers:_m,__propKey:wm,__setFunctionName:Em,__metadata:Sm,__awaiter:U,__generator:Tm,__createBinding:ls,__exportStar:Cm,__values:Fo,__read:cu,__spread:Im,__spreadArrays:Am,__spreadArray:Rm,__await:ur,__asyncGenerator:Pm,__asyncDelegator:km,__asyncValues:Nm,__makeTemplateObject:xm,__importStar:Mm,__importDefault:Dm,__classPrivateFieldGet:Um,__classPrivateFieldSet:Lm,__classPrivateFieldIn:bm,__addDisposableResource:Fm,__disposeResources:Om,__rewriteRelativeImportExtension:Vm},KC=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Fm,get __assign(){return bo},__asyncDelegator:km,__asyncGenerator:Pm,__asyncValues:Nm,__await:ur,__awaiter:U,__classPrivateFieldGet:Um,__classPrivateFieldIn:bm,__classPrivateFieldSet:Lm,__createBinding:ls,__decorate:gm,__disposeResources:Om,__esDecorate:vm,__exportStar:Cm,__extends:mm,__generator:Tm,__importDefault:Dm,__importStar:Mm,__makeTemplateObject:xm,__metadata:Sm,__param:ym,__propKey:wm,__read:cu,__rest:gr,__rewriteRelativeImportExtension:Vm,__runInitializers:_m,__setFunctionName:Em,__spread:Im,__spreadArray:Rm,__spreadArrays:Am,__values:Fo,default:WC},Symbol.toStringTag,{value:"Module"})),YC=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class du extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class QC extends du{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class tf extends du{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nf extends du{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Xl;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Xl||(Xl={}));class XC{constructor(e,{headers:n={},customFetch:r,region:i=Xl.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=YC(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return U(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{const{headers:a,method:c,body:d,signal:f,timeout:h}=r;let p={},{region:m}=r;m||(m=this.region);const _=new URL(`${this.url}/${n}`);m&&m!=="any"&&(p["x-region"]=m,_.searchParams.set("forceFunctionRegion",m));let w;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=d):typeof d=="string"?(p["Content-Type"]="text/plain",w=d):typeof FormData<"u"&&d instanceof FormData?w=d:(p["Content-Type"]="application/json",w=JSON.stringify(d)):w=d;let E=f;h&&(s=new AbortController,o=setTimeout(()=>s.abort(),h),f?(E=s.signal,f.addEventListener("abort",()=>s.abort())):E=s.signal);const y=yield this.fetch(_.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:w,signal:E}).catch(T=>{throw new QC(T)}),g=y.headers.get("x-relay-error");if(g&&g==="true")throw new tf(y);if(!y.ok)throw new nf(y);let v=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return v==="application/json"?S=yield y.json():v==="application/octet-stream"||v==="application/pdf"?S=yield y.blob():v==="text/event-stream"?S=y:v==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(a){return{data:null,error:a,response:a instanceof nf||a instanceof tf?a.context:void 0}}finally{o&&clearTimeout(o)}})}}var Ie={};const yr=Tg(KC);var Oi={},Vi={},$i={},Bi={},Gi={},qi={},rf;function $m(){if(rf)return qi;rf=1,Object.defineProperty(qi,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return qi.default=t,qi}var of;function Bm(){if(of)return Gi;of=1,Object.defineProperty(Gi,"__esModule",{value:!0});const e=yr.__importDefault($m());class n{constructor(i){var o,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,h,p;let m=null,_=null,w=null,E=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const T=await c.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?_=T:_=JSON.parse(T))}const v=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),S=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&S&&S.length>1&&(w=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(m={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,w=null,E=406,y="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const v=await c.text();try{m=JSON.parse(v),Array.isArray(m)&&c.status===404&&(_=[],m=null,E=200,y="OK")}catch{c.status===404&&v===""?(E=204,y="No Content"):m={message:v}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,E=200,y="OK"),m&&this.shouldThrowOnError)throw new e.default(m)}return{error:m,data:_,count:w,status:E,statusText:y}});return this.shouldThrowOnError||(a=a.catch(c=>{var d,f,h,p,m,_;let w="";const E=c==null?void 0:c.cause;if(E){const y=(d=E==null?void 0:E.message)!==null&&d!==void 0?d:"",g=(f=E==null?void 0:E.code)!==null&&f!==void 0?f:"";w=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,w+=`

Caused by: ${(p=E==null?void 0:E.name)!==null&&p!==void 0?p:"Error"}: ${y}`,g&&(w+=` (${g})`),E!=null&&E.stack&&(w+=`
${E.stack}`)}else w=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(_=c==null?void 0:c.name)!==null&&_!==void 0?_:"FetchError"}: ${c==null?void 0:c.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(i,o)}returns(){return this}overrideTypes(){return this}}return Gi.default=n,Gi}var sf;function Gm(){if(sf)return Bi;sf=1,Object.defineProperty(Bi,"__esModule",{value:!0});const e=yr.__importDefault(Bm());class n extends e.default{select(i){let o=!1;const s=(i??"*").split("").map(a=>/\s/.test(a)&&!o?"":(a==='"'&&(o=!o),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:s,foreignTable:a,referencedTable:c=a}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${i}.${o?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:s=o}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,o,{foreignTable:s,referencedTable:a=s}={}){const c=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(d,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:s=!1,buffers:a=!1,wal:c=!1,format:d="text"}={}){var f;const h=[i?"analyze":null,o?"verbose":null,s?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),p=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${p}"; options=${h};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Bi.default=n,Bi}var lf;function fu(){if(lf)return $i;lf=1,Object.defineProperty($i,"__esModule",{value:!0});const e=yr.__importDefault(Gm()),n=new RegExp("[,()]");class r extends e.default{eq(o,s){return this.url.searchParams.append(o,`eq.${s}`),this}neq(o,s){return this.url.searchParams.append(o,`neq.${s}`),this}gt(o,s){return this.url.searchParams.append(o,`gt.${s}`),this}gte(o,s){return this.url.searchParams.append(o,`gte.${s}`),this}lt(o,s){return this.url.searchParams.append(o,`lt.${s}`),this}lte(o,s){return this.url.searchParams.append(o,`lte.${s}`),this}like(o,s){return this.url.searchParams.append(o,`like.${s}`),this}likeAllOf(o,s){return this.url.searchParams.append(o,`like(all).{${s.join(",")}}`),this}likeAnyOf(o,s){return this.url.searchParams.append(o,`like(any).{${s.join(",")}}`),this}ilike(o,s){return this.url.searchParams.append(o,`ilike.${s}`),this}ilikeAllOf(o,s){return this.url.searchParams.append(o,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(o,s){return this.url.searchParams.append(o,`ilike(any).{${s.join(",")}}`),this}regexMatch(o,s){return this.url.searchParams.append(o,`match.${s}`),this}regexIMatch(o,s){return this.url.searchParams.append(o,`imatch.${s}`),this}is(o,s){return this.url.searchParams.append(o,`is.${s}`),this}isDistinct(o,s){return this.url.searchParams.append(o,`isdistinct.${s}`),this}in(o,s){const a=Array.from(new Set(s)).map(c=>typeof c=="string"&&n.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${a})`),this}contains(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cs.{${s.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(s)}`),this}containedBy(o,s){return typeof s=="string"?this.url.searchParams.append(o,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(o,`cd.{${s.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(s)}`),this}rangeGt(o,s){return this.url.searchParams.append(o,`sr.${s}`),this}rangeGte(o,s){return this.url.searchParams.append(o,`nxl.${s}`),this}rangeLt(o,s){return this.url.searchParams.append(o,`sl.${s}`),this}rangeLte(o,s){return this.url.searchParams.append(o,`nxr.${s}`),this}rangeAdjacent(o,s){return this.url.searchParams.append(o,`adj.${s}`),this}overlaps(o,s){return typeof s=="string"?this.url.searchParams.append(o,`ov.${s}`):this.url.searchParams.append(o,`ov.{${s.join(",")}}`),this}textSearch(o,s,{config:a,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=a===void 0?"":`(${a})`;return this.url.searchParams.append(o,`${d}fts${f}.${s}`),this}match(o){return Object.entries(o).forEach(([s,a])=>{this.url.searchParams.append(s,`eq.${a}`)}),this}not(o,s,a){return this.url.searchParams.append(o,`not.${s}.${a}`),this}or(o,{foreignTable:s,referencedTable:a=s}={}){const c=a?`${a}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,s,a){return this.url.searchParams.append(o,`${s}.${a}`),this}}return $i.default=r,$i}var af;function qm(){if(af)return Vi;af=1,Object.defineProperty(Vi,"__esModule",{value:!0});const e=yr.__importDefault(fu());class n{constructor(i,{headers:o={},schema:s,fetch:a}){this.url=i,this.headers=new Headers(o),this.schema=s,this.fetch=a}select(i,o){const{head:s=!1,count:a}=o??{},c=s?"HEAD":"GET";let d=!1;const f=(i??"*").split("").map(h=>/\s/.test(h)&&!d?"":(h==='"'&&(d=!d),h)).join("");return this.url.searchParams.set("select",f),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:s=!0}={}){var a;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((f,h)=>f.concat(Object.keys(h)),[]);if(d.length>0){const f=[...new Set(d)].map(h=>`"${h}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:s=!1,count:a,defaultToNull:c=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(i,{count:o}={}){var s;const a="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var o;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Vi.default=n,Vi}var uf;function ZC(){if(uf)return Oi;uf=1,Object.defineProperty(Oi,"__esModule",{value:!0});const t=yr,e=t.__importDefault(qm()),n=t.__importDefault(fu());class r{constructor(o,{headers:s={},schema:a,fetch:c}={}){this.url=o,this.headers=new Headers(s),this.schemaName=a,this.fetch=c}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const s=new URL(`${this.url}/${o}`);return new e.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,s={},{head:a=!1,get:c=!1,count:d}={}){var f;let h;const p=new URL(`${this.url}/rpc/${o}`);let m;a||c?(h=a?"HEAD":"GET",Object.entries(s).filter(([w,E])=>E!==void 0).map(([w,E])=>[w,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([w,E])=>{p.searchParams.append(w,E)})):(h="POST",m=s);const _=new Headers(this.headers);return d&&_.set("Prefer",`count=${d}`),new n.default({method:h,url:p,headers:_,schema:this.schemaName,body:m,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Oi.default=r,Oi}Object.defineProperty(Ie,"__esModule",{value:!0});var Hm=Ie.PostgrestError=eg=Ie.PostgrestBuilder=Zm=Ie.PostgrestTransformBuilder=Qm=Ie.PostgrestFilterBuilder=Km=Ie.PostgrestQueryBuilder=Jm=Ie.PostgrestClient=void 0;const vr=yr,zm=vr.__importDefault(ZC());var Jm=Ie.PostgrestClient=zm.default;const Wm=vr.__importDefault(qm());var Km=Ie.PostgrestQueryBuilder=Wm.default;const Ym=vr.__importDefault(fu());var Qm=Ie.PostgrestFilterBuilder=Ym.default;const Xm=vr.__importDefault(Gm());var Zm=Ie.PostgrestTransformBuilder=Xm.default;const jm=vr.__importDefault(Bm());var eg=Ie.PostgrestBuilder=jm.default;const tg=vr.__importDefault($m());Hm=Ie.PostgrestError=tg.default;var ng=Ie.default={PostgrestClient:zm.default,PostgrestQueryBuilder:Wm.default,PostgrestFilterBuilder:Ym.default,PostgrestTransformBuilder:Xm.default,PostgrestBuilder:jm.default,PostgrestError:tg.default};const jC=Eg({__proto__:null,get PostgrestBuilder(){return eg},get PostgrestClient(){return Jm},get PostgrestError(){return Hm},get PostgrestFilterBuilder(){return Qm},get PostgrestQueryBuilder(){return Km},get PostgrestTransformBuilder(){return Zm},default:ng},[Ie]),{PostgrestClient:eI,PostgrestQueryBuilder:pR,PostgrestFilterBuilder:mR,PostgrestTransformBuilder:gR,PostgrestBuilder:yR,PostgrestError:vR}=ng||jC;class tI{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const nI="2.84.0",rI=`realtime-js/${nI}`,rg="1.0.0",iI="2.0.0",cf=rg,Zl=1e4,oI=1e3,sI=100;var an;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(an||(an={}));var se;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(se||(se={}));var it;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(it||(it={}));var jl;(function(t){t.websocket="websocket"})(jl||(jl={}));var un;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(un||(un={}));class lI{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r,i,o;const s=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",c=(r=e.join_ref)!==null&&r!==void 0?r:"",d=e.payload.event,f=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(p),_=0;m.setUint8(_++,this.KINDS.userBroadcastPush),m.setUint8(_++,c.length),m.setUint8(_++,a.length),m.setUint8(_++,s.length),m.setUint8(_++,d.length),m.setUint8(_++,this.BINARY_ENCODING),Array.from(c,E=>m.setUint8(_++,E.charCodeAt(0))),Array.from(a,E=>m.setUint8(_++,E.charCodeAt(0))),Array.from(s,E=>m.setUint8(_++,E.charCodeAt(0))),Array.from(d,E=>m.setUint8(_++,E.charCodeAt(0)));var w=new Uint8Array(p.byteLength+f.byteLength);return w.set(new Uint8Array(p),0),w.set(new Uint8Array(f),p.byteLength),w.buffer}_encodeJsonUserBroadcastPush(e){var n,r,i,o;const s=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",c=(r=e.join_ref)!==null&&r!==void 0?r:"",d=e.payload.event,f=(o=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},p=new TextEncoder().encode(JSON.stringify(f)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+d.length,_=new ArrayBuffer(this.HEADER_LENGTH+m);let w=new DataView(_),E=0;w.setUint8(E++,this.KINDS.userBroadcastPush),w.setUint8(E++,c.length),w.setUint8(E++,a.length),w.setUint8(E++,s.length),w.setUint8(E++,d.length),w.setUint8(E++,this.JSON_ENCODING),Array.from(c,g=>w.setUint8(E++,g.charCodeAt(0))),Array.from(a,g=>w.setUint8(E++,g.charCodeAt(0))),Array.from(s,g=>w.setUint8(E++,g.charCodeAt(0))),Array.from(d,g=>w.setUint8(E++,g.charCodeAt(0)));var y=new Uint8Array(_.byteLength+p.byteLength);return y.set(new Uint8Array(_),0),y.set(new Uint8Array(p),_.byteLength),y.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4);let c=this.HEADER_LENGTH+4;const d=r.decode(e.slice(c,c+i));c=c+i;const f=r.decode(e.slice(c,c+o));c=c+o;const h=r.decode(e.slice(c,c+s));c=c+s;const p=e.slice(c,e.byteLength),m=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,_={type:this.BROADCAST_EVENT,event:f,payload:m};return s>0&&(_.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:d,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class ig{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var z;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(z||(z={}));const df=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,s)=>(o[s]=aI(s,t,e,i),o),{}):{}},aI=(t,e,n,r)=>{const i=e.find(a=>a.name===t),o=i==null?void 0:i.type,s=n[t];return o&&!r.includes(o)?og(o,s):ea(s)},og=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return fI(e,n)}switch(t){case z.bool:return uI(e);case z.float4:case z.float8:case z.int2:case z.int4:case z.int8:case z.numeric:case z.oid:return cI(e);case z.json:case z.jsonb:return dI(e);case z.timestamp:return hI(e);case z.abstime:case z.date:case z.daterange:case z.int4range:case z.int8range:case z.money:case z.reltime:case z.text:case z.time:case z.timestamptz:case z.timetz:case z.tsrange:case z.tstzrange:return ea(e);default:return ea(e)}},ea=t=>t,uI=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},cI=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},dI=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},fI=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const s=t.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>og(e,a))}return t},hI=t=>typeof t=="string"?t.replace(" ","T"):t,sg=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fs{constructor(e,n,r={},i=Zl){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ff;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(ff||(ff={}));class Hr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hr.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=Hr.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hr.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),s=this.transformState(n),a={},c={};return this.map(o,(d,f)=>{s[d]||(c[d]=f)}),this.map(s,(d,f)=>{const h=o[d];if(h){const p=f.map(E=>E.presence_ref),m=h.map(E=>E.presence_ref),_=f.filter(E=>m.indexOf(E.presence_ref)<0),w=h.filter(E=>p.indexOf(E.presence_ref)<0);_.length>0&&(a[d]=_),w.length>0&&(c[d]=w)}else a[d]=f}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var d;const f=(d=e[a])!==null&&d!==void 0?d:[];if(e[a]=this.cloneDeep(c),f.length>0){const h=e[a].map(m=>m.presence_ref),p=f.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,f,c)}),this.map(s,(a,c)=>{let d=e[a];if(!d)return;const f=c.map(h=>h.presence_ref);d=d.filter(h=>f.indexOf(h.presence_ref)<0),e[a]=d,i(a,d,c),d.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hf;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hf||(hf={}));var zr;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(zr||(zr={}));var gt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gt||(gt={}));class hu{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Fs(this,it.join,this.params,this.timeout),this.rejoinTimer=new ig(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Hr(this),this.broadcastEndpointURL=sg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==se.closed){const{config:{broadcast:s,presence:a,private:c}}=this.params,d=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[zr.PRESENCE]&&this.bindings[zr.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},p={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:f}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(gt.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(gt.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var _;if(this.socket.setAuth(),m===void 0){e==null||e(gt.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,E=(_=w==null?void 0:w.length)!==null&&_!==void 0?_:0,y=[];for(let g=0;g<E;g++){const v=w[g],{filter:{event:S,schema:T,table:C,filter:A}}=v,P=m&&m[g];if(P&&P.event===S&&P.schema===T&&P.table===C&&P.filter===A)y.push(Object.assign(Object.assign({},v),{id:P.id}));else{this.unsubscribe(),this.state=se.errored,e==null||e(gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(gt.SUBSCRIBED);return}}).receive("error",m=>{this.state=se.errored,e==null||e(gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===se.joined&&e===zr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const d=await a.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:s}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=d.body)===null||i===void 0?void 0:i.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;const d=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=se.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Fs(this,it.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=se.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Fs(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sI){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const s=e.toLocaleLowerCase(),{close:a,error:c,leave:d,join:f}=it;if(r&&[a,c,d,f].indexOf(s)>=0&&r!==this._joinRef())return;let p=this._onMessage(s,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var _,w,E;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(w=m.filter)===null||w===void 0?void 0:w.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===s}).map(m=>m.callback(p,r)):(o=this.bindings[s])===null||o===void 0||o.filter(m=>{var _,w,E,y,g,v;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in m){const S=m.id,T=(_=m.filter)===null||_===void 0?void 0:_.event;return S&&((w=n.ids)===null||w===void 0?void 0:w.includes(S))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const S=(g=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return S==="*"||S===((v=n==null?void 0:n.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===s}).map(m=>{if(typeof p=="object"&&"ids"in p){const _=p.data,{schema:w,table:E,commit_timestamp:y,type:g,errors:v}=_;p=Object.assign(Object.assign({},{schema:w,table:E,commit_timestamp:y,eventType:g,new:{},old:{},errors:v}),this._getPayloadRecords(_))}m.callback(p,r)})}_isClosed(){return this.state===se.closed}_isJoined(){return this.state===se.joined}_isJoining(){return this.state===se.joining}_isLeaving(){return this.state===se.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&hu.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(it.close,{},e)}_onError(e){this._on(it.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=se.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=df(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=df(e.columns,e.old_record)),n}}const Os=()=>{},Hi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},pI=[1e3,2e3,5e3,1e4],mI=1e4,gI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class yI{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zl,this.transport=null,this.heartbeatIntervalMs=Hi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Os,this.ref=0,this.reconnectTimer=null,this.vsn=cf,this.logger=Os,this.conn=null,this.sendBuffer=[],this.serializer=new lI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${jl.websocket}`,this.httpEndpoint=sg(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tI.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case an.connecting:return un.Connecting;case an.open:return un.Open;case an.closing:return un.Closing;default:return un.Closed}}isConnected(){return this.connectionState()===un.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new hu(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,s=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(oI,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Hi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===an.open||this.conn.readyState===an.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(it.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([gI],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:rI};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(it.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new ig(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Hi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,s,a,c,d,f,h,p,m;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Zl,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Hi.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=e==null?void 0:e.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Os,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:cf,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=e==null?void 0:e.reconnectAfterMs)!==null&&d!==void 0?d:_=>pI[_-1]||mI,this.vsn){case rg:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(_,w)=>w(JSON.stringify(_)),this.decode=(h=e==null?void 0:e.decode)!==null&&h!==void 0?h:(_,w)=>w(JSON.parse(_));break;case iI:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(m=e==null?void 0:e.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class pu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class vI extends pu{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ta extends pu{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const mu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_I=()=>Response,na=t=>{if(Array.isArray(t))return t.map(n=>na(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=na(r)}),e},wI=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Vs=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},EI=(t,e,n)=>U(void 0,void 0,void 0,function*(){const r=yield _I();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const o=t.status||500,s=(i==null?void 0:i.statusCode)||o+"";e(new vI(Vs(i),o,s))}).catch(i=>{e(new ta(Vs(i),i))}):e(new ta(Vs(t),t))}),SI=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(wI(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function yi(t,e,n,r,i,o){return U(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,SI(e,r,i,o)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>EI(c,a,r))})})}function ui(t,e,n,r){return U(this,void 0,void 0,function*(){return yi(t,"GET",e,n,r)})}function nt(t,e,n,r,i){return U(this,void 0,void 0,function*(){return yi(t,"POST",e,r,i,n)})}function ra(t,e,n,r,i){return U(this,void 0,void 0,function*(){return yi(t,"PUT",e,r,i,n)})}function TI(t,e,n,r){return U(this,void 0,void 0,function*(){return yi(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gu(t,e,n,r,i){return U(this,void 0,void 0,function*(){return yi(t,"DELETE",e,r,i,n)})}class CI{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return U(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(X(e))return{data:null,error:e};throw e}})}}var lg;class II{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[lg]="BlobDownloadBuilder",this.promise=null}asStream(){return new CI(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return U(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(X(e))return{data:null,error:e};throw e}})}}lg=Symbol.toStringTag;const AI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class RI{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=mu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return U(this,void 0,void 0,function*(){try{let o;const s=Object.assign(Object.assign({},pf),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=r,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const d=this._removeEmptyFolders(n),f=this._getFinalPath(d),h=yield(e=="PUT"?ra:nt)(this.fetch,`${this.url}/object/${f}`,o,Object.assign({headers:a},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:d,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(X(o))return{data:null,error:o};throw o}})}upload(e,n,r){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return U(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),a=new URL(this.url+`/object/upload/sign/${s}`);a.searchParams.set("token",n);try{let c;const d=Object.assign({upsert:pf.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const h=yield ra(this.fetch,a.toString(),c,{headers:f});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(X(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return U(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield nt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(this.url+o.url),a=s.searchParams.get("token");if(!a)throw new pu("No token returned by API");return{data:{signedUrl:s.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}update(e,n,r){return U(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return U(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}copy(e,n,r){return U(this,void 0,void 0,function*(){try{return{data:{path:(yield nt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return U(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield nt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${s}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return U(this,void 0,void 0,function*(){try{const i=yield nt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),s=o?`?${o}`:"",a=this._getFinalPath(e),c=()=>ui(this.fetch,`${this.url}/${i}/${a}${s}`,{headers:this.headers,noResolveJson:!0});return new II(c,this.shouldThrowOnError)}info(e){return U(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ui(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:na(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}exists(e){return U(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield TI(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r)&&r instanceof ta){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let d=i.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${d}`)}}}remove(e){return U(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}list(e,n,r){return U(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},AI),n),{prefix:e||""});return{data:yield nt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}listV2(e,n){return U(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield nt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const ag="2.84.0",ug={"X-Client-Info":`storage-js/${ag}`};class PI{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ug),n),this.fetch=mu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return U(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ui(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}createBucket(e){return U(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield nt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(X(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return U(this,void 0,void 0,function*(){try{return{data:yield ra(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(X(r))return{data:null,error:r};throw r}})}emptyBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class kI{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ug),n),this.fetch=mu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield nt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}listBuckets(e){return U(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ui(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield gu(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(X(n))return{data:null,error:n};throw n}})}}const yu={"X-Client-Info":`storage-js/${ag}`,"Content-Type":"application/json"};class cg extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Oe(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class $s extends cg{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class NI extends cg{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var mf;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(mf||(mf={}));const vu=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xI=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),MI=(t,e,n)=>U(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(s=>{const a=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";e(new $s(gf(s),i,a))}).catch(()=>{const s=i+"",a=o.statusText||`HTTP ${i} error`;e(new $s(a,i,s))});else{const s=i+"",a=o.statusText||`HTTP ${i} error`;e(new $s(a,i,s))}}else e(new NI(gf(t),t))}),DI=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(xI(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function UI(t,e,n,r,i,o){return U(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(n,DI(e,r,i,o)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>MI(c,a,r))})})}function Ve(t,e,n,r,i){return U(this,void 0,void 0,function*(){return UI(t,"POST",e,r,i,n)})}class LI{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yu),n),this.fetch=vu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return U(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}getIndex(e,n){return U(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}listIndexes(e){return U(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return U(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Oe(r))return{data:null,error:r};throw r}})}}class bI{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yu),n),this.fetch=vu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return U(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ve(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}getVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}listVectors(e){return U(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ve(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}queryVectors(e){return U(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}deleteVectors(e){return U(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ve(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}}class FI{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},yu),n),this.fetch=vu(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}getBucket(e){return U(this,void 0,void 0,function*(){try{return{data:yield Ve(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}listBuckets(){return U(this,arguments,void 0,function*(e={}){try{return{data:yield Ve(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return U(this,void 0,void 0,function*(){try{return{data:(yield Ve(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Oe(n))return{data:null,error:n};throw n}})}}class OI extends FI{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new VI(this.url,this.headers,e,this.fetch)}}class VI extends LI{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return U(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return U(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return U(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return U(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new $I(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class $I extends bI{constructor(e,n,r,i,o){super(e,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return U(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return U(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return U(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return U(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return U(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class BI extends PI{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new RI(this.url,this.headers,e,this.fetch)}get vectors(){return new OI(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kI(this.url+"/iceberg",this.headers,this.fetch)}}const GI="2.84.0";let Dr="";typeof Deno<"u"?Dr="deno":typeof document<"u"?Dr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dr="react-native":Dr="node";const qI={"X-Client-Info":`supabase-js-${Dr}/${GI}`},HI={headers:qI},zI={schema:"public"},JI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},WI={},KI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),YI=()=>Headers,QI=(t,e,n)=>{const r=KI(n),i=YI();return async(o,s)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:t;let d=new i(s==null?void 0:s.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(o,Object.assign(Object.assign({},s),{headers:d}))}};function XI(t){return t.endsWith("/")?t:t+"/"}function ZI(t,e){var n,r;const{db:i,auth:o,realtime:s,global:a}=t,{db:c,auth:d,realtime:f,global:h}=e,p={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},d),o),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function jI(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(XI(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dg="2.84.0",xn=30*1e3,ia=3,Bs=ia*xn,eA="http://localhost:9999",tA="supabase.auth.token",nA={"X-Client-Info":`gotrue-js/${dg}`},oa="X-Supabase-Api-Version",fg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},rA=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,iA=10*60*1e3;class ci extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function L(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class oA extends ci{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function sA(t){return L(t)&&t.name==="AuthApiError"}class cn extends ci{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zt extends ci{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class be extends Zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lA(t){return L(t)&&t.name==="AuthSessionMissingError"}class An extends Zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zi extends Zt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ji extends Zt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function aA(t){return L(t)&&t.name==="AuthImplicitGrantRedirectError"}class yf extends Zt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sa extends Zt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Gs(t){return L(t)&&t.name==="AuthRetryableFetchError"}class vf extends Zt{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class la extends Zt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),_f=` 	
\r=`.split(""),uA=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<_f.length;e+=1)t[_f[e].charCodeAt(0)]=-2;for(let e=0;e<Oo.length;e+=1)t[Oo[e].charCodeAt(0)]=e;return t})();function wf(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Oo[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Oo[r]),e.queuedBits-=6}}function hg(t,e,n){const r=uA[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ef(t){const e=[],n=s=>{e.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{fA(s,r,n)};for(let s=0;s<t.length;s+=1)hg(t.charCodeAt(s),i,o);return e.join("")}function cA(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function dA(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}cA(r,e)}}function fA(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function tr(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)hg(t.charCodeAt(i),n,r);return new Uint8Array(e)}function hA(t){const e=[];return dA(t,n=>e.push(n)),new Uint8Array(e)}function pn(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>wf(i,n,r)),wf(null,n,r),e.join("")}function pA(t){return Math.round(Date.now()/1e3)+t}function mA(){return Symbol("auth-callback")}const fe=()=>typeof window<"u"&&typeof document<"u",nn={tested:!1,writable:!1},pg=()=>{if(!fe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(nn.tested)return nn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),nn.tested=!0,nn.writable=!0}catch{nn.tested=!0,nn.writable=!1}return nn.writable};function gA(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const mg=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),yA=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Mn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},rn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nt=async(t,e)=>{await t.removeItem(e)};class as{constructor(){this.promise=new as.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}as.promiseConstructor=Promise;function qs(t){const e=t.split(".");if(e.length!==3)throw new la("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!rA.test(e[r]))throw new la("JWT not in base64url format");return{header:JSON.parse(Ef(e[0])),payload:JSON.parse(Ef(e[1])),signature:tr(e[2]),raw:{header:e[0],payload:e[1]}}}async function vA(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _A(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const s=await t(o);if(!e(o,null,s)){r(s);return}}catch(s){if(!e(o,s)){i(s);return}}})()})}function wA(t){return("0"+t.toString(16)).substr(-2)}function EA(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,wA).join("")}async function SA(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function TA(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await SA(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rn(t,e,n=!1){const r=EA();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Mn(t,`${e}-code-verifier`,i);const o=await TA(r);return[o,r===o?"plain":"s256"]}const CA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function IA(t){const e=t.headers.get(oa);if(!e||!e.match(CA))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AA(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function RA(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const PA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pn(t){if(!PA.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hs(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function kA(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Sf(t){return JSON.parse(JSON.stringify(t))}const ln=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NA=[502,503,504];async function Tf(t){var e;if(!yA(t))throw new sa(ln(t),0);if(NA.includes(t.status))throw new sa(ln(t),t.status);let n;try{n=await t.json()}catch(o){throw new cn(ln(o),o)}let r;const i=IA(t);if(i&&i.getTime()>=fg["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vf(ln(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new be}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new vf(ln(n),t.status,n.weak_password.reasons);throw new oA(ln(n),t.status||500,r)}const xA=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function b(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[oa]||(o[oa]=fg["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const s=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(s.redirect_to=r.redirectTo);const a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await MA(t,e,n+a,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function MA(t,e,n,r,i,o){const s=xA(e,r,i,o);let a;try{a=await t(n,Object.assign({},s))}catch(c){throw console.error(c),new sa(ln(c),0)}if(a.ok||await Tf(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(c){await Tf(c)}}function et(t){var e;let n=null;LA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=pA(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Cf(t){const e=et(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Lt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function DA(t){return{data:t,error:null}}function UA(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,s=gr(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function If(t){return t}function LA(t){return t.access_token&&t.refresh_token&&t.expires_in}const zs=["global","local","others"];class bA{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=mg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=zs[0]){if(zs.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zs.join(", ")}`);try{return await b(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(L(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await b(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Lt})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=gr(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await b(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:UA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(L(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await b(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Lt})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,s,a,c;try{const d={nextPage:null,lastPage:0,total:0},f=await b(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:If});if(f.error)throw f.error;const h=await f.json(),p=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{const w=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);d[`${E}Page`]=w}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(L(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Pn(e);try{return await b(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Lt})}catch(n){if(L(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Pn(e);try{return await b(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Lt})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Pn(e);try{return await b(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Lt})}catch(r){if(L(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Pn(e.userId);try{const{data:n,error:r}=await b(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(L(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Pn(e.userId),Pn(e.id);try{return{data:await b(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,s,a,c;try{const d={nextPage:null,lastPage:0,total:0},f=await b(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:If});if(f.error)throw f.error;const h=await f.json(),p=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,m=(c=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{const w=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);d[`${E}Page`]=w}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(L(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(e){try{return await b(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await b(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(L(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await b(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(L(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await b(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(L(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await b(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(L(n))return{data:null,error:n};throw n}}}function Af(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const kn={debug:!!(globalThis&&pg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gg extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class FA extends gg{}async function OA(t,e,n){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),kn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw kn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new FA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(kn.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function VA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yg(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function $A(t){return parseInt(t,16)}function BA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function GA(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:d,scheme:f,uri:h,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=yg(t.address),_=f?`${f}://${r}`:r,w=t.statement?`${t.statement}
`:"",E=`${_} wants you to sign in with your Ethereum account:
${m}

${w}`;let y=`URI: ${h}
Version: ${p}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),a&&(y+=`
Not Before: ${a.toISOString()}`),c&&(y+=`
Request ID: ${c}`),d){let g=`
Resources:`;for(const v of d){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);g+=`
- ${v}`}y+=g}return`${E}
${y}`}class ie extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Vo extends ie{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function qA({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ie({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ie({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ie({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ie({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ie({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ie({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ie({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ie({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const s=window.location.hostname;if(vg(s)){if(o.rp.id!==s)return new ie({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ie({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function HA({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ie({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ie({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(vg(r)){if(n.rpId!==r)return new ie({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ie({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ie({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ie({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class zA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const JA=new zA;function WA(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=gr(t,["challenge","user","excludeCredentials"]),o=tr(e).buffer,s=Object.assign(Object.assign({},n),{id:tr(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:tr(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function KA(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=gr(t,["challenge","allowCredentials"]),i=tr(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){const a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:tr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function YA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:pn(new Uint8Array(t.response.attestationObject)),clientDataJSON:pn(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function QA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:pn(new Uint8Array(i.authenticatorData)),clientDataJSON:pn(new Uint8Array(i.clientDataJSON)),signature:pn(new Uint8Array(i.signature)),userHandle:i.userHandle?pn(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vg(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Rf(){var t,e;return!!(fe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function XA(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vo("Browser returned unexpected credential type",e)}:{data:null,error:new Vo("Empty credential response",e)}}catch(e){return{data:null,error:qA({error:e,options:t})}}}async function ZA(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vo("Browser returned unexpected credential type",e)}:{data:null,error:new Vo("Empty credential response",e)}}catch(e){return{data:null,error:HA({error:e,options:t})}}}const jA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},eR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $o(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(e(s)){const a=r[o];e(a)?r[o]=$o(a,s):r[o]=$o(s)}else r[o]=s}return r}function tR(t,e){return $o(jA,t,e||{})}function nR(t,e){return $o(eR,t,e||{})}class rR{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:s,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!s)return{data:null,error:a};const c=i??JA.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:d}=s.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${r}`),d.displayName||(d.displayName=d.name)}switch(s.webauthn.type){case"create":{const d=tR(s.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:f,error:h}=await XA({publicKey:d,signal:c});return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}case"request":{const d=nR(s.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:f,error:h}=await ZA(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:d,signal:c}));return f?{data:{factorId:e,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:h}}}}catch(s){return L(s)?{data:null,error:s}:{data:null,error:new cn("Unexpected error in challenge",s)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new ci("rpId is required for WebAuthn authentication")};try{if(!Rf())return{data:null,error:new cn("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};const{webauthn:c}=s;return this._verify({factorId:e,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return L(s)?{data:null,error:s}:{data:null,error:new cn("Unexpected error in authenticate",s)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new ci("rpId is required for WebAuthn registration")};try{if(!Rf())return{data:null,error:new cn("Browser does not support WebAuthn",null)};const{data:s,error:a}=await this._enroll({friendlyName:e});if(!s)return await this.client.mfa.listFactors().then(f=>{var h;return(h=f.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:a};const{data:c,error:d}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(s){return L(s)?{data:null,error:s}:{data:null,error:new cn("Unexpected error in register",s)}}}}VA();const iR={url:eA,storageKey:tA,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nA,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pf(t,e,n){return await n()}const Nn={};class di{get jwks(){var e,n;return(n=(e=Nn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Nn[this.storageKey]=Object.assign(Object.assign({},Nn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Nn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Nn[this.storageKey]=Object.assign(Object.assign({},Nn[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},iR),e);if(this.storageKey=o.storageKey,this.instanceID=(n=di.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,di.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&fe()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new bA({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=mg(o.fetch),this.lock=o.lock||Pf,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:fe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=OA:this.lock=Pf,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:pg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Af(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Af(this.memoryStorage)),fe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${dg}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(fe()&&(n=gA(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),fe()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),aA(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:s,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",a),await this._saveSession(s),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return L(n)?this._returnResult({error:n}):this._returnResult({error:new cn("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await b(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:et}),{data:s,error:a}=o;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const c=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(L(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:f,password:h,options:p}=e;let m=null,_=null;this.flowType==="pkce"&&([m,_]=await Rn(this.storage,this.storageKey)),o=await b(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:f,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:_},xform:et})}else if("phone"in e){const{phone:f,password:h,options:p}=e;o=await b(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:et})}else throw new zi("You must provide either an email or phone number and a password");const{data:s,error:a}=o;if(a||!s)return this._returnResult({data:{user:null,session:null},error:a});const c=s.session,d=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(o){if(L(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:s,options:a}=e;n=await b(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Cf})}else if("phone"in e){const{phone:o,password:s,options:a}=e;n=await b(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Cf})}else throw new zi("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new An;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(L(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,s,a,c,d,f,h,p;let m,_;if("message"in e)m=e.message,_=e.signature;else{const{chain:w,wallet:E,statement:y,options:g}=e;let v;if(fe())if(typeof E=="object")v=E;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")v=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=E}const S=new URL((n=g==null?void 0:g.url)!==null&&n!==void 0?n:window.location.href),T=await v.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=yg(T[0]);let A=(r=g==null?void 0:g.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!A){const k=await v.request({method:"eth_chainId"});A=$A(k)}const P={domain:S.host,address:C,statement:y,uri:S.href,version:"1",chainId:A,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(o=g==null?void 0:g.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=g==null?void 0:g.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=g==null?void 0:g.signInWithEthereum)===null||f===void 0?void 0:f.resources};m=GA(P),_=await v.request({method:"personal_sign",params:[BA(m),C]})}try{const{data:w,error:E}=await b(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:_},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:et});if(E)throw E;if(!w||!w.session||!w.user){const y=new An;return this._returnResult({data:{user:null,session:null},error:y})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:E})}catch(w){if(L(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var n,r,i,o,s,a,c,d,f,h,p,m;let _,w;if("message"in e)_=e.message,w=e.signature;else{const{chain:E,wallet:y,statement:g,options:v}=e;let S;if(fe())if(typeof y=="object")S=y;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))S=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const T=new URL((n=v==null?void 0:v.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const C=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),g?{statement:g}:null));let A;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")A=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)A=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in A&&"signature"in A&&(typeof A.signedMessage=="string"||A.signedMessage instanceof Uint8Array)&&A.signature instanceof Uint8Array)_=typeof A.signedMessage=="string"?A.signedMessage:new TextDecoder().decode(A.signedMessage),w=A.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${T.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(i=(r=v==null?void 0:v.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((s=v==null?void 0:v.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((d=v==null?void 0:v.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(f=v==null?void 0:v.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(A=>`- ${A}`)]:[]].join(`
`);const C=await S.signMessage(new TextEncoder().encode(_),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=C}}try{const{data:E,error:y}=await b(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:pn(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:et});if(y)throw y;if(!E||!E.session||!E.user){const g=new An;return this._returnResult({data:{user:null,session:null},error:g})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:y})}catch(E){if(L(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await rn(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:s}=await b(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:et});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!o||!o.session||!o.user){const a=new An;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:s})}catch(o){if(L(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:s}=e,a=await b(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:et}),{data:c,error:d}=a;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const f=new An;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(n){if(L(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,s;try{if("email"in e){const{email:a,options:c}=e;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Rn(this.storage,this.storageKey));const{error:h}=await b(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:c}=e,{data:d,error:f}=await b(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new zi("You must provide either an email or phone number.")}catch(a){if(L(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:s,error:a}=await b(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:et});if(a)throw a;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,d=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(L(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,s;try{let a=null,c=null;this.flowType==="pkce"&&([a,c]=await Rn(this.storage,this.storageKey));const d=await b(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:DA});return!((o=d.data)===null||o===void 0)&&o.url&&fe()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(d.data.url),this._returnResult(d)}catch(a){if(L(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new be;const{error:i}=await b(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(L(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:s}=await b(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:s,error:a}=await b(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:a})}throw new zi("You must provide either an email or phone number and a type")}catch(n){if(L(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Bs:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const s=await rn(this.userStorage,this.storageKey+"-user");s!=null&&s.user?e.user=s.user:e.user=Hs()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};e.user=kA(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await b(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Lt}):await this._useSession(async n=>{var r,i,o;const{data:s,error:a}=n;if(a)throw a;return!(!((r=s.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new be}:await b(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Lt})})}catch(n){if(L(n))return lA(n)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new be;const s=i.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Rn(this.storage,this.storageKey));const{data:d,error:f}=await b(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:s.access_token,xform:Lt});if(f)throw f;return s.user=d.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(r){if(L(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new be;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:s}=qs(e.access_token);if(s.exp&&(r=s.exp,i=r<=n),i){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};o=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(L(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:s,error:a}=n;if(a)throw a;e=(r=s.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new be;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(L(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!fe())throw new Ji("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ji(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yf("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ji("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yf("No code detected.");const{data:g,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:s,expires_in:a,expires_at:c,token_type:d}=e;if(!o||!a||!s||!d)throw new Ji("No session defined in URL");const f=Math.round(Date.now()/1e3),h=parseInt(a);let p=f+h;c&&(p=parseInt(c));const m=p-f;m*1e3<=xn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const _=p-h;f-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,p,f):f-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,p,f);const{data:w,error:E}=await this._getUser(o);if(E)throw E;const y={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:p,refresh_token:s,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(r){if(L(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await rn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const s=(r=i.session)===null||r===void 0?void 0:r.access_token;if(s){const{error:a}=await this.admin.signOut(s,e);if(a&&!(sA(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=mA(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:s}=n;if(s)throw s;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Rn(this.storage,this.storageKey,!0));try{return await b(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(L(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var s,a,c,d,f;const{data:h,error:p}=o;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await b(this.fetch,"GET",m,{headers:this.headers,jwt:(f=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return fe()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(L(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:s,provider:a,token:c,access_token:d,nonce:f}=e,h=await b(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:c,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:et}),{data:p,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new An}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:m}))}catch(i){if(L(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)throw s;return await b(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _A(async i=>(i>0&&await vA(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await b(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:et})),(i,o)=>{const s=200*Math.pow(2,i);return o&&Gs(o)&&Date.now()+s-r<xn})}catch(r){if(this._debug(n,"error",r),L(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),fe()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await rn(this.storage,this.storageKey);if(i&&this.userStorage){let s=await rn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await Mn(this.userStorage,this.storageKey+"-user",s)),i.user=(e=s==null?void 0:s.user)!==null&&e!==void 0?e:Hs()}else if(i&&!i.user&&!i.user){const s=await rn(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Nt(this.storage,this.storageKey+"-user"),await Mn(this.storage,this.storageKey,i)):i.user=Hs()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Bs;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Bs}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Gs(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:a}=await this._getUser(i.access_token);!a&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new be;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new as;const{data:o,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new be;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const a={data:o.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(o){if(this._debug(i,"error",o),L(o)){const s={data:null,error:o};return Gs(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(s),s}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],s=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(c){o.push(c)}});if(await Promise.all(s),o.length>0){for(let a=0;a<o.length;a+=1)console.error(o[a]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Mn(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Sf(i);await Mn(this.storage,this.storageKey,o)}else{const i=Sf(n);await Mn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),xn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/xn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${xn}ms, refresh threshold is ${ia} ticks`),i<=ia&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gg)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,s]=await Rn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await b(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:s}=n;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:d}=await b(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return d?this._returnResult({data:null,error:d}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?YA(e.webauthn.credential_response):QA(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await b(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const s=await b(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(s.error)return s;const{data:a}=s;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:WA(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:KA(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=qs(r.access_token);let s=null;o.aal&&(s=o.aal);let a=s;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const d=o.amr||[];return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await b(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new be})})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new be});const s=await b(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return s.data&&s.data.redirect_url&&fe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new be});const s=await b(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return s.data&&s.data.redirect_url&&fe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await b(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new be})})}catch(e){if(L(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await b(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new be})})}catch(n){if(L(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+iA>i)return r;const{data:o,error:s}=await b(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:_}=await this.getSession();if(_||!m.session)return this._returnResult({data:null,error:_});r=m.session.access_token}const{header:i,payload:o,signature:s,raw:{header:a,payload:c}}=qs(r);n!=null&&n.allowExpired||AA(o.exp);const d=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!d){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:o,header:i,signature:s},error:null}}const f=RA(i.alg),h=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,h,s,hA(`${a}.${c}`)))throw new la("Invalid JWT signature");return{data:{claims:o,header:i,signature:s},error:null}}catch(r){if(L(r))return this._returnResult({data:null,error:r});throw r}}}di.nextInstanceID={};const oR=di;class sR extends oR{constructor(e){super(e)}}class lR{constructor(e,n,r){var i,o,s;this.supabaseUrl=e,this.supabaseKey=n;const a=jI(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,d={db:zI,realtime:WI,auth:Object.assign(Object.assign({},JI),{storageKey:c}),global:HI},f=ZI(r??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=f.global.headers)!==null&&o!==void 0?o:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=QI(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new eI(new URL("rest/v1",a).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new BI(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new XC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:s,flowType:a,lock:c,debug:d,throwOnError:f},h,p){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sR({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:a,lock:c,debug:d,throwOnError:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new yI(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aR=(t,e,n)=>new lR(t,e,n);function uR(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}uR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");let Js=null,kf=null;const _g=t=>{if(!t.url||!t.anonKey)return null;const e=JSON.stringify({url:t.url,key:t.anonKey});if(!Js||kf!==e)try{Js=aR(t.url,t.anonKey),kf=e}catch(n){return console.error("Failed to initialize Supabase client:",n),null}return Js},cR=async(t,e)=>{const n=_g(e);if(!n)throw new Error("Supabase client could not be initialized. Check your URL and Key.");const r=t.name.replace(/[^\x00-\x7F]/g,"").replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_.-]/g,""),i=`${Date.now()}_${r}`,{data:o,error:s}=await n.storage.from(e.bucketName).upload(i,t,{cacheControl:"3600",upsert:!1});if(s)throw console.error("Supabase Upload Error:",s),s.message.includes("row-level security")||s.message.includes("policy")||s.statusCode==="42501"?new Error(`Access Denied (RLS Policy). Go to Supabase > Storage > Policies, and add a policy to allow 'anon' users to INSERT into '${e.bucketName}'.`):new Error(s.message);return(o==null?void 0:o.path)||null},dR=async(t,e,n,r)=>{const i=_g(r);if(!i)return;const{error:o}=await i.from("audio_analyses").insert([{filename:t,storage_path:e,transcription:n.transcription,grammar_data:n.grammarPoints,created_at:new Date().toISOString()}]);o&&console.warn("Could not save to database (Table 'audio_analyses' might not exist or RLS policy blocks insert):",o.message)},fR=()=>{const[t,e]=Ce.useState(Le.IDLE),[n,r]=Ce.useState(!1),[i,o]=Ce.useState(null),[s,a]=Ce.useState(null),[c,d]=Ce.useState(null),[f,h]=Ce.useState(()=>{try{const y=localStorage.getItem("grammarhub_settings");if(y)return JSON.parse(y);const g=localStorage.getItem("grammarhub_supabase_config");return g?{...JSON.parse(g),geminiApiKey:""}:{url:"",anonKey:"",bucketName:"audio-uploads",geminiApiKey:""}}catch{return{url:"",anonKey:"",bucketName:"audio-uploads",geminiApiKey:""}}}),p=y=>{h(y),localStorage.setItem("grammarhub_settings",JSON.stringify(y)),o(null),a(null)},m=Ce.useRef(null),_=async y=>{var v;const g=(v=y.target.files)==null?void 0:v[0];g&&(y.target.value="",await w(g))},w=async y=>{if(o(null),a(null),!kc.includes(y.type)){o("Invalid file type. Allowed: MP3, WAV, M4A, OGG.");return}if(y.size>bs*1024*1024){o(`File too large. Max size is ${bs}MB.`);return}if(!f.url||!f.anonKey||!f.geminiApiKey){a("Please configure Supabase details AND Gemini API Key to continue."),r(!0);return}try{e(Le.UPLOADING);let g="";try{const T=await cR(y,f);T&&(g=T)}catch(T){console.error("Upload failed",T);let C=T.message||"Unknown error";C.includes("violate")||C.includes("policy")?C=`Permission denied: ${C}. Check your Storage RLS Policies.`:C.includes("bucket")&&(C=`Bucket error: ${C}. Does bucket '${f.bucketName}' exist?`),o(`Upload failed: ${C}`),e(Le.IDLE);return}e(Le.ANALYZING);const v=await p_(y),S=await HC(v,y.type,f.geminiApiKey);await dR(y.name,g,S,f),d(S),e(Le.SUCCESS)}catch(g){console.error(g),e(Le.ERROR),o(g instanceof Error?g.message:"An unexpected error occurred.")}},E=()=>{switch(t){case Le.IDLE:case Le.ERROR:return I.jsx("div",{className:"max-w-2xl mx-auto mt-16",children:I.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-12 text-center shadow-sm",children:[I.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center mb-6",children:I.jsx(Pc,{className:"w-8 h-8"})}),I.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upload Classroom Audio"}),I.jsx("p",{className:"text-gray-500 mb-8 text-sm",children:"Upload an MP3, WAV or M4A file. We'll transcribe it and extract grammar points."}),I.jsx("input",{type:"file",ref:m,onChange:_,accept:kc.join(","),className:"hidden"}),I.jsx("button",{onClick:()=>{var y;return(y=m.current)==null?void 0:y.click()},className:"bg-[#2da44e] text-white px-6 py-3 rounded-md font-semibold hover:bg-[#2c974b] transition-colors shadow-sm active:scale-95 transform",children:"Choose Audio File"}),I.jsxs("div",{className:"mt-6 flex justify-center gap-6 text-xs text-gray-400",children:[I.jsxs("span",{children:["Max ",bs,"MB"]}),I.jsx("span",{children:""}),I.jsx("span",{children:"Secure Supabase Storage"}),I.jsx("span",{children:""}),I.jsx("span",{children:"Powered by Gemini 2.5"})]}),i&&I.jsxs("div",{className:"mt-8 p-4 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm flex flex-col items-center gap-1 animate-in fade-in text-center",children:[I.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[I.jsx(jv,{className:"w-4 h-4 flex-shrink-0"}),I.jsx("span",{children:"Error"})]}),I.jsx("span",{children:i})]})]})});case Le.UPLOADING:return I.jsxs("div",{className:"flex flex-col items-center justify-center mt-32",children:[I.jsx("div",{className:"animate-bounce mb-4",children:I.jsx(Pc,{className:"w-12 h-12 text-blue-500"})}),I.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Uploading to Supabase..."}),I.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Saving file to your storage bucket."})]});case Le.ANALYZING:return I.jsxs("div",{className:"flex flex-col items-center justify-center mt-32",children:[I.jsx("div",{className:"animate-spin mb-4",children:I.jsx(o_,{className:"w-12 h-12 text-purple-600"})}),I.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Analyzing Conversation..."}),I.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Gemini is transcribing and identifying grammar points."}),I.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded px-4 py-2 flex items-center gap-2 text-sm text-gray-600",children:[I.jsx(n_,{className:"w-4 h-4"}),I.jsx("span",{children:"Model: gemini-2.5-flash"})]})]});case Le.SUCCESS:return c?I.jsx(h_,{result:c,onReset:()=>{e(Le.IDLE),d(null)}}):null}};return I.jsxs("div",{className:"min-h-screen flex flex-col",children:[I.jsx(d_,{onOpenSettings:()=>{a(null),r(!0)}}),I.jsx("main",{className:"flex-1 p-6",children:E()}),I.jsx(f_,{isOpen:n,onClose:()=>r(!1),config:f,onSave:p,message:s})]})},wg=document.getElementById("root");if(!wg)throw new Error("Could not find root element to mount to");const hR=Ws.createRoot(wg);hR.render(I.jsx(Vg.StrictMode,{children:I.jsx(fR,{})}));
